import{c as Js,u as ei,a as ye,b as we,j as o,T as O,B as H,F as Hr,S as zr,M as Je,d as ra,I as Le,A as ti,e as ri,f as Ho,g as mt,h as bn,L as Nt,i as ct,k as ka,l as na,m as ut,D as Ia,C as Dn,G as ee,n as Ee,o as Me,p as Oe,q as tt,_ as Se,s as He,t as T,v as Pn,w as ni,x as J,y as zo,z as Ye,E as Ke,H as Xe,J as ue,K as Ge,N as Pt,O as jn,P as Yr,Q as Ea,R as Ur,U as Tt,V as ai,W as oi,X as oe,Y as $n,Z as st,$ as si,a0 as Dt,a1 as Bt,a2 as qr,a3 as gt,a4 as S,a5 as ii,a6 as Ht,a7 as li,a8 as Yo,a9 as ca,aa as nt,ab as ke,ac as Uo,ad as qo,ae as kt,af as ua,ag as Qe,ah as hn,ai as ci,aj as Vt,ak as ui,al as Oa,am as Ra,an as Qo,ao as di,ap as Lr,aq as Wr,ar as hi,as as fi,at as mi,au as Bn,av as pi,aw as gi,ax as vi,ay as xi,az as yi,aA as en,aB as wi,aC as bi,aD as _a,aE as Aa,aF as Di,aG as Pi,aH as ji,aI as Hn,aJ as zn,aK as Yn,aL as Un,aM as Rt,aN as xe,aO as qn,aP as Ci,aQ as Si,aR as Mi}from"./mui-DCb1GHGj.js";import{f as Ti,g as pe,b as ki,a as f,u as da,L as ha,O as Ii,h as Kr,c as fa,N as Ei,B as Oi,i as Ri,j as et}from"./vendor-Cde7IEv4.js";import{r as _i}from"./charts-D_jRoIZT.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();var tn={},Fa;function Ai(){if(Fa)return tn;Fa=1;var e=Ti();return tn.createRoot=e.createRoot,tn.hydrateRoot=e.hydrateRoot,tn}var Fi=Ai();const Ni=pe(Fi),Vi=Js({palette:{mode:"dark",primary:{main:"#00E5FF",contrastText:"#000000"},secondary:{main:"#7C4DFF",contrastText:"#FFFFFF"},background:{default:"#0A1929",paper:"#132F4C"},text:{primary:"#FFFFFF",secondary:"#B2BAC2"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontSize:"2.5rem",fontWeight:600,letterSpacing:"-0.02em"},h2:{fontSize:"2rem",fontWeight:600,letterSpacing:"-0.01em"},h3:{fontSize:"1.75rem",fontWeight:600},h4:{fontSize:"1.5rem",fontWeight:500},h5:{fontSize:"1.25rem",fontWeight:500},h6:{fontSize:"1rem",fontWeight:500}},components:{MuiDrawer:{styleOverrides:{paper:{backgroundColor:"#132F4C",borderRight:"1px solid rgba(255, 255, 255, 0.08)"}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:"#0A1929",backgroundImage:"none",borderBottom:"1px solid rgba(255, 255, 255, 0.08)"}}},MuiCard:{styleOverrides:{root:{backgroundImage:"none",backgroundColor:"#132F4C",borderRadius:12,border:"1px solid rgba(255, 255, 255, 0.08)"}}},MuiButton:{styleOverrides:{root:{borderRadius:8,textTransform:"none",fontWeight:600}}}}});var Zt={},Qn={};const Li=ki(ei);var Na;function be(){return Na||(Na=1,(function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=Li})(Qn)),Qn}var Va;function Wi(){if(Va)return Zt;Va=1;var e=ye();Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.default=void 0;var r=e(be()),t=we();return Zt.default=(0,r.default)((0,t.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),Zt}var $i=Wi();const Bi=pe($i);var Jt={},La;function Hi(){if(La)return Jt;La=1;var e=ye();Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.default=void 0;var r=e(be()),t=we();return Jt.default=(0,r.default)((0,t.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),Jt}var zi=Hi();const Yi=pe(zi);var er={},Wa;function Ui(){if(Wa)return er;Wa=1;var e=ye();Object.defineProperty(er,"__esModule",{value:!0}),er.default=void 0;var r=e(be()),t=we();return er.default=(0,r.default)((0,t.jsx)("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"}),"Bolt"),er}var qi=Ui();const Qi=pe(qi);var tr={},$a;function Gi(){if($a)return tr;$a=1;var e=ye();Object.defineProperty(tr,"__esModule",{value:!0}),tr.default=void 0;var r=e(be()),t=we();return tr.default=(0,r.default)((0,t.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),tr}var Ki=Gi();const Xi=pe(Ki);var rr={},Ba;function Zi(){if(Ba)return rr;Ba=1;var e=ye();Object.defineProperty(rr,"__esModule",{value:!0}),rr.default=void 0;var r=e(be()),t=we();return rr.default=(0,r.default)((0,t.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder"),rr}var Ji=Zi();const el=pe(Ji),ze=async(e,r={})=>{const t={...r.headers,"Content-Type":"application/json"},a=await fetch(e,{...r,headers:t});return(a.status===401||a.status===403)&&console.warn("Authentication failed"),a},Go=f.createContext(null),tl=({children:e})=>{const[r,t]=f.useState(null),[a,n]=f.useState(!0);f.useEffect(()=>{(async()=>{try{const m=await fetch("/api/auth/verify");if(m.ok){const g=await m.json();t(g.user)}}catch(m){console.error("Session verification failed:",m)}finally{n(!1)}})()},[]);const s=async(d,m)=>{const g=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:m})});if(g.ok){const h=await g.json();return t(h.user),{success:!0,user:h.user}}else return{success:!1,error:(await g.json()).error||"Login failed"}},i=async({email:d,password:m,name:g})=>{try{const h=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:m,name:g})});if(h.ok){const v=await h.json();return t(v.user),{success:!0,user:v.user}}else return{success:!1,error:(await h.json()).error||"Registration failed"}}catch(h){return{success:!1,error:h.message||"Network error"}}},l=async d=>{try{const m=await fetch("/api/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(m.ok){const g=await m.json();return t(g.user),{success:!0,user:g.user}}else return{success:!1,error:(await m.json()).error||"Update failed"}}catch(m){return{success:!1,error:m.message||"Network error"}}},u=async()=>{try{const d=await fetch("/api/auth/onboarding-status");return d.ok?(await d.json()).onboarding_completed:null}catch{return null}},c=async()=>{await fetch("/api/auth/logout",{method:"POST"}),t(null)};return o.jsx(Go.Provider,{value:{user:r,loading:a,login:s,register:i,updateProfile:l,checkOnboardingStatus:u,logout:c},children:e})},Et=()=>f.useContext(Go),Ko=f.createContext(null),rl=({children:e})=>{const{user:r}=Et(),[t,a]=f.useState([]),[n,s]=f.useState(null),[i,l]=f.useState(null),[u,c]=f.useState(!0);f.useEffect(()=>{r?d():(a([]),s(null),l(null),c(!1))},[r]);const d=async()=>{c(!0);try{const v=await ze("/api/settings/properties");if(v.ok){const y=await v.json();if(a(y),y.length>0){let b=null,P=null;r?.defaultPropertyId&&(b=y.find(w=>w.id===r.defaultPropertyId)),b||(b=y[0]),s(b),b?.meteringPoints?.length>0?(r?.defaultMeetingPointId&&(P=b.meteringPoints.find(w=>w.id===r.defaultMeetingPointId)),P||(P=b.meteringPoints[0]),l(P)):l(null)}}}catch(v){console.error("Failed to fetch properties:",v)}finally{c(!1)}},m=v=>{const y=t.find(b=>b.id===Number(v));s(y),y?.meteringPoints?.length>0?l(y.meteringPoints[0]):l(null)},g=v=>{const y=n?.meteringPoints?.find(b=>b.id===v);y&&l(y)},h=async()=>{if(n)try{await ze("/api/auth/profile",{method:"PUT",body:JSON.stringify({defaultPropertyId:n.id,defaultMeetingPointId:i?.id})})}catch(v){console.error("Failed to save default:",v)}};return o.jsx(Ko.Provider,{value:{properties:t,selectedProperty:n,selectedMeetingPoint:i,setSelectedProperty:m,setSelectedMeetingPoint:g,saveAsDefault:h,loading:u},children:e})},Xr=()=>f.useContext(Ko),nl=()=>{const{properties:e,selectedProperty:r,selectedMeetingPoint:t,setSelectedProperty:a,setSelectedMeetingPoint:n,saveAsDefault:s,loading:i}=Xr(),{user:l}=Et();return i?o.jsx(O,{variant:"caption",children:"Loading..."}):!e||e.length===0?o.jsx(O,{variant:"caption",color:"text.secondary",children:"No properties found"}):o.jsxs(H,{sx:{display:"flex",gap:2,alignItems:"center"},children:[o.jsx(Hr,{size:"small",variant:"standard",sx:{minWidth:120},children:o.jsx(zr,{value:r?.id||"",onChange:u=>a(u.target.value),disableUnderline:!0,sx:{color:"text.primary",fontSize:"0.875rem",fontWeight:500,"& .MuiSelect-select":{py:.5}},children:e.map(u=>o.jsx(Je,{value:u.id,children:u.name},u.id))})}),r?.meteringPoints?.length>0&&o.jsx(Hr,{size:"small",variant:"standard",sx:{minWidth:120},children:o.jsx(zr,{value:t?.id||"",onChange:u=>n(u.target.value),disableUnderline:!0,sx:{color:"text.secondary",fontSize:"0.875rem","& .MuiSelect-select":{py:.5}},children:r.meteringPoints.map(u=>o.jsx(Je,{value:u.id,children:u.name},u.id))})}),o.jsx(ra,{title:"Set as default",children:o.jsx(Le,{onClick:s,size:"small",color:"inherit",children:l?.defaultPropertyId===r?.id&&(!r?.meteringPoints?.length||l?.defaultMeetingPointId===t?.id)?o.jsx(Xi,{fontSize:"small"}):o.jsx(el,{fontSize:"small"})})})]})},al=({onSidebarOpen:e})=>o.jsx(ti,{position:"fixed",sx:{zIndex:r=>r.zIndex.drawer+1,boxShadow:"none"},children:o.jsxs(ri,{children:[o.jsx(Le,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e,sx:{mr:2,display:{lg:"none"}},children:o.jsx(Bi,{})}),o.jsx(Qi,{sx:{display:{xs:"none",md:"flex"},mr:1,color:"primary.main"}}),o.jsx(O,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,display:"flex",alignItems:"center",fontWeight:"bold"},children:"Electricity App"}),o.jsx(H,{sx:{mr:2,display:{xs:"none",md:"block"}},children:o.jsx(nl,{})}),o.jsxs(H,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsx(Le,{color:"inherit",children:o.jsx(Yi,{})}),o.jsx(Le,{sx:{p:0},children:o.jsx(Ho,{alt:"User",src:"/static/images/avatar/2.jpg",sx:{bgcolor:"secondary.main"},children:"DB"})})]})]})});var nr={},Ha;function ol(){if(Ha)return nr;Ha=1;var e=ye();Object.defineProperty(nr,"__esModule",{value:!0}),nr.default=void 0;var r=e(be()),t=we();return nr.default=(0,r.default)((0,t.jsx)("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard"),nr}var sl=ol();const il=pe(sl);var ar={},za;function ll(){if(za)return ar;za=1;var e=ye();Object.defineProperty(ar,"__esModule",{value:!0}),ar.default=void 0;var r=e(be()),t=we();return ar.default=(0,r.default)((0,t.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart"),ar}var cl=ll();const ul=pe(cl);var or={},Ya;function dl(){if(Ya)return or;Ya=1;var e=ye();Object.defineProperty(or,"__esModule",{value:!0}),or.default=void 0;var r=e(be()),t=we();return or.default=(0,r.default)((0,t.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),or}var hl=dl();const fl=pe(hl);var sr={},Ua;function ml(){if(Ua)return sr;Ua=1;var e=ye();Object.defineProperty(sr,"__esModule",{value:!0}),sr.default=void 0;var r=e(be()),t=we();return sr.default=(0,r.default)((0,t.jsx)("path",{d:"m14 12-2 2-2-2 2-2zm-2-6 2.12 2.12 2.5-2.5L12 1 7.38 5.62l2.5 2.5zm-6 6 2.12-2.12-2.5-2.5L1 12l4.62 4.62 2.5-2.5zm12 0-2.12 2.12 2.5 2.5L23 12l-4.62-4.62-2.5 2.5zm-6 6-2.12-2.12-2.5 2.5L12 23l4.62-4.62-2.5-2.5z"}),"Api"),sr}var pl=ml();const gl=pe(pl);var ir={},qa;function vl(){if(qa)return ir;qa=1;var e=ye();Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var r=e(be()),t=we();return ir.default=(0,r.default)((0,t.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"}),"Cloud"),ir}var xl=vl();const fn=pe(xl);var lr={},Qa;function yl(){if(Qa)return lr;Qa=1;var e=ye();Object.defineProperty(lr,"__esModule",{value:!0}),lr.default=void 0;var r=e(be()),t=we();return lr.default=(0,r.default)((0,t.jsx)("path",{d:"M9.01 14H2v2h7.01v3L13 15l-3.99-4zm5.98-1v-3H22V8h-7.01V5L11 9z"}),"CompareArrows"),lr}var wl=yl();const Xo=pe(wl);var cr={},Ga;function bl(){if(Ga)return cr;Ga=1;var e=ye();Object.defineProperty(cr,"__esModule",{value:!0}),cr.default=void 0;var r=e(be()),t=we();return cr.default=(0,r.default)((0,t.jsx)("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNote"),cr}var Dl=bl();const Qr=pe(Dl);var ur={},Ka;function Pl(){if(Ka)return ur;Ka=1;var e=ye();Object.defineProperty(ur,"__esModule",{value:!0}),ur.default=void 0;var r=e(be()),t=we();return ur.default=(0,r.default)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle"),ur}var jl=Pl();const Cl=pe(jl);var dr={},Xa;function Sl(){if(Xa)return dr;Xa=1;var e=ye();Object.defineProperty(dr,"__esModule",{value:!0}),dr.default=void 0;var r=e(be()),t=we();return dr.default=(0,r.default)((0,t.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),dr}var Ml=Sl();const Tl=pe(Ml),kl=[{href:"/",icon:o.jsx(il,{fontSize:"small"}),title:"Dashboard"},{href:"/analysis",icon:o.jsx(ul,{fontSize:"small"}),title:"Analysis"},{href:"/weather",icon:o.jsx(fn,{fontSize:"small"}),title:"Weather"},{href:"/compare",icon:o.jsx(Xo,{fontSize:"small"}),title:"Compare"},{href:"/annotate",icon:o.jsx(Qr,{fontSize:"small"}),title:"Annotate"},{href:"/api-demo",icon:o.jsx(gl,{fontSize:"small"}),title:"API Demo"},{href:"/profile",icon:o.jsx(Cl,{fontSize:"small"}),title:"Profile"},{href:"/settings",icon:o.jsx(fl,{fontSize:"small"}),title:"Settings"}],Il=({open:e,onClose:r})=>{const t=mt(),a=bn(t.breakpoints.up("lg")),n=da(),{logout:s}=Et(),i=o.jsxs(H,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[o.jsx(H,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"center"}}),o.jsx(H,{sx:{flexGrow:1},children:o.jsx(Nt,{children:kl.map(l=>{const u=n.pathname===l.href;return o.jsx(ct,{disablePadding:!0,sx:{display:"block",mb:.5},children:o.jsxs(ka,{component:ha,to:l.href,selected:u,onClick:a?void 0:r,sx:{minHeight:48,justifyContent:e?"initial":"center",px:2.5,borderRadius:1,mx:1,"&.Mui-selected":{backgroundColor:"rgba(0, 229, 255, 0.12)",color:"primary.main","&:hover":{backgroundColor:"rgba(0, 229, 255, 0.20)"},"& .MuiListItemIcon-root":{color:"primary.main"}},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},children:[o.jsx(na,{sx:{minWidth:0,mr:3,justifyContent:"center",color:u?"primary.main":"text.secondary"},children:l.icon}),o.jsx(ut,{primary:l.title,primaryTypographyProps:{fontWeight:u?600:400,fontSize:"0.95rem"}})]})},l.title)})})}),o.jsx(H,{sx:{p:2,borderTop:"1px solid rgba(255, 255, 255, 0.08)"},children:o.jsxs(ka,{onClick:s,sx:{borderRadius:1,color:"error.main","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08)"}},children:[o.jsx(na,{sx:{color:"error.main",minWidth:0,mr:3},children:o.jsx(Tl,{fontSize:"small"})}),o.jsx(ut,{primary:"Logout",primaryTypographyProps:{fontWeight:500,fontSize:"0.95rem"}})]})})]});return a?o.jsx(Ia,{anchor:"left",open:!0,variant:"permanent",PaperProps:{sx:{backgroundColor:"background.paper",width:280,top:64,height:"calc(100% - 64px)",borderRight:"1px solid rgba(255, 255, 255, 0.08)"}},children:i}):o.jsx(Ia,{anchor:"left",onClose:r,open:e,PaperProps:{sx:{backgroundColor:"background.paper",width:280}},sx:{zIndex:l=>l.zIndex.appBar+100},variant:"temporary",children:i})},El=({children:e})=>{const[r,t]=f.useState(!1);return o.jsxs(H,{sx:{display:"flex",minHeight:"100vh",overflow:"hidden"},children:[o.jsx(al,{onSidebarOpen:()=>t(!0)}),o.jsx(Il,{onClose:()=>t(!1),open:r}),o.jsx(H,{component:"main",sx:{flexGrow:1,p:3,pt:{xs:10,lg:12},pl:{lg:"280px"},width:"100%",backgroundColor:"background.default",minHeight:"100vh"},children:o.jsx(Dn,{maxWidth:"lg",children:e||o.jsx(Ii,{})})})]})};var hr={},Za;function Ol(){if(Za)return hr;Za=1;var e=ye();Object.defineProperty(hr,"__esModule",{value:!0}),hr.default=void 0;var r=e(be()),t=we();return hr.default=(0,r.default)((0,t.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),hr}var Rl=Ol();const ma=pe(Rl);var fr={},Ja;function _l(){if(Ja)return fr;Ja=1;var e=ye();Object.defineProperty(fr,"__esModule",{value:!0}),fr.default=void 0;var r=e(be()),t=we();return fr.default=(0,r.default)((0,t.jsx)("path",{d:"M14.69 2.21 4.33 11.49c-.64.58-.28 1.65.58 1.73L13 14l-4.85 6.76c-.22.31-.19.74.08 1.01.3.3.77.31 1.08.02l10.36-9.28c.64-.58.28-1.65-.58-1.73L11 10l4.85-6.76c.22-.31.19-.74-.08-1.01-.3-.3-.77-.31-1.08-.02"}),"ElectricBolt"),fr}var Al=_l();const pa=pe(Al);var mr={},eo;function Fl(){if(eo)return mr;eo=1;var e=ye();Object.defineProperty(mr,"__esModule",{value:!0}),mr.default=void 0;var r=e(be()),t=we();return mr.default=(0,r.default)((0,t.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),mr}var Nl=Fl();const Vl=pe(Nl);var pr={},to;function Ll(){if(to)return pr;to=1;var e=ye();Object.defineProperty(pr,"__esModule",{value:!0}),pr.default=void 0;var r=e(be()),t=we();return pr.default=(0,r.default)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),pr}var Wl=Ll();const Zo=pe(Wl);var gr={},ro;function $l(){if(ro)return gr;ro=1;var e=ye();Object.defineProperty(gr,"__esModule",{value:!0}),gr.default=void 0;var r=e(be()),t=we();return gr.default=(0,r.default)((0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),gr}var Bl=$l();const Hl=pe(Bl);var vr={},no;function zl(){if(no)return vr;no=1;var e=ye();Object.defineProperty(vr,"__esModule",{value:!0}),vr.default=void 0;var r=e(be()),t=we();return vr.default=(0,r.default)((0,t.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),vr}var Yl=zl();const Ul=pe(Yl);var xr={},ao;function ql(){if(ao)return xr;ao=1;var e=ye();Object.defineProperty(xr,"__esModule",{value:!0}),xr.default=void 0;var r=e(be()),t=we();return xr.default=(0,r.default)((0,t.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage"),xr}var Ql=ql();const Gl=pe(Ql);var yr={},oo;function Kl(){if(oo)return yr;oo=1;var e=ye();Object.defineProperty(yr,"__esModule",{value:!0}),yr.default=void 0;var r=e(be()),t=we();return yr.default=(0,r.default)((0,t.jsx)("path",{d:"M21.5 14.98c-.02 0-.03 0-.05.01C21.2 13.3 19.76 12 18 12c-1.4 0-2.6.83-3.16 2.02C13.26 14.1 12 15.4 12 17c0 1.66 1.34 3 3 3l6.5-.02c1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5M10 4.26v2.09C7.67 7.18 6 9.39 6 12c0 1.77.78 3.34 2 4.44V14h2v6H4v-2h2.73C5.06 16.54 4 14.4 4 12c0-3.73 2.55-6.85 6-7.74M20 6h-2.73c1.43 1.26 2.41 3.01 2.66 5h-2.02c-.23-1.36-.93-2.55-1.91-3.44V10h-2V4h6z"}),"CloudSync"),yr}var Xl=Kl();const Zl=pe(Xl),Gn=({title:e,status:r,subtitle:t,icon:a,loading:n})=>{const s=()=>{if(n)return"#9e9e9e";switch(r?.toLowerCase()){case"up":case"ok":case"success":return"#4caf50";case"degraded":case"warning":case"partial":return"#ff9800";case"down":case"error":case"failed":return"#f44336";default:return"#9e9e9e"}},i=()=>{if(n)return o.jsx(tt,{size:20,color:"inherit"});switch(r?.toLowerCase()){case"up":case"ok":case"success":return o.jsx(Zo,{});case"degraded":case"warning":case"partial":return o.jsx(Ul,{});case"down":case"error":case"failed":return o.jsx(Hl,{});default:return null}},l=s();return o.jsxs(Ee,{sx:{height:"100%",position:"relative",overflow:"hidden"},children:[o.jsx(H,{sx:{position:"absolute",top:0,left:0,width:"4px",height:"100%",bgcolor:l}}),o.jsxs(Oe,{children:[o.jsxs(H,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[o.jsx(H,{sx:{p:1,borderRadius:2,bgcolor:`${l}15`,color:l,display:"flex"},children:a}),o.jsx(H,{sx:{color:l,display:"flex"},children:i()})]}),o.jsx(O,{variant:"h5",component:"div",sx:{fontWeight:"bold",mb:.5},children:n?"---":r?.toUpperCase()||"UNKNOWN"}),o.jsx(O,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:"bold"},children:e}),o.jsx(O,{variant:"body2",sx:{color:"text.secondary",mt:1,minHeight:"3em"},children:n?"Fetching status...":t})]})]})},Jl=()=>{const e=Kr(),[r,t]=f.useState(null),[a,n]=f.useState(!0);f.useEffect(()=>{const l=async()=>{try{const d=await(await fetch("/api/health")).json();t(d)}catch(c){console.error("Failed to fetch health:",c)}finally{n(!1)}};l();const u=setInterval(l,3e4);return()=>clearInterval(u)},[]);const s=()=>{if(!r?.sync)return"No sync data available";if(!r.sync.lastRun)return"Never synced";const l=new Date(r.sync.lastRun),c=Math.abs(new Date-l)/36e5;let d=l.toLocaleString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"});return c>48?`Last sync was ${d} (Outdated)`:c>24?`Last sync was ${d} (Delayed)`:`Last sync: ${d} (${r.sync.recordsSynced||0} records)`},i=()=>{if(!r?.sync?.lastRun)return"warning";if(r.sync.lastStatus==="error")return"error";const l=new Date(r.sync.lastRun),c=Math.abs(new Date-l)/36e5;return c>48?"error":c>24?"warning":"success"};return o.jsxs(H,{children:[o.jsxs(H,{sx:{mb:4},children:[o.jsx(O,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Dashboard"}),o.jsx(O,{variant:"body1",color:"text.secondary",children:"System health and performance overview."})]}),o.jsxs(ee,{container:!0,spacing:3,sx:{mb:4},children:[o.jsx(ee,{item:!0,xs:12,sm:6,md:4,children:o.jsx(Gn,{title:"API BACKEND",status:r?.components?.api?.status||(a?null:"error"),subtitle:r?.environment?`Environment: ${r.environment}`:"Service unreachable",icon:o.jsx(pa,{}),loading:a})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:4,children:o.jsx(Gn,{title:"DATABASE",status:r?.components?.database?.status||(a?null:"error"),subtitle:r?.components?.database?.status==="up"?"PostgreSQL Connection Active":"Database Connection Failed",icon:o.jsx(Gl,{}),loading:a})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:4,children:o.jsx(Gn,{title:"DATA SYNC",status:i(),subtitle:s(),icon:o.jsx(Zl,{}),loading:a})})]}),o.jsx(Ee,{sx:{p:3,backgroundImage:"linear-gradient(45deg, #132F4C 30%, #0A1929 90%)",borderRadius:3},children:o.jsxs(ee,{container:!0,spacing:3,alignItems:"center",children:[o.jsxs(ee,{item:!0,xs:12,md:8,children:[o.jsx(O,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.light"},children:"Deep Dive Analysis"}),o.jsx(O,{variant:"body1",sx:{color:"rgba(255,255,255,0.7)",mb:3},children:"Explore your historical consumption data with detailed charts and filtering options. Identify trends and optimize your usage across all your properties."}),o.jsx(Me,{variant:"contained",size:"large",endIcon:o.jsx(Vl,{}),onClick:()=>e("/analysis"),sx:{borderRadius:2,px:4},children:"Go to Analysis"})]}),o.jsx(ee,{item:!0,xs:12,md:4,sx:{display:"flex",justifyContent:"center"},children:o.jsx(ma,{sx:{fontSize:140,color:"primary.main",opacity:.2}})})]})})]})};var ec=_i();const Lt=pe(ec),tc=["localeText"],aa=f.createContext(null),qt=function(r){var t;const{localeText:a}=r,n=Se(r,tc),{utils:s,localeText:i}=(t=f.useContext(aa))!=null?t:{utils:void 0,localeText:void 0},l=He({props:n,name:"MuiLocalizationProvider"}),{children:u,dateAdapter:c,dateFormats:d,dateLibInstance:m,adapterLocale:g,localeText:h}=l,v=f.useMemo(()=>T({},h,i,a),[h,i,a]),y=f.useMemo(()=>{if(!c)return s||null;const w=new c({locale:g,formats:d,instance:m});if(!w.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return w},[c,g,d,m,s]),b=f.useMemo(()=>y?{minDate:y.date("1900-01-01T00:00:00.000"),maxDate:y.date("2099-12-31T00:00:00.000")}:null,[y]),P=f.useMemo(()=>({utils:y,defaultDates:b,localeText:v}),[b,y,v]);return o.jsx(aa.Provider,{value:P,children:u})};function Pe(e){if(e===null||e===!0||e===!1)return NaN;var r=Number(e);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function q(e,r){if(r.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+r.length+" present")}function Q(e){q(1,arguments);var r=Object.prototype.toString.call(e);return e instanceof Date||Pn(e)==="object"&&r==="[object Date]"?new Date(e.getTime()):typeof e=="number"||r==="[object Number]"?new Date(e):((typeof e=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function un(e,r){q(2,arguments);var t=Q(e),a=Pe(r);return isNaN(a)?new Date(NaN):(a&&t.setDate(t.getDate()+a),t)}function Cn(e,r){q(2,arguments);var t=Q(e).getTime(),a=Pe(r);return new Date(t+a)}function rc(e,r){q(2,arguments);var t=Pe(r);return Cn(e,t*1e3)}var nc=6e4;function ac(e,r){q(2,arguments);var t=Pe(r);return Cn(e,t*nc)}var oc=36e5;function sc(e,r){q(2,arguments);var t=Pe(r);return Cn(e,t*oc)}function ic(e,r){q(2,arguments);var t=Pe(r),a=t*7;return un(e,a)}function dn(e,r){q(2,arguments);var t=Q(e),a=Pe(r);if(isNaN(a))return new Date(NaN);if(!a)return t;var n=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+a+1,0);var i=s.getDate();return n>=i?s:(t.setFullYear(s.getFullYear(),s.getMonth(),n),t)}function so(e,r){q(2,arguments);var t=Pe(r);return dn(e,t*12)}function lc(e,r){q(2,arguments);var t=Q(e),a=Q(r);return t.getFullYear()-a.getFullYear()}function $r(e,r){q(2,arguments);var t=Q(e),a=Q(r),n=t.getTime()-a.getTime();return n<0?-1:n>0?1:n}function cc(e,r){q(2,arguments);var t=Q(e),a=Q(r),n=$r(t,a),s=Math.abs(lc(t,a));t.setFullYear(1584),a.setFullYear(1584);var i=$r(t,a)===-n,l=n*(s-Number(i));return l===0?0:l}function uc(e,r){q(2,arguments);var t=Q(e),a=Q(r),n=t.getFullYear()-a.getFullYear(),s=t.getMonth()-a.getMonth();return n*12+s}function oa(e){q(1,arguments);var r=Q(e);return r.setHours(23,59,59,999),r}function sa(e){q(1,arguments);var r=Q(e),t=r.getMonth();return r.setFullYear(r.getFullYear(),t+1,0),r.setHours(23,59,59,999),r}function dc(e){q(1,arguments);var r=Q(e);return oa(r).getTime()===sa(r).getTime()}function Jo(e,r){q(2,arguments);var t=Q(e),a=Q(r),n=$r(t,a),s=Math.abs(uc(t,a)),i;if(s<1)i=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-n*s);var l=$r(t,a)===-n;dc(Q(e))&&s===1&&$r(e,a)===1&&(l=!1),i=n*(s-Number(l))}return i===0?0:i}var io={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(r){return r<0?Math.ceil(r):Math.floor(r)}},hc="trunc";function Zr(e){return e?io[e]:io[hc]}function fc(e,r,t){q(2,arguments);var a=Jo(e,r)/3;return Zr(void 0)(a)}function mn(e){var r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),e.getTime()-r.getTime()}function zt(e){q(1,arguments);var r=Q(e);return r.setHours(0,0,0,0),r}var mc=864e5;function pc(e,r){q(2,arguments);var t=zt(e),a=zt(r),n=t.getTime()-mn(t),s=a.getTime()-mn(a);return Math.round((n-s)/mc)}function lo(e,r){var t=e.getFullYear()-r.getFullYear()||e.getMonth()-r.getMonth()||e.getDate()-r.getDate()||e.getHours()-r.getHours()||e.getMinutes()-r.getMinutes()||e.getSeconds()-r.getSeconds()||e.getMilliseconds()-r.getMilliseconds();return t<0?-1:t>0?1:t}function es(e,r){q(2,arguments);var t=Q(e),a=Q(r),n=lo(t,a),s=Math.abs(pc(t,a));t.setDate(t.getDate()-n*s);var i=+(lo(t,a)===-n),l=n*(s-i);return l===0?0:l}function gc(e,r,t){q(2,arguments);var a=es(e,r)/7;return Zr(void 0)(a)}var Sn=6e4,Mn=36e5,vc=1e3;function Tn(e,r){return q(2,arguments),Q(e).getTime()-Q(r).getTime()}function xc(e,r,t){q(2,arguments);var a=Tn(e,r)/Mn;return Zr(void 0)(a)}function yc(e,r,t){q(2,arguments);var a=Tn(e,r)/Sn;return Zr(void 0)(a)}function wc(e,r,t){q(2,arguments);var a=Tn(e,r)/1e3;return Zr(void 0)(a)}function bc(e,r){var t;q(1,arguments);var a=e||{},n=Q(a.start),s=Q(a.end),i=s.getTime();if(!(n.getTime()<=i))throw new RangeError("Invalid interval");var l=[],u=n;u.setHours(0,0,0,0);var c=Number((t=void 0)!==null&&t!==void 0?t:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=i;)l.push(Q(u)),u.setDate(u.getDate()+c),u.setHours(0,0,0,0);return l}var Dc={};function pt(){return Dc}function Kn(e,r){var t,a,n,s,i,l,u,c;q(1,arguments);var d=pt(),m=Pe((t=(a=(n=(s=r?.weekStartsOn)!==null&&s!==void 0?s:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:d.weekStartsOn)!==null&&a!==void 0?a:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=Q(e),h=g.getDay(),v=(h<m?-7:0)+6-(h-m);return g.setDate(g.getDate()+v),g.setHours(23,59,59,999),g}function Xn(e){q(1,arguments);var r=Q(e),t=r.getFullYear();return r.setFullYear(t+1,0,0),r.setHours(23,59,59,999),r}function Pc(e){return q(1,arguments),e instanceof Date||Pn(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ts(e){if(q(1,arguments),!Pc(e)&&typeof e!="number")return!1;var r=Q(e);return!isNaN(Number(r))}function rs(e,r){q(2,arguments);var t=Pe(r);return Cn(e,-t)}var jc=864e5;function Cc(e){q(1,arguments);var r=Q(e),t=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var a=r.getTime(),n=t-a;return Math.floor(n/jc)+1}function Yt(e){q(1,arguments);var r=1,t=Q(e),a=t.getUTCDay(),n=(a<r?7:0)+a-r;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function ns(e){q(1,arguments);var r=Q(e),t=r.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(t+1,0,4),a.setUTCHours(0,0,0,0);var n=Yt(a),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var i=Yt(s);return r.getTime()>=n.getTime()?t+1:r.getTime()>=i.getTime()?t:t-1}function Sc(e){q(1,arguments);var r=ns(e),t=new Date(0);t.setUTCFullYear(r,0,4),t.setUTCHours(0,0,0,0);var a=Yt(t);return a}var Mc=6048e5;function as(e){q(1,arguments);var r=Q(e),t=Yt(r).getTime()-Sc(r).getTime();return Math.round(t/Mc)+1}function It(e,r){var t,a,n,s,i,l,u,c;q(1,arguments);var d=pt(),m=Pe((t=(a=(n=(s=r?.weekStartsOn)!==null&&s!==void 0?s:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:d.weekStartsOn)!==null&&a!==void 0?a:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=Q(e),h=g.getUTCDay(),v=(h<m?7:0)+h-m;return g.setUTCDate(g.getUTCDate()-v),g.setUTCHours(0,0,0,0),g}function ga(e,r){var t,a,n,s,i,l,u,c;q(1,arguments);var d=Q(e),m=d.getUTCFullYear(),g=pt(),h=Pe((t=(a=(n=(s=r?.firstWeekContainsDate)!==null&&s!==void 0?s:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:g.firstWeekContainsDate)!==null&&a!==void 0?a:(u=g.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(m+1,0,h),v.setUTCHours(0,0,0,0);var y=It(v,r),b=new Date(0);b.setUTCFullYear(m,0,h),b.setUTCHours(0,0,0,0);var P=It(b,r);return d.getTime()>=y.getTime()?m+1:d.getTime()>=P.getTime()?m:m-1}function Tc(e,r){var t,a,n,s,i,l,u,c;q(1,arguments);var d=pt(),m=Pe((t=(a=(n=(s=r?.firstWeekContainsDate)!==null&&s!==void 0?s:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:d.firstWeekContainsDate)!==null&&a!==void 0?a:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&t!==void 0?t:1),g=ga(e,r),h=new Date(0);h.setUTCFullYear(g,0,m),h.setUTCHours(0,0,0,0);var v=It(h,r);return v}var kc=6048e5;function os(e,r){q(1,arguments);var t=Q(e),a=It(t,r).getTime()-Tc(t,r).getTime();return Math.round(a/kc)+1}function me(e,r){for(var t=e<0?"-":"",a=Math.abs(e).toString();a.length<r;)a="0"+a;return t+a}var bt={y:function(r,t){var a=r.getUTCFullYear(),n=a>0?a:1-a;return me(t==="yy"?n%100:n,t.length)},M:function(r,t){var a=r.getUTCMonth();return t==="M"?String(a+1):me(a+1,2)},d:function(r,t){return me(r.getUTCDate(),t.length)},a:function(r,t){var a=r.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return a==="am"?"a.m.":"p.m."}},h:function(r,t){return me(r.getUTCHours()%12||12,t.length)},H:function(r,t){return me(r.getUTCHours(),t.length)},m:function(r,t){return me(r.getUTCMinutes(),t.length)},s:function(r,t){return me(r.getUTCSeconds(),t.length)},S:function(r,t){var a=t.length,n=r.getUTCMilliseconds(),s=Math.floor(n*Math.pow(10,a-3));return me(s,t.length)}},_t={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ic={G:function(r,t,a){var n=r.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(r,t,a){if(t==="yo"){var n=r.getUTCFullYear(),s=n>0?n:1-n;return a.ordinalNumber(s,{unit:"year"})}return bt.y(r,t)},Y:function(r,t,a,n){var s=ga(r,n),i=s>0?s:1-s;if(t==="YY"){var l=i%100;return me(l,2)}return t==="Yo"?a.ordinalNumber(i,{unit:"year"}):me(i,t.length)},R:function(r,t){var a=ns(r);return me(a,t.length)},u:function(r,t){var a=r.getUTCFullYear();return me(a,t.length)},Q:function(r,t,a){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return me(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,t,a){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return me(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,t,a){var n=r.getUTCMonth();switch(t){case"M":case"MM":return bt.M(r,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(r,t,a){var n=r.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return me(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(r,t,a,n){var s=os(r,n);return t==="wo"?a.ordinalNumber(s,{unit:"week"}):me(s,t.length)},I:function(r,t,a){var n=as(r);return t==="Io"?a.ordinalNumber(n,{unit:"week"}):me(n,t.length)},d:function(r,t,a){return t==="do"?a.ordinalNumber(r.getUTCDate(),{unit:"date"}):bt.d(r,t)},D:function(r,t,a){var n=Cc(r);return t==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):me(n,t.length)},E:function(r,t,a){var n=r.getUTCDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(r,t,a,n){var s=r.getUTCDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return me(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(s,{width:"short",context:"formatting"});default:return a.day(s,{width:"wide",context:"formatting"})}},c:function(r,t,a,n){var s=r.getUTCDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return me(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(s,{width:"narrow",context:"standalone"});case"cccccc":return a.day(s,{width:"short",context:"standalone"});default:return a.day(s,{width:"wide",context:"standalone"})}},i:function(r,t,a){var n=r.getUTCDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return me(s,t.length);case"io":return a.ordinalNumber(s,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(r,t,a){var n=r.getUTCHours(),s=n/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(s,{width:"narrow",context:"formatting"});default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,t,a){var n=r.getUTCHours(),s;switch(n===12?s=_t.noon:n===0?s=_t.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(s,{width:"narrow",context:"formatting"});default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,t,a){var n=r.getUTCHours(),s;switch(n>=17?s=_t.evening:n>=12?s=_t.afternoon:n>=4?s=_t.morning:s=_t.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(s,{width:"narrow",context:"formatting"});default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,t,a){if(t==="ho"){var n=r.getUTCHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return bt.h(r,t)},H:function(r,t,a){return t==="Ho"?a.ordinalNumber(r.getUTCHours(),{unit:"hour"}):bt.H(r,t)},K:function(r,t,a){var n=r.getUTCHours()%12;return t==="Ko"?a.ordinalNumber(n,{unit:"hour"}):me(n,t.length)},k:function(r,t,a){var n=r.getUTCHours();return n===0&&(n=24),t==="ko"?a.ordinalNumber(n,{unit:"hour"}):me(n,t.length)},m:function(r,t,a){return t==="mo"?a.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):bt.m(r,t)},s:function(r,t,a){return t==="so"?a.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):bt.s(r,t)},S:function(r,t){return bt.S(r,t)},X:function(r,t,a,n){var s=n._originalDate||r,i=s.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return uo(i);case"XXXX":case"XX":return St(i);default:return St(i,":")}},x:function(r,t,a,n){var s=n._originalDate||r,i=s.getTimezoneOffset();switch(t){case"x":return uo(i);case"xxxx":case"xx":return St(i);default:return St(i,":")}},O:function(r,t,a,n){var s=n._originalDate||r,i=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+co(i,":");default:return"GMT"+St(i,":")}},z:function(r,t,a,n){var s=n._originalDate||r,i=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+co(i,":");default:return"GMT"+St(i,":")}},t:function(r,t,a,n){var s=n._originalDate||r,i=Math.floor(s.getTime()/1e3);return me(i,t.length)},T:function(r,t,a,n){var s=n._originalDate||r,i=s.getTime();return me(i,t.length)}};function co(e,r){var t=e>0?"-":"+",a=Math.abs(e),n=Math.floor(a/60),s=a%60;if(s===0)return t+String(n);var i=r;return t+String(n)+i+me(s,2)}function uo(e,r){if(e%60===0){var t=e>0?"-":"+";return t+me(Math.abs(e)/60,2)}return St(e,r)}function St(e,r){var t=r||"",a=e>0?"-":"+",n=Math.abs(e),s=me(Math.floor(n/60),2),i=me(n%60,2);return a+s+t+i}var ho=function(r,t){switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ss=function(r,t){switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Ec=function(r,t){var a=r.match(/(P+)(p+)?/)||[],n=a[1],s=a[2];if(!s)return ho(r,t);var i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",ho(n,t)).replace("{{time}}",ss(s,t))},ia={p:ss,P:Ec},Oc=["D","DD"],Rc=["YY","YYYY"];function is(e){return Oc.indexOf(e)!==-1}function ls(e){return Rc.indexOf(e)!==-1}function pn(e,r,t){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var _c={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ac=function(r,t,a){var n,s=_c[r];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function Zn(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=r.width?String(r.width):e.defaultWidth,a=e.formats[t]||e.formats[e.defaultWidth];return a}}var Fc={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nc={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vc={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lc={date:Zn({formats:Fc,defaultWidth:"full"}),time:Zn({formats:Nc,defaultWidth:"full"}),dateTime:Zn({formats:Vc,defaultWidth:"full"})},Wc={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$c=function(r,t,a,n){return Wc[r]};function wr(e){return function(r,t){var a=t!=null&&t.context?String(t.context):"standalone",n;if(a==="formatting"&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,i=t!=null&&t.width?String(t.width):s;n=e.formattingValues[i]||e.formattingValues[s]}else{var l=e.defaultWidth,u=t!=null&&t.width?String(t.width):e.defaultWidth;n=e.values[u]||e.values[l]}var c=e.argumentCallback?e.argumentCallback(r):r;return n[c]}}var Bc={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Hc={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zc={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yc={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Uc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qc=function(r,t){var a=Number(r),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Gc={ordinalNumber:Qc,era:wr({values:Bc,defaultWidth:"wide"}),quarter:wr({values:Hc,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:wr({values:zc,defaultWidth:"wide"}),day:wr({values:Yc,defaultWidth:"wide"}),dayPeriod:wr({values:Uc,defaultWidth:"wide",formattingValues:qc,defaultFormattingWidth:"wide"})};function br(e){return function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=r.match(n);if(!s)return null;var i=s[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Xc(l,function(m){return m.test(i)}):Kc(l,function(m){return m.test(i)}),c;c=e.valueCallback?e.valueCallback(u):u,c=t.valueCallback?t.valueCallback(c):c;var d=r.slice(i.length);return{value:c,rest:d}}}function Kc(e,r){for(var t in e)if(e.hasOwnProperty(t)&&r(e[t]))return t}function Xc(e,r){for(var t=0;t<e.length;t++)if(r(e[t]))return t}function Zc(e){return function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.match(e.matchPattern);if(!a)return null;var n=a[0],s=r.match(e.parsePattern);if(!s)return null;var i=e.valueCallback?e.valueCallback(s[0]):s[0];i=t.valueCallback?t.valueCallback(i):i;var l=r.slice(n.length);return{value:i,rest:l}}}var Jc=/^(\d+)(th|st|nd|rd)?/i,eu=/\d+/i,tu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ru={any:[/^b/i,/^(a|c)/i]},nu={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},au={any:[/1/i,/2/i,/3/i,/4/i]},ou={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},su={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iu={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cu={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},du={ordinalNumber:Zc({matchPattern:Jc,parsePattern:eu,valueCallback:function(r){return parseInt(r,10)}}),era:br({matchPatterns:tu,defaultMatchWidth:"wide",parsePatterns:ru,defaultParseWidth:"any"}),quarter:br({matchPatterns:nu,defaultMatchWidth:"wide",parsePatterns:au,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:br({matchPatterns:ou,defaultMatchWidth:"wide",parsePatterns:su,defaultParseWidth:"any"}),day:br({matchPatterns:iu,defaultMatchWidth:"wide",parsePatterns:lu,defaultParseWidth:"any"}),dayPeriod:br({matchPatterns:cu,defaultMatchWidth:"any",parsePatterns:uu,defaultParseWidth:"any"})},va={code:"en-US",formatDistance:Ac,formatLong:Lc,formatRelative:$c,localize:Gc,match:du,options:{weekStartsOn:0,firstWeekContainsDate:1}},hu=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mu=/^'([^]*?)'?$/,pu=/''/g,gu=/[a-zA-Z]/;function vu(e,r,t){var a,n,s,i,l,u,c,d,m,g,h,v,y,b,P,w,p,M;q(2,arguments);var C=String(r),A=pt(),I=(a=(n=t?.locale)!==null&&n!==void 0?n:A.locale)!==null&&a!==void 0?a:va,R=Pe((s=(i=(l=(u=t?.firstWeekContainsDate)!==null&&u!==void 0?u:t==null||(c=t.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:A.firstWeekContainsDate)!==null&&i!==void 0?i:(m=A.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=Pe((h=(v=(y=(b=t?.weekStartsOn)!==null&&b!==void 0?b:t==null||(P=t.locale)===null||P===void 0||(w=P.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&y!==void 0?y:A.weekStartsOn)!==null&&v!==void 0?v:(p=A.locale)===null||p===void 0||(M=p.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&h!==void 0?h:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!I.localize)throw new RangeError("locale must contain localize property");if(!I.formatLong)throw new RangeError("locale must contain formatLong property");var N=Q(e);if(!ts(N))throw new RangeError("Invalid time value");var W=mn(N),k=rs(N,W),E={firstWeekContainsDate:R,weekStartsOn:D,locale:I,_originalDate:N},j=C.match(fu).map(function(x){var F=x[0];if(F==="p"||F==="P"){var $=ia[F];return $(x,I.formatLong)}return x}).join("").match(hu).map(function(x){if(x==="''")return"'";var F=x[0];if(F==="'")return xu(x);var $=Ic[F];if($)return!(t!=null&&t.useAdditionalWeekYearTokens)&&ls(x)&&pn(x,r,String(e)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&is(x)&&pn(x,r,String(e)),$(k,x,I.localize,E);if(F.match(gu))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return x}).join("");return j}function xu(e){var r=e.match(mu);return r?r[1].replace(pu,"'"):e}function yu(e){q(1,arguments);var r=Q(e),t=r.getDate();return t}function cs(e){q(1,arguments);var r=Q(e),t=r.getFullYear(),a=r.getMonth(),n=new Date(0);return n.setFullYear(t,a+1,0),n.setHours(0,0,0,0),n.getDate()}function wu(e){q(1,arguments);var r=Q(e),t=r.getHours();return t}function bu(e){q(1,arguments);var r=Q(e),t=r.getMinutes();return t}function Du(e){q(1,arguments);var r=Q(e),t=r.getMonth();return t}function Pu(e){q(1,arguments);var r=Q(e),t=r.getSeconds();return t}function ju(e){q(1,arguments);var r=Q(e),t=r.getMilliseconds();return t}function Mt(e,r){var t,a,n,s,i,l,u,c;q(1,arguments);var d=pt(),m=Pe((t=(a=(n=(s=r?.weekStartsOn)!==null&&s!==void 0?s:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:d.weekStartsOn)!==null&&a!==void 0?a:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=Q(e),h=g.getDay(),v=(h<m?7:0)+h-m;return g.setDate(g.getDate()-v),g.setHours(0,0,0,0),g}function Cu(e,r){var t,a,n,s,i,l,u,c;q(1,arguments);var d=Q(e),m=d.getFullYear(),g=pt(),h=Pe((t=(a=(n=(s=r?.firstWeekContainsDate)!==null&&s!==void 0?s:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:g.firstWeekContainsDate)!==null&&a!==void 0?a:(u=g.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setFullYear(m+1,0,h),v.setHours(0,0,0,0);var y=Mt(v,r),b=new Date(0);b.setFullYear(m,0,h),b.setHours(0,0,0,0);var P=Mt(b,r);return d.getTime()>=y.getTime()?m+1:d.getTime()>=P.getTime()?m:m-1}function Su(e,r){var t,a,n,s,i,l,u,c;q(1,arguments);var d=pt(),m=Pe((t=(a=(n=(s=r?.firstWeekContainsDate)!==null&&s!==void 0?s:r==null||(i=r.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:d.firstWeekContainsDate)!==null&&a!==void 0?a:(u=d.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&t!==void 0?t:1),g=Cu(e,r),h=new Date(0);h.setFullYear(g,0,m),h.setHours(0,0,0,0);var v=Mt(h,r);return v}var Mu=6048e5;function Tu(e,r){q(1,arguments);var t=Q(e),a=Mt(t,r).getTime()-Su(t,r).getTime();return Math.round(a/Mu)+1}function ku(e){return q(1,arguments),Q(e).getFullYear()}function Jn(e,r){q(2,arguments);var t=Q(e),a=Q(r);return t.getTime()>a.getTime()}function Dr(e,r){q(2,arguments);var t=Q(e),a=Q(r);return t.getTime()<a.getTime()}function Iu(e,r){q(2,arguments);var t=Q(e),a=Q(r);return t.getTime()===a.getTime()}function Eu(e,r){q(2,arguments);var t=zt(e),a=zt(r);return t.getTime()===a.getTime()}function Ou(e,r){q(2,arguments);var t=Q(e),a=Q(r);return t.getFullYear()===a.getFullYear()}function Ru(e,r){q(2,arguments);var t=Q(e),a=Q(r);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()}function fo(e){q(1,arguments);var r=Q(e);return r.setMinutes(0,0,0),r}function _u(e,r){q(2,arguments);var t=fo(e),a=fo(r);return t.getTime()===a.getTime()}function mo(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,a=Array(r);t<r;t++)a[t]=e[t];return a}function Au(e,r){if(e){if(typeof e=="string")return mo(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mo(e,r):void 0}}function po(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Au(e))||r){t&&(e=t);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(c){throw c},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,i=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var c=t.next();return i=c.done,c},e:function(c){l=!0,s=c},f:function(){try{i||t.return==null||t.return()}finally{if(l)throw s}}}}function Fu(e,r){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}function je(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&ni(e,r)}function gn(e){return gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gn(e)}function us(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(us=function(){return!!e})()}function Nu(e,r){if(r&&(Pn(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function Ce(e){var r=us();return function(){var t,a=gn(e);if(r){var n=gn(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return Nu(this,t)}}function ge(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Vu(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,zo(a.key),a)}}function ve(e,r,t){return r&&Vu(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z(e,r,t){return(r=zo(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Lu=10,ds=(function(){function e(){ge(this,e),Z(this,"priority",void 0),Z(this,"subPriority",0)}return ve(e,[{key:"validate",value:function(t,a){return!0}}]),e})(),Wu=(function(e){je(t,e);var r=Ce(t);function t(a,n,s,i,l){var u;return ge(this,t),u=r.call(this),u.value=a,u.validateValue=n,u.setValue=s,u.priority=i,l&&(u.subPriority=l),u}return ve(t,[{key:"validate",value:function(n,s){return this.validateValue(n,this.value,s)}},{key:"set",value:function(n,s,i){return this.setValue(n,s,this.value,i)}}]),t})(ds),$u=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",Lu),Z(J(a),"subPriority",-1),a}return ve(t,[{key:"set",value:function(n,s){if(s.timestampIsSet)return n;var i=new Date(0);return i.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),i.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),i}}]),t})(ds),Te=(function(){function e(){ge(this,e),Z(this,"incompatibleTokens",void 0),Z(this,"priority",void 0),Z(this,"subPriority",void 0)}return ve(e,[{key:"run",value:function(t,a,n,s){var i=this.parse(t,a,n,s);return i?{setter:new Wu(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(t,a,n){return!0}}]),e})(),Bu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",140),Z(J(a),"incompatibleTokens",["R","u","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}},{key:"set",value:function(n,s,i){return s.era=i,n.setUTCFullYear(i,0,1),n.setUTCHours(0,0,0,0),n}}]),t})(Te),We={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ht={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function $e(e,r){return e&&{value:r(e.value),rest:e.rest}}function Fe(e,r){var t=r.match(e);return t?{value:parseInt(t[0],10),rest:r.slice(t[0].length)}:null}function ft(e,r){var t=r.match(e);if(!t)return null;if(t[0]==="Z")return{value:0,rest:r.slice(1)};var a=t[1]==="+"?1:-1,n=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,i=t[5]?parseInt(t[5],10):0;return{value:a*(n*Mn+s*Sn+i*vc),rest:r.slice(t[0].length)}}function hs(e){return Fe(We.anyDigitsSigned,e)}function Ne(e,r){switch(e){case 1:return Fe(We.singleDigit,r);case 2:return Fe(We.twoDigits,r);case 3:return Fe(We.threeDigits,r);case 4:return Fe(We.fourDigits,r);default:return Fe(new RegExp("^\\d{1,"+e+"}"),r)}}function vn(e,r){switch(e){case 1:return Fe(We.singleDigitSigned,r);case 2:return Fe(We.twoDigitsSigned,r);case 3:return Fe(We.threeDigitsSigned,r);case 4:return Fe(We.fourDigitsSigned,r);default:return Fe(new RegExp("^-?\\d{1,"+e+"}"),r)}}function xa(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function fs(e,r){var t=r>0,a=t?r:1-r,n;if(a<=50)n=e||100;else{var s=a+50,i=Math.floor(s/100)*100,l=e>=s%100;n=e+i-(l?100:0)}return t?n:1-n}function ms(e){return e%400===0||e%4===0&&e%100!==0}var Hu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",130),Z(J(a),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){var l=function(c){return{year:c,isTwoDigitYear:s==="yy"}};switch(s){case"y":return $e(Ne(4,n),l);case"yo":return $e(i.ordinalNumber(n,{unit:"year"}),l);default:return $e(Ne(s.length,n),l)}}},{key:"validate",value:function(n,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(n,s,i){var l=n.getUTCFullYear();if(i.isTwoDigitYear){var u=fs(i.year,l);return n.setUTCFullYear(u,0,1),n.setUTCHours(0,0,0,0),n}var c=!("era"in s)||s.era===1?i.year:1-i.year;return n.setUTCFullYear(c,0,1),n.setUTCHours(0,0,0,0),n}}]),t})(Te),zu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",130),Z(J(a),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){var l=function(c){return{year:c,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return $e(Ne(4,n),l);case"Yo":return $e(i.ordinalNumber(n,{unit:"year"}),l);default:return $e(Ne(s.length,n),l)}}},{key:"validate",value:function(n,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(n,s,i,l){var u=ga(n,l);if(i.isTwoDigitYear){var c=fs(i.year,u);return n.setUTCFullYear(c,0,l.firstWeekContainsDate),n.setUTCHours(0,0,0,0),It(n,l)}var d=!("era"in s)||s.era===1?i.year:1-i.year;return n.setUTCFullYear(d,0,l.firstWeekContainsDate),n.setUTCHours(0,0,0,0),It(n,l)}}]),t})(Te),Yu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",130),Z(J(a),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s){return vn(s==="R"?4:s.length,n)}},{key:"set",value:function(n,s,i){var l=new Date(0);return l.setUTCFullYear(i,0,4),l.setUTCHours(0,0,0,0),Yt(l)}}]),t})(Te),Uu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",130),Z(J(a),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s){return vn(s==="u"?4:s.length,n)}},{key:"set",value:function(n,s,i){return n.setUTCFullYear(i,0,1),n.setUTCHours(0,0,0,0),n}}]),t})(Te),qu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",120),Z(J(a),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"Q":case"QQ":return Ne(s.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,s){return s>=1&&s<=4}},{key:"set",value:function(n,s,i){return n.setUTCMonth((i-1)*3,1),n.setUTCHours(0,0,0,0),n}}]),t})(Te),Qu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",120),Z(J(a),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"q":case"qq":return Ne(s.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,s){return s>=1&&s<=4}},{key:"set",value:function(n,s,i){return n.setUTCMonth((i-1)*3,1),n.setUTCHours(0,0,0,0),n}}]),t})(Te),Gu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Z(J(a),"priority",110),a}return ve(t,[{key:"parse",value:function(n,s,i){var l=function(c){return c-1};switch(s){case"M":return $e(Fe(We.month,n),l);case"MM":return $e(Ne(2,n),l);case"Mo":return $e(i.ordinalNumber(n,{unit:"month"}),l);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,s){return s>=0&&s<=11}},{key:"set",value:function(n,s,i){return n.setUTCMonth(i,1),n.setUTCHours(0,0,0,0),n}}]),t})(Te),Ku=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",110),Z(J(a),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){var l=function(c){return c-1};switch(s){case"L":return $e(Fe(We.month,n),l);case"LL":return $e(Ne(2,n),l);case"Lo":return $e(i.ordinalNumber(n,{unit:"month"}),l);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,s){return s>=0&&s<=11}},{key:"set",value:function(n,s,i){return n.setUTCMonth(i,1),n.setUTCHours(0,0,0,0),n}}]),t})(Te);function Xu(e,r,t){q(2,arguments);var a=Q(e),n=Pe(r),s=os(a,t)-n;return a.setUTCDate(a.getUTCDate()-s*7),a}var Zu=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",100),Z(J(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"w":return Fe(We.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){return s>=1&&s<=53}},{key:"set",value:function(n,s,i,l){return It(Xu(n,i,l),l)}}]),t})(Te);function Ju(e,r){q(2,arguments);var t=Q(e),a=Pe(r),n=as(t)-a;return t.setUTCDate(t.getUTCDate()-n*7),t}var ed=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",100),Z(J(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"I":return Fe(We.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){return s>=1&&s<=53}},{key:"set",value:function(n,s,i){return Yt(Ju(n,i))}}]),t})(Te),td=[31,28,31,30,31,30,31,31,30,31,30,31],rd=[31,29,31,30,31,30,31,31,30,31,30,31],nd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",90),Z(J(a),"subPriority",1),Z(J(a),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"d":return Fe(We.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){var i=n.getUTCFullYear(),l=ms(i),u=n.getUTCMonth();return l?s>=1&&s<=rd[u]:s>=1&&s<=td[u]}},{key:"set",value:function(n,s,i){return n.setUTCDate(i),n.setUTCHours(0,0,0,0),n}}]),t})(Te),ad=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",90),Z(J(a),"subpriority",1),Z(J(a),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"D":case"DD":return Fe(We.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){var i=n.getUTCFullYear(),l=ms(i);return l?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(n,s,i){return n.setUTCMonth(0,i),n.setUTCHours(0,0,0,0),n}}]),t})(Te);function ya(e,r,t){var a,n,s,i,l,u,c,d;q(2,arguments);var m=pt(),g=Pe((a=(n=(s=(i=t?.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:m.weekStartsOn)!==null&&n!==void 0?n:(c=m.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&a!==void 0?a:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Q(e),v=Pe(r),y=h.getUTCDay(),b=v%7,P=(b+7)%7,w=(P<g?7:0)+v-y;return h.setUTCDate(h.getUTCDate()+w),h}var od=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",90),Z(J(a),"incompatibleTokens",["D","i","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,s){return s>=0&&s<=6}},{key:"set",value:function(n,s,i,l){return n=ya(n,i,l),n.setUTCHours(0,0,0,0),n}}]),t})(Te),sd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",90),Z(J(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i,l){var u=function(d){var m=Math.floor((d-1)/7)*7;return(d+l.weekStartsOn+6)%7+m};switch(s){case"e":case"ee":return $e(Ne(s.length,n),u);case"eo":return $e(i.ordinalNumber(n,{unit:"day"}),u);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(n,s){return s>=0&&s<=6}},{key:"set",value:function(n,s,i,l){return n=ya(n,i,l),n.setUTCHours(0,0,0,0),n}}]),t})(Te),id=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",90),Z(J(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i,l){var u=function(d){var m=Math.floor((d-1)/7)*7;return(d+l.weekStartsOn+6)%7+m};switch(s){case"c":case"cc":return $e(Ne(s.length,n),u);case"co":return $e(i.ordinalNumber(n,{unit:"day"}),u);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(n,s){return s>=0&&s<=6}},{key:"set",value:function(n,s,i,l){return n=ya(n,i,l),n.setUTCHours(0,0,0,0),n}}]),t})(Te);function ld(e,r){q(2,arguments);var t=Pe(r);t%7===0&&(t=t-7);var a=1,n=Q(e),s=n.getUTCDay(),i=t%7,l=(i+7)%7,u=(l<a?7:0)+t-s;return n.setUTCDate(n.getUTCDate()+u),n}var cd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",90),Z(J(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){var l=function(c){return c===0?7:c};switch(s){case"i":case"ii":return Ne(s.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return $e(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),l);case"iiiii":return $e(i.day(n,{width:"narrow",context:"formatting"}),l);case"iiiiii":return $e(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),l);default:return $e(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(n,s){return s>=1&&s<=7}},{key:"set",value:function(n,s,i){return n=ld(n,i),n.setUTCHours(0,0,0,0),n}}]),t})(Te),ud=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",80),Z(J(a),"incompatibleTokens",["b","B","H","k","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,s,i){return n.setUTCHours(xa(i),0,0,0),n}}]),t})(Te),dd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",80),Z(J(a),"incompatibleTokens",["a","B","H","k","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,s,i){return n.setUTCHours(xa(i),0,0,0),n}}]),t})(Te),hd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",80),Z(J(a),"incompatibleTokens",["a","b","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(n,s,i){return n.setUTCHours(xa(i),0,0,0),n}}]),t})(Te),fd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",70),Z(J(a),"incompatibleTokens",["H","K","k","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"h":return Fe(We.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){return s>=1&&s<=12}},{key:"set",value:function(n,s,i){var l=n.getUTCHours()>=12;return l&&i<12?n.setUTCHours(i+12,0,0,0):!l&&i===12?n.setUTCHours(0,0,0,0):n.setUTCHours(i,0,0,0),n}}]),t})(Te),md=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",70),Z(J(a),"incompatibleTokens",["a","b","h","K","k","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"H":return Fe(We.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){return s>=0&&s<=23}},{key:"set",value:function(n,s,i){return n.setUTCHours(i,0,0,0),n}}]),t})(Te),pd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",70),Z(J(a),"incompatibleTokens",["h","H","k","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"K":return Fe(We.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){return s>=0&&s<=11}},{key:"set",value:function(n,s,i){var l=n.getUTCHours()>=12;return l&&i<12?n.setUTCHours(i+12,0,0,0):n.setUTCHours(i,0,0,0),n}}]),t})(Te),gd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",70),Z(J(a),"incompatibleTokens",["a","b","h","H","K","t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"k":return Fe(We.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){return s>=1&&s<=24}},{key:"set",value:function(n,s,i){var l=i<=24?i%24:i;return n.setUTCHours(l,0,0,0),n}}]),t})(Te),vd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",60),Z(J(a),"incompatibleTokens",["t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"m":return Fe(We.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){return s>=0&&s<=59}},{key:"set",value:function(n,s,i){return n.setUTCMinutes(i,0,0),n}}]),t})(Te),xd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",50),Z(J(a),"incompatibleTokens",["t","T"]),a}return ve(t,[{key:"parse",value:function(n,s,i){switch(s){case"s":return Fe(We.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Ne(s.length,n)}}},{key:"validate",value:function(n,s){return s>=0&&s<=59}},{key:"set",value:function(n,s,i){return n.setUTCSeconds(i,0),n}}]),t})(Te),yd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",30),Z(J(a),"incompatibleTokens",["t","T"]),a}return ve(t,[{key:"parse",value:function(n,s){var i=function(u){return Math.floor(u*Math.pow(10,-s.length+3))};return $e(Ne(s.length,n),i)}},{key:"set",value:function(n,s,i){return n.setUTCMilliseconds(i),n}}]),t})(Te),wd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",10),Z(J(a),"incompatibleTokens",["t","T","x"]),a}return ve(t,[{key:"parse",value:function(n,s){switch(s){case"X":return ft(ht.basicOptionalMinutes,n);case"XX":return ft(ht.basic,n);case"XXXX":return ft(ht.basicOptionalSeconds,n);case"XXXXX":return ft(ht.extendedOptionalSeconds,n);default:return ft(ht.extended,n)}}},{key:"set",value:function(n,s,i){return s.timestampIsSet?n:new Date(n.getTime()-i)}}]),t})(Te),bd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",10),Z(J(a),"incompatibleTokens",["t","T","X"]),a}return ve(t,[{key:"parse",value:function(n,s){switch(s){case"x":return ft(ht.basicOptionalMinutes,n);case"xx":return ft(ht.basic,n);case"xxxx":return ft(ht.basicOptionalSeconds,n);case"xxxxx":return ft(ht.extendedOptionalSeconds,n);default:return ft(ht.extended,n)}}},{key:"set",value:function(n,s,i){return s.timestampIsSet?n:new Date(n.getTime()-i)}}]),t})(Te),Dd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",40),Z(J(a),"incompatibleTokens","*"),a}return ve(t,[{key:"parse",value:function(n){return hs(n)}},{key:"set",value:function(n,s,i){return[new Date(i*1e3),{timestampIsSet:!0}]}}]),t})(Te),Pd=(function(e){je(t,e);var r=Ce(t);function t(){var a;ge(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=r.call.apply(r,[this].concat(s)),Z(J(a),"priority",20),Z(J(a),"incompatibleTokens","*"),a}return ve(t,[{key:"parse",value:function(n){return hs(n)}},{key:"set",value:function(n,s,i){return[new Date(i),{timestampIsSet:!0}]}}]),t})(Te),jd={G:new Bu,y:new Hu,Y:new zu,R:new Yu,u:new Uu,Q:new qu,q:new Qu,M:new Gu,L:new Ku,w:new Zu,I:new ed,d:new nd,D:new ad,E:new od,e:new sd,c:new id,i:new cd,a:new ud,b:new dd,B:new hd,h:new fd,H:new md,K:new pd,k:new gd,m:new vd,s:new xd,S:new yd,X:new wd,x:new bd,t:new Dd,T:new Pd},Cd=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sd=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Md=/^'([^]*?)'?$/,Td=/''/g,kd=/\S/,Id=/[a-zA-Z]/;function Ed(e,r,t,a){var n,s,i,l,u,c,d,m,g,h,v,y,b,P,w,p,M,C;q(3,arguments);var A=String(e),I=String(r),R=pt(),D=(n=(s=a?.locale)!==null&&s!==void 0?s:R.locale)!==null&&n!==void 0?n:va;if(!D.match)throw new RangeError("locale must contain match property");var N=Pe((i=(l=(u=(c=a?.firstWeekContainsDate)!==null&&c!==void 0?c:a==null||(d=a.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&u!==void 0?u:R.firstWeekContainsDate)!==null&&l!==void 0?l:(g=R.locale)===null||g===void 0||(h=g.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var W=Pe((v=(y=(b=(P=a?.weekStartsOn)!==null&&P!==void 0?P:a==null||(w=a.locale)===null||w===void 0||(p=w.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&b!==void 0?b:R.weekStartsOn)!==null&&y!==void 0?y:(M=R.locale)===null||M===void 0||(C=M.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&v!==void 0?v:0);if(!(W>=0&&W<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(I==="")return A===""?Q(t):new Date(NaN);var k={firstWeekContainsDate:N,weekStartsOn:W,locale:D},E=[new $u],j=I.match(Sd).map(function(te){var re=te[0];if(re in ia){var he=ia[re];return he(te,D.formatLong)}return te}).join("").match(Cd),x=[],F=po(j),$;try{var V=function(){var re=$.value;!(a!=null&&a.useAdditionalWeekYearTokens)&&ls(re)&&pn(re,I,e),!(a!=null&&a.useAdditionalDayOfYearTokens)&&is(re)&&pn(re,I,e);var he=re[0],ae=jd[he];if(ae){var se=ae.incompatibleTokens;if(Array.isArray(se)){var K=x.find(function(Ve){return se.includes(Ve.token)||Ve.token===he});if(K)throw new RangeError("The format string mustn't contain `".concat(K.fullToken,"` and `").concat(re,"` at the same time"))}else if(ae.incompatibleTokens==="*"&&x.length>0)throw new RangeError("The format string mustn't contain `".concat(re,"` and any other token at the same time"));x.push({token:he,fullToken:re});var ce=ae.run(A,re,D.match,k);if(!ce)return{v:new Date(NaN)};E.push(ce.setter),A=ce.rest}else{if(he.match(Id))throw new RangeError("Format string contains an unescaped latin alphabet character `"+he+"`");if(re==="''"?re="'":he==="'"&&(re=Od(re)),A.indexOf(re)===0)A=A.slice(re.length);else return{v:new Date(NaN)}}};for(F.s();!($=F.n()).done;){var B=V();if(Pn(B)==="object")return B.v}}catch(te){F.e(te)}finally{F.f()}if(A.length>0&&kd.test(A))return new Date(NaN);var G=E.map(function(te){return te.priority}).sort(function(te,re){return re-te}).filter(function(te,re,he){return he.indexOf(te)===re}).map(function(te){return E.filter(function(re){return re.priority===te}).sort(function(re,he){return he.subPriority-re.subPriority})}).map(function(te){return te[0]}),_=Q(t);if(isNaN(_.getTime()))return new Date(NaN);var z=rs(_,mn(_)),L={},Y=po(G),ie;try{for(Y.s();!(ie=Y.n()).done;){var De=ie.value;if(!De.validate(z,k))return new Date(NaN);var U=De.set(z,L,k);Array.isArray(U)?(z=U[0],Fu(L,U[1])):z=U}}catch(te){Y.e(te)}finally{Y.f()}return z}function Od(e){return e.match(Md)[1].replace(Td,"'")}function Rd(e,r){q(2,arguments);var t=Q(e),a=Pe(r);return t.setDate(a),t}function _d(e,r){q(2,arguments);var t=Q(e),a=Pe(r);return t.setHours(a),t}function Ad(e,r){q(2,arguments);var t=Q(e),a=Pe(r);return t.setMinutes(a),t}function Fd(e,r){q(2,arguments);var t=Q(e),a=Pe(r),n=t.getFullYear(),s=t.getDate(),i=new Date(0);i.setFullYear(n,a,15),i.setHours(0,0,0,0);var l=cs(i);return t.setMonth(a,Math.min(s,l)),t}function Nd(e,r){q(2,arguments);var t=Q(e),a=Pe(r);return t.setSeconds(a),t}function Vd(e,r){q(2,arguments);var t=Q(e),a=Pe(r);return t.setMilliseconds(a),t}function Ld(e,r){q(2,arguments);var t=Q(e),a=Pe(r);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(a),t)}function go(e){q(1,arguments);var r=Q(e);return r.setDate(1),r.setHours(0,0,0,0),r}function rn(e){q(1,arguments);var r=Q(e),t=new Date(0);return t.setFullYear(r.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Wd(e,r){var t;q(1,arguments);var a=Pe((t=void 0)!==null&&t!==void 0?t:2);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=zd(e),s;if(n.date){var i=Yd(n.date,a);s=Ud(i.restDateString,i.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var l=s.getTime(),u=0,c;if(n.time&&(u=qd(n.time),isNaN(u)))return new Date(NaN);if(n.timezone){if(c=Qd(n.timezone),isNaN(c))return new Date(NaN)}else{var d=new Date(l+u),m=new Date(0);return m.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),m.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),m}return new Date(l+u+c)}var nn={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$d=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Bd=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Hd=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zd(e){var r={},t=e.split(nn.dateTimeDelimiter),a;if(t.length>2)return r;if(/:/.test(t[0])?a=t[0]:(r.date=t[0],a=t[1],nn.timeZoneDelimiter.test(r.date)&&(r.date=e.split(nn.timeZoneDelimiter)[0],a=e.substr(r.date.length,e.length))),a){var n=nn.timezone.exec(a);n?(r.time=a.replace(n[1],""),r.timezone=n[1]):r.time=a}return r}function Yd(e,r){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),a=e.match(t);if(!a)return{year:NaN,restDateString:""};var n=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?n:s*100,restDateString:e.slice((a[1]||a[2]).length)}}function Ud(e,r){if(r===null)return new Date(NaN);var t=e.match($d);if(!t)return new Date(NaN);var a=!!t[4],n=Pr(t[1]),s=Pr(t[2])-1,i=Pr(t[3]),l=Pr(t[4]),u=Pr(t[5])-1;if(a)return Jd(r,l,u)?Gd(r,l,u):new Date(NaN);var c=new Date(0);return!Xd(r,s,i)||!Zd(r,n)?new Date(NaN):(c.setUTCFullYear(r,s,Math.max(n,i)),c)}function Pr(e){return e?parseInt(e):1}function qd(e){var r=e.match(Bd);if(!r)return NaN;var t=ea(r[1]),a=ea(r[2]),n=ea(r[3]);return eh(t,a,n)?t*Mn+a*Sn+n*1e3:NaN}function ea(e){return e&&parseFloat(e.replace(",","."))||0}function Qd(e){if(e==="Z")return 0;var r=e.match(Hd);if(!r)return 0;var t=r[1]==="+"?-1:1,a=parseInt(r[2]),n=r[3]&&parseInt(r[3])||0;return th(a,n)?t*(a*Mn+n*Sn):NaN}function Gd(e,r,t){var a=new Date(0);a.setUTCFullYear(e,0,4);var n=a.getUTCDay()||7,s=(r-1)*7+t+1-n;return a.setUTCDate(a.getUTCDate()+s),a}var Kd=[31,null,31,30,31,30,31,31,30,31,30,31];function ps(e){return e%400===0||e%4===0&&e%100!==0}function Xd(e,r,t){return r>=0&&r<=11&&t>=1&&t<=(Kd[r]||(ps(e)?29:28))}function Zd(e,r){return r>=1&&r<=(ps(e)?366:365)}function Jd(e,r,t){return r>=1&&r<=53&&t>=0&&t<=6}function eh(e,r,t){return e===24?r===0&&t===0:t>=0&&t<60&&r>=0&&r<60&&e>=0&&e<25}function th(e,r){return r>=0&&r<=59}function rh(e,r){var t,a;q(1,arguments);var n=Q(e);if(isNaN(n.getTime()))throw new RangeError("Invalid time value");var s=String((t=r?.format)!==null&&t!==void 0?t:"extended"),i=String((a=r?.representation)!==null&&a!==void 0?a:"complete");if(s!=="extended"&&s!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(i!=="date"&&i!=="time"&&i!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var l="",u="",c=s==="extended"?"-":"",d=s==="extended"?":":"";if(i!=="time"){var m=me(n.getDate(),2),g=me(n.getMonth()+1,2),h=me(n.getFullYear(),4);l="".concat(h).concat(c).concat(g).concat(c).concat(m)}if(i!=="date"){var v=n.getTimezoneOffset();if(v!==0){var y=Math.abs(v),b=me(Math.floor(y/60),2),P=me(y%60,2),w=v<0?"+":"-";u="".concat(w).concat(b,":").concat(P)}else u="Z";var p=me(n.getHours(),2),M=me(n.getMinutes(),2),C=me(n.getSeconds(),2),A=l===""?"":"T",I=[p,M,C].join(d);l="".concat(l).concat(A).concat(I).concat(u)}return l}function nh(e,r){q(2,arguments);var t=Q(e).getTime(),a=Q(r.start).getTime(),n=Q(r.end).getTime();if(!(a<=n))throw new RangeError("Invalid interval");return t>=a&&t<=n}var an={exports:{}},vo;function ah(){return vo||(vo=1,(function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=function(u,c){switch(u){case"P":return c.date({width:"short"});case"PP":return c.date({width:"medium"});case"PPP":return c.date({width:"long"});default:return c.date({width:"full"})}},a=function(u,c){switch(u){case"p":return c.time({width:"short"});case"pp":return c.time({width:"medium"});case"ppp":return c.time({width:"long"});default:return c.time({width:"full"})}},n=function(u,c){var d=u.match(/(P+)(p+)?/)||[],m=d[1],g=d[2];if(!g)return t(u,c);var h;switch(m){case"P":h=c.dateTime({width:"short"});break;case"PP":h=c.dateTime({width:"medium"});break;case"PPP":h=c.dateTime({width:"long"});break;default:h=c.dateTime({width:"full"});break}return h.replace("{{date}}",t(m,c)).replace("{{time}}",a(g,c))},s={p:a,P:n},i=s;r.default=i,e.exports=r.default})(an,an.exports)),an.exports}var oh=ah();const sh=pe(oh),ih={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},lh={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class ch{constructor(r){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=ih,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=s=>typeof s>"u"?new Date:s===null?null:new Date(s),this.dateWithTimezone=s=>this.date(s),this.getTimezone=()=>"default",this.setTimezone=s=>s,this.toJsDate=s=>s,this.getCurrentLocaleCode=()=>{var s;return((s=this.locale)==null?void 0:s.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=s=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return s.match(i).map(l=>{const u=l[0];if(u==="p"||u==="P"){const c=this.longFormatters[u];return c(l,this.locale.formatLong)}return l}).join("")},this.getFormatHelperText=s=>this.expandFormat(s).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=s=>s===null,this.formatNumber=s=>s,this.getMeridiemText=s=>s==="am"?"AM":"PM";const{locale:t,formats:a,longFormatters:n}=r;this.locale=t,this.formats=T({},lh,a),this.longFormatters=n}}class kn extends ch{constructor({locale:r,formats:t}={}){if(typeof un!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:r??va,formats:t,longFormatters:sh}),this.parseISO=a=>Wd(a),this.toISO=a=>rh(a,{format:"extended"}),this.parse=(a,n)=>a===""?null:Ed(a,n,new Date,{locale:this.locale}),this.isValid=a=>ts(this.date(a)),this.format=(a,n)=>this.formatByString(a,this.formats[n]),this.formatByString=(a,n)=>vu(a,n,{locale:this.locale}),this.getDiff=(a,n,s)=>{switch(s){case"years":return cc(a,this.date(n));case"quarters":return fc(a,this.date(n));case"months":return Jo(a,this.date(n));case"weeks":return gc(a,this.date(n));case"days":return es(a,this.date(n));case"hours":return xc(a,this.date(n));case"minutes":return yc(a,this.date(n));case"seconds":return wc(a,this.date(n));default:return Tn(a,this.date(n))}},this.isEqual=(a,n)=>a===null&&n===null?!0:Iu(a,n),this.isSameYear=(a,n)=>Ou(a,n),this.isSameMonth=(a,n)=>Ru(a,n),this.isSameDay=(a,n)=>Eu(a,n),this.isSameHour=(a,n)=>_u(a,n),this.isAfter=(a,n)=>Jn(a,n),this.isAfterYear=(a,n)=>Jn(a,Xn(n)),this.isAfterDay=(a,n)=>Jn(a,oa(n)),this.isBefore=(a,n)=>Dr(a,n),this.isBeforeYear=(a,n)=>Dr(a,rn(n)),this.isBeforeDay=(a,n)=>Dr(a,zt(n)),this.isWithinRange=(a,[n,s])=>nh(a,{start:n,end:s}),this.startOfYear=a=>rn(a),this.startOfMonth=a=>go(a),this.startOfWeek=a=>Mt(a,{locale:this.locale}),this.startOfDay=a=>zt(a),this.endOfYear=a=>Xn(a),this.endOfMonth=a=>sa(a),this.endOfWeek=a=>Kn(a,{locale:this.locale}),this.endOfDay=a=>oa(a),this.addYears=(a,n)=>so(a,n),this.addMonths=(a,n)=>dn(a,n),this.addWeeks=(a,n)=>ic(a,n),this.addDays=(a,n)=>un(a,n),this.addHours=(a,n)=>sc(a,n),this.addMinutes=(a,n)=>ac(a,n),this.addSeconds=(a,n)=>rc(a,n),this.getYear=a=>ku(a),this.getMonth=a=>Du(a),this.getDate=a=>yu(a),this.getHours=a=>wu(a),this.getMinutes=a=>bu(a),this.getSeconds=a=>Pu(a),this.getMilliseconds=a=>ju(a),this.setYear=(a,n)=>Ld(a,n),this.setMonth=(a,n)=>Fd(a,n),this.setDate=(a,n)=>Rd(a,n),this.setHours=(a,n)=>_d(a,n),this.setMinutes=(a,n)=>Ad(a,n),this.setSeconds=(a,n)=>Nd(a,n),this.setMilliseconds=(a,n)=>Vd(a,n),this.getDaysInMonth=a=>cs(a),this.getNextMonth=a=>dn(a,1),this.getPreviousMonth=a=>dn(a,-1),this.getMonthArray=a=>{const s=[rn(a)];for(;s.length<12;){const i=s[s.length-1];s.push(this.getNextMonth(i))}return s},this.mergeDateAndTime=(a,n)=>this.setSeconds(this.setMinutes(this.setHours(a,this.getHours(n)),this.getMinutes(n)),this.getSeconds(n)),this.getWeekdays=()=>{const a=new Date;return bc({start:Mt(a,{locale:this.locale}),end:Kn(a,{locale:this.locale})}).map(n=>this.formatByString(n,"EEEEEE"))},this.getWeekArray=a=>{const n=Mt(go(a),{locale:this.locale}),s=Kn(sa(a),{locale:this.locale});let i=0,l=n;const u=[];for(;Dr(l,s);){const c=Math.floor(i/7);u[c]=u[c]||[],u[c].push(l),l=un(l,1),i+=1}return u},this.getWeekNumber=a=>Tu(a,{locale:this.locale}),this.getYearRange=(a,n)=>{const s=rn(a),i=Xn(n),l=[];let u=s;for(;Dr(u,i);)l.push(u),u=so(u,1);return l}}}const uh={primary:"#8884d8",success:"#00E396",danger:"#FF6B6B",text:"#263238",grid:"#e0e0e0"},dh={primary:"#00E5FF",success:"#00E676",danger:"#FF4081",text:"#FFFFFF",grid:"#424242"},wa=e=>e==="dark"?dh:uh,gs=(e="light")=>{const r=wa(e);return{chart:{background:"transparent",toolbar:{show:!0,tools:{download:!0,zoom:!0,pan:!0,reset:!0}},fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif'},grid:{borderColor:r.grid,strokeDashArray:3},theme:{mode:e},dataLabels:{style:{colors:[r.text]}}}},vs=(e,r=[],t="light")=>{const a=wa(t),n=gs(t),s=e.map(i=>r.includes(i)?a.danger:a.text);return{...n,chart:{...n.chart,type:"candlestick",height:400},title:{text:"Daily Energy Consumption Range",align:"left",style:{fontSize:"16px",fontWeight:600,color:a.text}},xaxis:{type:"category",categories:e,labels:{rotate:-45,rotateAlways:!0,style:{fontSize:"12px",colors:s}},axisBorder:{color:a.grid},axisTicks:{color:a.grid}},yaxis:{title:{text:"Consumption (kWh)",style:{fontSize:"12px",color:a.text}},labels:{style:{fontSize:"12px",colors:a.text},formatter:i=>i!=null?Number(i).toFixed(1):""}},tooltip:{theme:t,custom:function({seriesIndex:i,dataPointIndex:l,w:u}){const c=u.globals.initialSeries[i].data[l];return`
          <div style="padding: 10px; background: ${t==="dark"?"#1e1e1e":"white"}; border: 1px solid ${t==="dark"?"#444":"#e0e0e0"}; border-radius: 4px; color: ${t==="dark"?"#fff":"#333"}">
            <div style="margin-bottom: 5px; font-weight: 600;">Date: ${c.x}</div>
            <div style="color: ${a.success};">High: ${Number(c.y[1]).toFixed(3)} kWh</div>
            <div style="color: ${a.danger};">Low: ${Number(c.y[2]).toFixed(3)} kWh</div>
            <div style="color: ${a.primary};">Average: ${Number(c.y[0]).toFixed(3)} kWh</div>
          </div>
        `}},plotOptions:{candlestick:{colors:{upward:a.success,downward:a.danger},wick:{useFillColor:!0}}}}},xs=(e,r,t="light")=>{const a=wa(t),n=gs(t),s=Math.max(r*25+200,600);return{...n,chart:{...n.chart,type:"bar",height:s,toolbar:{show:!0,tools:{download:!0,zoom:!1,pan:!1,reset:!1}}},plotOptions:{bar:{horizontal:!0,borderRadius:4,borderRadiusApplication:"end",barHeight:"70%",colors:{backgroundBarColors:[],backgroundBarOpacity:1}}},dataLabels:{enabled:!1},title:{text:"Hourly Electricity Consumption",align:"left",style:{fontSize:"16px",fontWeight:600,color:a.text}},xaxis:{categories:e,title:{text:"Consumption (kWh)",style:{fontSize:"12px",color:a.text}},labels:{style:{fontSize:"12px",colors:a.text}},axisBorder:{color:a.grid},axisTicks:{color:a.grid}},yaxis:{labels:{style:{fontSize:"10px",colors:a.text}}},tooltip:{theme:t,y:{formatter:function(i){return i!=null?Number(i).toFixed(3)+" kWh":""}}},colors:[a.primary]}};function hh(e){return typeof e=="string"}function fh(e,r,t){return e===void 0||hh(e)?r:{...r,ownerState:{...r.ownerState,...t}}}function mh(e,r=[]){if(e===void 0)return{};const t={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!r.includes(a)).forEach(a=>{t[a]=e[a]}),t}function ba(e,r,t){return typeof e=="function"?e(r,t):e}function ph(...e){const r=f.useRef(void 0),t=f.useCallback(a=>{const n=e.map(s=>{if(s==null)return null;if(typeof s=="function"){const i=s,l=i(a);return typeof l=="function"?l:()=>{i(null)}}return s.current=a,()=>{s.current=null}});return()=>{n.forEach(s=>s?.())}},e);return f.useMemo(()=>e.every(a=>a==null)?null:a=>{r.current&&(r.current(),r.current=void 0),a!=null&&(r.current=t(a))},e)}function xo(e){if(e===void 0)return{};const r={};return Object.keys(e).filter(t=>!(t.match(/^on[A-Z]/)&&typeof e[t]=="function")).forEach(t=>{r[t]=e[t]}),r}function gh(e){const{getSlotProps:r,additionalProps:t,externalSlotProps:a,externalForwardedProps:n,className:s}=e;if(!r){const h=Ye(t?.className,s,n?.className,a?.className),v={...t?.style,...n?.style,...a?.style},y={...t,...n,...a};return h.length>0&&(y.className=h),Object.keys(v).length>0&&(y.style=v),{props:y,internalRef:void 0}}const i=mh({...n,...a}),l=xo(a),u=xo(n),c=r(i),d=Ye(c?.className,t?.className,s,n?.className,a?.className),m={...c?.style,...t?.style,...n?.style,...a?.style},g={...c,...t,...u,...l};return d.length>0&&(g.className=d),Object.keys(m).length>0&&(g.style=m),{props:g,internalRef:c.ref}}function Be(e){const{elementType:r,externalSlotProps:t,ownerState:a,skipResolvingSlotProps:n=!1,...s}=e,i=n?{}:ba(t,a),{props:l,internalRef:u}=gh({...s,externalSlotProps:i}),c=ph(u,i?.ref,e.additionalProps?.ref);return fh(r,{...l,ref:c},a)}const jr=(e,r)=>e.length!==r.length?!1:r.every(t=>e.includes(t)),vh=({openTo:e,defaultOpenTo:r,views:t,defaultViews:a})=>{const n=t??a;let s;if(e!=null)s=e;else if(n.includes(r))s=r;else if(n.length>0)s=n[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:n,openTo:s}},xn=(e,r,t)=>{let a=r;return a=e.setHours(a,e.getHours(t)),a=e.setMinutes(a,e.getMinutes(t)),a=e.setSeconds(a,e.getSeconds(t)),a},Br=({date:e,disableFuture:r,disablePast:t,maxDate:a,minDate:n,isDateDisabled:s,utils:i,timezone:l})=>{const u=xn(i,i.dateWithTimezone(void 0,l),e);t&&i.isBefore(n,u)&&(n=u),r&&i.isAfter(a,u)&&(a=u);let c=e,d=e;for(i.isBefore(e,n)&&(c=n,d=null),i.isAfter(e,a)&&(d&&(d=a),c=null);c||d;){if(c&&i.isAfter(c,a)&&(c=null),d&&i.isBefore(d,n)&&(d=null),c){if(!s(c))return c;c=i.addDays(c,1)}if(d){if(!s(d))return d;d=i.addDays(d,-1)}}return null},xh=(e,r)=>r==null||!e.isValid(r)?null:r,at=(e,r,t)=>r==null||!e.isValid(r)?t:r,yh=(e,r,t)=>!e.isValid(r)&&r!=null&&!e.isValid(t)&&t!=null?!0:e.isEqual(r,t),Da=(e,r)=>{const a=[e.startOfYear(r)];for(;a.length<12;){const n=a[a.length-1];a.push(e.addMonths(n,1))}return a},ys=(e,r,t)=>t==="date"?e.startOfDay(e.dateWithTimezone(void 0,r)):e.dateWithTimezone(void 0,r),wh=["year","month","day"],yo=e=>wh.includes(e),Pa=(e,{format:r,views:t},a)=>{if(r!=null)return r;const n=e.formats;return jr(t,["year"])?n.year:jr(t,["month"])?n.month:jr(t,["day"])?n.dayOfMonth:jr(t,["month","year"])?`${n.month} ${n.year}`:jr(t,["day","month"])?`${n.month} ${n.dayOfMonth}`:a?/en/.test(e.getCurrentLocaleCode())?n.normalDateWithWeekday:n.normalDate:n.keyboardDate},bh=(e,r)=>{const t=e.startOfWeek(r);return[0,1,2,3,4,5,6].map(a=>e.addDays(t,a))},Dh=["hours","minutes","seconds"],Ph=e=>Dh.includes(e),wo=(e,r)=>r.getHours(e)*3600+r.getMinutes(e)*60+r.getSeconds(e),jh=(e,r)=>(t,a)=>e?r.isAfter(t,a):wo(t,r)>wo(a,r),dt={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},Ch=e=>Math.max(...e.map(r=>{var t;return(t=dt[r.type])!=null?t:1})),Cr=(e,r,t)=>{if(r===dt.year)return e.startOfYear(t);if(r===dt.month)return e.startOfMonth(t);if(r===dt.day)return e.startOfDay(t);let a=t;return r<dt.minutes&&(a=e.setMinutes(a,0)),r<dt.seconds&&(a=e.setSeconds(a,0)),r<dt.milliseconds&&(a=e.setMilliseconds(a,0)),a},Sh=({props:e,utils:r,granularity:t,timezone:a,getTodayDate:n})=>{var s;let i=n?n():Cr(r,t,ys(r,a));e.minDate!=null&&r.isAfterDay(e.minDate,i)&&(i=Cr(r,t,e.minDate)),e.maxDate!=null&&r.isBeforeDay(e.maxDate,i)&&(i=Cr(r,t,e.maxDate));const l=jh((s=e.disableIgnoringDatePartForTimeValidation)!=null?s:!1,r);return e.minTime!=null&&l(e.minTime,i)&&(i=Cr(r,t,e.disableIgnoringDatePartForTimeValidation?e.minTime:xn(r,i,e.minTime))),e.maxTime!=null&&l(i,e.maxTime)&&(i=Cr(r,t,e.disableIgnoringDatePartForTimeValidation?e.maxTime:xn(r,i,e.maxTime))),i},ws=(e,r)=>{const t=e.formatTokenMap[r];if(t==null)throw new Error([`MUI: The token "${r}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof t=="string"?{type:t,contentType:t==="meridiem"?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},Mh=e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},In=(e,r,t)=>{const a=[],n=e.dateWithTimezone(void 0,r),s=e.startOfWeek(n),i=e.endOfWeek(n);let l=s;for(;e.isBefore(l,i);)a.push(l),l=e.addDays(l,1);return a.map(u=>e.formatByString(u,t))},bs=(e,r,t,a)=>{switch(t){case"month":return Da(e,e.dateWithTimezone(void 0,r)).map(n=>e.formatByString(n,a));case"weekDay":return In(e,r,a);case"meridiem":{const n=e.dateWithTimezone(void 0,r);return[e.startOfDay(n),e.endOfDay(n)].map(s=>e.formatByString(s,a))}default:return[]}},Ds=(e,r,t)=>{let a=r;for(a=Number(a).toString();a.length<t;)a=`0${a}`;return a},Ps=(e,r,t,a,n)=>{if(n.type==="day"&&n.contentType==="digit-with-letter"){const i=e.setDate(a.longestMonth,t);return e.formatByString(i,n.format)}const s=t.toString();return n.hasLeadingZerosInInput?Ds(e,s,n.maxLength):s},Th=(e,r,t,a,n,s,i)=>{const l=Mh(a),u=a==="Home",c=a==="End",d=t.value===""||u||c,m=()=>{const h=n[t.type]({currentDate:s,format:t.format,contentType:t.contentType}),v=w=>Ps(e,r,w,h,t),y=t.type==="minutes"&&i!=null&&i.minutesStep?i.minutesStep:1;let P=parseInt(t.value,10)+l*y;if(d){if(t.type==="year"&&!c&&!u)return e.formatByString(e.dateWithTimezone(void 0,r),t.format);l>0||u?P=h.minimum:P=h.maximum}return P%y!==0&&((l<0||u)&&(P+=y-(y+P)%y),(l>0||c)&&(P-=P%y)),P>h.maximum?v(h.minimum+(P-h.maximum-1)%(h.maximum-h.minimum+1)):P<h.minimum?v(h.maximum-(h.minimum-P-1)%(h.maximum-h.minimum+1)):v(P)},g=()=>{const h=bs(e,r,t.type,t.format);if(h.length===0)return t.value;if(d)return l>0||u?h[0]:h[h.length-1];const y=(h.indexOf(t.value)+h.length+l)%h.length;return h[y]};return t.contentType==="digit"||t.contentType==="digit-with-letter"?m():g()},ja=(e,r)=>{let t=e.value||e.placeholder;const a=r==="non-input"?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;return r==="non-input"&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(t=Number(t).toString()),["input-rtl","input-ltr"].includes(r)&&e.contentType==="digit"&&!a&&t.length===1&&(t=`${t}`),r==="input-rtl"&&(t=`${t}`),t},Ft=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),js=(e,r)=>{let t=0,a=r?1:0;const n=[];for(let s=0;s<e.length;s+=1){const i=e[s],l=ja(i,r?"input-rtl":"input-ltr"),u=`${i.startSeparator}${l}${i.endSeparator}`,c=Ft(u).length,d=u.length,m=Ft(l),g=a+l.indexOf(m[0])+i.startSeparator.length,h=g+m.length;n.push(T({},i,{start:t,end:t+c,startInInput:g,endInInput:h})),t+=c,a+=d}return n},kh=(e,r,t,a,n)=>{switch(a.type){case"year":return t.fieldYearPlaceholder({digitAmount:e.formatByString(e.dateWithTimezone(void 0,r),n).length,format:n});case"month":return t.fieldMonthPlaceholder({contentType:a.contentType,format:n});case"day":return t.fieldDayPlaceholder({format:n});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:a.contentType,format:n});case"hours":return t.fieldHoursPlaceholder({format:n});case"minutes":return t.fieldMinutesPlaceholder({format:n});case"seconds":return t.fieldSecondsPlaceholder({format:n});case"meridiem":return t.fieldMeridiemPlaceholder({format:n});default:return n}},bo=(e,r,t,a)=>e.formatByString(e.parse(r,t),a),Cs=(e,r,t)=>e.formatByString(e.dateWithTimezone(void 0,r),t).length===4,Ss=(e,r,t,a,n)=>{if(t!=="digit")return!1;const s=e.dateWithTimezone(void 0,r);switch(a){case"year":return Cs(e,r,n)?e.formatByString(e.setYear(s,1),n)==="0001":e.formatByString(e.setYear(s,2001),n)==="01";case"month":return e.formatByString(e.startOfYear(s),n).length>1;case"day":return e.formatByString(e.startOfMonth(s),n).length>1;case"weekDay":return e.formatByString(e.startOfWeek(s),n).length>1;case"hours":return e.formatByString(e.setHours(s,1),n).length>1;case"minutes":return e.formatByString(e.setMinutes(s,1),n).length>1;case"seconds":return e.formatByString(e.setSeconds(s,1),n).length>1;default:throw new Error("Invalid section type")}},Ih=(e,r)=>{const t=[],{start:a,end:n}=e.escapedCharacters,s=new RegExp(`(\\${a}[^\\${n}]*\\${n})+`,"g");let i=null;for(;i=s.exec(r);)t.push({start:i.index,end:s.lastIndex-1});return t},Do=(e,r,t,a,n,s,i,l)=>{let u="";const c=[],d=e.date(),m=p=>{if(p==="")return null;const M=ws(e,p),C=Ss(e,r,M.contentType,M.type,p),A=i?C:M.contentType==="digit",I=n!=null&&e.isValid(n);let R=I?e.formatByString(n,p):"",D=null;if(A)if(C)D=R===""?e.formatByString(d,p).length:R.length;else{if(M.maxLength==null)throw new Error(`MUI: The token ${p} should have a 'maxDigitNumber' property on it's adapter`);D=M.maxLength,I&&(R=Ds(e,R,D))}return c.push(T({},M,{format:p,maxLength:D,value:R,placeholder:kh(e,r,t,M,p),hasLeadingZeros:C,hasLeadingZerosInFormat:C,hasLeadingZerosInInput:A,startSeparator:c.length===0?u:"",endSeparator:"",modified:!1})),null};let g=10,h=a,v=e.expandFormat(a);for(;v!==h;)if(h=v,v=e.expandFormat(h),g-=1,g<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const y=v,b=Ih(e,y),P=new RegExp(`^(${Object.keys(e.formatTokenMap).sort((p,M)=>M.length-p.length).join("|")})`,"g");let w="";for(let p=0;p<y.length;p+=1){const M=b.find(D=>D.start<=p&&D.end>=p),C=y[p],A=M!=null,I=`${w}${y.slice(p)}`,R=P.test(I);!A&&C.match(/([A-Za-z]+)/)&&R?(w=I.slice(0,P.lastIndex),p+=P.lastIndex-1):A&&M?.start===p||M?.end===p||(m(w),w="",c.length===0?u+=C:c[c.length-1].endSeparator+=C)}return m(w),c.map(p=>{const M=C=>{let A=C;return l&&A!==null&&A.includes(" ")&&(A=`${A}`),s==="spacious"&&["/",".","-"].includes(A)&&(A=` ${A} `),A};return p.startSeparator=M(p.startSeparator),p.endSeparator=M(p.endSeparator),p})},Eh=(e,r)=>{const t=r.some(l=>l.type==="day"),a=[],n=[];for(let l=0;l<r.length;l+=1){const u=r[l];t&&u.type==="weekDay"||(a.push(u.format),n.push(ja(u,"non-input")))}const s=a.join(" "),i=n.join(" ");return e.parse(i,s)},Oh=(e,r)=>{const a=e.map(n=>{const s=ja(n,r?"input-rtl":"input-ltr");return`${n.startSeparator}${s}${n.endSeparator}`}).join("");return r?`${a}`:a},Rh=(e,r)=>{const t=e.dateWithTimezone(void 0,r),a=e.endOfYear(t),n=e.endOfDay(t),{maxDaysInMonth:s,longestMonth:i}=Da(e,t).reduce((l,u)=>{const c=e.getDaysInMonth(u);return c>l.maxDaysInMonth?{maxDaysInMonth:c,longestMonth:u}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:Cs(e,r,l)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(a)+1}),day:({currentDate:l})=>({minimum:1,maximum:l!=null&&e.isValid(l)?e.getDaysInMonth(l):s,longestMonth:i}),weekDay:({format:l,contentType:u})=>{if(u==="digit"){const c=In(e,r,l).map(Number);return{minimum:Math.min(...c),maximum:Math.max(...c)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const u=e.getHours(n);return e.formatByString(e.endOfDay(t),l)!==u.toString()?{minimum:1,maximum:Number(e.formatByString(e.startOfDay(t),l))}:{minimum:0,maximum:u}},minutes:()=>({minimum:0,maximum:e.getMinutes(n)}),seconds:()=>({minimum:0,maximum:e.getSeconds(n)}),meridiem:()=>({minimum:0,maximum:0})}},_h=(e,r,t,a,n)=>{switch(t.type){case"year":return e.setYear(n,e.getYear(a));case"month":return e.setMonth(n,e.getMonth(a));case"weekDay":{const s=In(e,r,t.format),i=e.formatByString(a,t.format),l=s.indexOf(i),c=s.indexOf(t.value)-l;return e.addDays(a,c)}case"day":return e.setDate(n,e.getDate(a));case"meridiem":{const s=e.getHours(a)<12,i=e.getHours(n);return s&&i>=12?e.addHours(n,-12):!s&&i<12?e.addHours(n,12):n}case"hours":return e.setHours(n,e.getHours(a));case"minutes":return e.setMinutes(n,e.getMinutes(a));case"seconds":return e.setSeconds(n,e.getSeconds(a));default:return n}},Po={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},jo=(e,r,t,a,n,s)=>[...a].sort((i,l)=>Po[i.type]-Po[l.type]).reduce((i,l)=>!s||l.modified?_h(e,r,l,t,i):i,n),Ah=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,Fh=(e,r)=>{const t={};if(!r)return e.forEach((u,c)=>{const d=c===0?null:c-1,m=c===e.length-1?null:c+1;t[c]={leftIndex:d,rightIndex:m}}),{neighbors:t,startIndex:0,endIndex:e.length-1};const a={},n={};let s=0,i=0,l=e.length-1;for(;l>=0;){i=e.findIndex((u,c)=>{var d;return c>=s&&((d=u.endSeparator)==null?void 0:d.includes(" "))&&u.endSeparator!==" / "}),i===-1&&(i=e.length-1);for(let u=i;u>=s;u-=1)n[u]=l,a[l]=u,l-=1;s=i+1}return e.forEach((u,c)=>{const d=n[c],m=d===0?null:a[d-1],g=d===e.length-1?null:a[d+1];t[c]={leftIndex:m,rightIndex:g}}),{neighbors:t,startIndex:a[0],endIndex:a[e.length-1]}},Nh=["value","referenceDate"],vt={emptyValue:null,getTodayValue:ys,getInitialReferenceValue:e=>{let{value:r,referenceDate:t}=e,a=Se(e,Nh);return r!=null&&a.utils.isValid(r)?r:t??Sh(a)},cleanValue:xh,areValuesEqual:yh,isSameError:(e,r)=>e===r,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,r)=>r==null||!e.isValid(r)?null:e.getTimezone(r),setTimezone:(e,r,t)=>t==null?null:e.setTimezone(t,r)},Vh={updateReferenceValue:(e,r,t)=>r==null||!e.isValid(r)?t:r,getSectionsFromValue:(e,r,t,a,n)=>!e.isValid(r)&&!!t?t:js(n(r),a),getValueStrFromSections:Oh,getActiveDateManager:(e,r)=>({date:r.value,referenceDate:r.referenceValue,getSections:t=>t,getNewValuesFromNewActiveDate:t=>({value:t,referenceValue:t==null||!e.isValid(t)?r.referenceValue:t})}),parseValueStr:(e,r,t)=>t(e.trim(),r)},Lh=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:T({},e)}}}}),Ms={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,r,t)=>`Select ${e}. ${r===null?"No time selected":`Selected time is ${t.format(r,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,r)=>e!==null&&r.isValid(e)?`Choose date, selected date is ${r.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,r)=>e!==null&&r.isValid(e)?`Choose time, selected time is ${r.format(e,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},Wh=Ms;Lh(Ms);const Ot=()=>{const e=f.useContext(aa);if(e===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const r=f.useMemo(()=>T({},Wh,e.localeText),[e.localeText]);return f.useMemo(()=>T({},e,{localeText:r}),[e,r])},Ie=()=>Ot().utils,Jr=()=>Ot().defaultDates,jt=()=>Ot().localeText,En=e=>{const r=Ie(),t=f.useRef();return t.current===void 0&&(t.current=r.dateWithTimezone(void 0,e)),t.current};function $h(e){return Ke("MuiPickersToolbar",e)}Xe("MuiPickersToolbar",["root","content"]);const Bh=e=>{const{classes:r,isLandscape:t}=e;return Ge({root:["root"],content:["content"],penIconButton:["penIconButton",t&&"penIconButtonLandscape"]},$h,r)},Hh=ue("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e,ownerState:r})=>T({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3)},r.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),zh=ue("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,r)=>r.content})(({ownerState:e})=>{var r;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:e.isLandscape?"flex-start":"space-between",flexDirection:e.isLandscape?(r=e.landscapeDirection)!=null?r:"column":"row",flex:1,alignItems:e.isLandscape?"flex-start":"center"}}),Yh=f.forwardRef(function(r,t){const a=He({props:r,name:"MuiPickersToolbar"}),{children:n,className:s,toolbarTitle:i,hidden:l,titleId:u}=a,c=a,d=Bh(c);return l?null:o.jsxs(Hh,{ref:t,className:Ye(d.root,s),ownerState:c,children:[o.jsx(O,{color:"text.secondary",variant:"overline",id:u,children:i}),o.jsx(zh,{className:d.content,ownerState:c,children:n})]})});function Uh(e){return Ke("MuiDatePickerToolbar",e)}Xe("MuiDatePickerToolbar",["root","title"]);const qh=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className"],Qh=e=>{const{classes:r}=e;return Ge({root:["root"],title:["title"]},Uh,r)},Gh=ue(Yh,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(e,r)=>r.root})({}),Kh=ue(O,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(e,r)=>r.title})(({ownerState:e})=>T({},e.isLandscape&&{margin:"auto 16px auto auto"})),Xh=f.forwardRef(function(r,t){const a=He({props:r,name:"MuiDatePickerToolbar"}),{value:n,isLandscape:s,toolbarFormat:i,toolbarPlaceholder:l="",views:u,className:c}=a,d=Se(a,qh),m=Ie(),g=jt(),h=Qh(a),v=f.useMemo(()=>{if(!n)return l;const b=Pa(m,{format:i,views:u},!0);return m.formatByString(n,b)},[n,i,l,m,u]),y=a;return o.jsx(Gh,T({ref:t,toolbarTitle:g.datePickerToolbarTitle,isLandscape:s,className:Ye(h.root,c)},d,{children:o.jsx(Kh,{variant:"h4",align:s?"left":"center",ownerState:y,className:h.title,children:v})}))}),Ts=e=>{if(e!==void 0)return Object.keys(e).reduce((r,t)=>T({},r,{[`${t.slice(0,1).toLowerCase()}${t.slice(1)}`]:e[t]}),{})};function ks(e,r){var t,a,n,s;const i=Ie(),l=Jr(),u=He({props:e,name:r}),c=f.useMemo(()=>{var m;return((m=u.localeText)==null?void 0:m.toolbarTitle)==null?u.localeText:T({},u.localeText,{datePickerToolbarTitle:u.localeText.toolbarTitle})},[u.localeText]),d=(t=u.slots)!=null?t:Ts(u.components);return T({},u,{localeText:c},vh({views:u.views,openTo:u.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:(a=u.disableFuture)!=null?a:!1,disablePast:(n=u.disablePast)!=null?n:!1,minDate:at(i,u.minDate,l.minDate),maxDate:at(i,u.maxDate,l.maxDate),slots:T({toolbar:Xh},d),slotProps:(s=u.slotProps)!=null?s:u.componentsProps})}const Zh=Pt(o.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Jh=Pt(o.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),ef=Pt(o.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),tf=Pt(o.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");Pt(o.jsxs(f.Fragment,{children:[o.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),o.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");Pt(o.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");Pt(o.jsxs(f.Fragment,{children:[o.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),o.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const rf=Pt(o.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function nf(e){return Ke("MuiPickersArrowSwitcher",e)}Xe("MuiPickersArrowSwitcher",["root","spacer","button"]);const af=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],of=["ownerState"],sf=["ownerState"],lf=ue("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,r)=>r.root})({display:"flex"}),cf=ue("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,r)=>r.spacer})(({theme:e})=>({width:e.spacing(3)})),Co=ue(Le,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,r)=>r.button})(({ownerState:e})=>T({},e.hidden&&{visibility:"hidden"})),uf=e=>{const{classes:r}=e;return Ge({root:["root"],spacer:["spacer"],button:["button"]},nf,r)},df=f.forwardRef(function(r,t){var a,n,s,i;const u=mt().direction==="rtl",c=He({props:r,name:"MuiPickersArrowSwitcher"}),{children:d,className:m,slots:g,slotProps:h,isNextDisabled:v,isNextHidden:y,onGoToNext:b,nextLabel:P,isPreviousDisabled:w,isPreviousHidden:p,onGoToPrevious:M,previousLabel:C}=c,A=Se(c,af),I=c,R=uf(I),D={isDisabled:v,isHidden:y,goTo:b,label:P},N={isDisabled:w,isHidden:p,goTo:M,label:C},W=(a=g?.previousIconButton)!=null?a:Co,k=Be({elementType:W,externalSlotProps:h?.previousIconButton,additionalProps:{size:"medium",title:N.label,"aria-label":N.label,disabled:N.isDisabled,edge:"end",onClick:N.goTo},ownerState:T({},I,{hidden:N.isHidden}),className:R.button}),E=(n=g?.nextIconButton)!=null?n:Co,j=Be({elementType:E,externalSlotProps:h?.nextIconButton,additionalProps:{size:"medium",title:D.label,"aria-label":D.label,disabled:D.isDisabled,edge:"start",onClick:D.goTo},ownerState:T({},I,{hidden:D.isHidden}),className:R.button}),x=(s=g?.leftArrowIcon)!=null?s:Jh,F=Be({elementType:x,externalSlotProps:h?.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),$=Se(F,of),V=(i=g?.rightArrowIcon)!=null?i:ef,B=Be({elementType:V,externalSlotProps:h?.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),G=Se(B,sf);return o.jsxs(lf,T({ref:t,className:Ye(R.root,m),ownerState:I},A,{children:[o.jsx(W,T({},k,{children:u?o.jsx(V,T({},G)):o.jsx(x,T({},$))})),d?o.jsx(O,{variant:"subtitle1",component:"span",children:d}):o.jsx(cf,{className:R.spacer,ownerState:I}),o.jsx(E,T({},j,{children:u?o.jsx(x,T({},$)):o.jsx(V,T({},G))}))]}))}),Gr=36,On=2,Rn=320,hf=280,Ca=334,ff=ue(Yr)({[`& .${Ea.container}`]:{outline:0},[`& .${Ea.paper}`]:{outline:0,minWidth:Rn}}),mf=ue(Ur)({"&:first-of-type":{padding:0}});function pf(e){var r,t;const{children:a,onDismiss:n,open:s,slots:i,slotProps:l}=e,u=(r=i?.dialog)!=null?r:ff,c=(t=i?.mobileTransition)!=null?t:jn;return o.jsx(u,T({open:s,onClose:n},l?.dialog,{TransitionComponent:c,TransitionProps:l?.mobileTransition,PaperComponent:i?.mobilePaper,PaperProps:l?.mobilePaper,children:o.jsx(mf,{children:a})}))}function gf(e){return Ke("MuiPickersPopper",e)}Xe("MuiPickersPopper",["root","paper"]);function vf(e,r){return Array.isArray(r)?r.every(t=>e.indexOf(t)!==-1):e.indexOf(r)!==-1}const xf=(e,r)=>t=>{(t.key==="Enter"||t.key===" ")&&(e(t),t.preventDefault(),t.stopPropagation())},yn=(e=document)=>{const r=e.activeElement;return r?r.shadowRoot?yn(r.shadowRoot):r:null},yf="@media (pointer: fine)",wf="@media (prefers-reduced-motion: reduce)",Wt=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),So=Wt&&Wt[1]?parseInt(Wt[1],10):null,Mo=Wt&&Wt[2]?parseInt(Wt[2],10):null,bf=So&&So<10||Mo&&Mo<13||!1,Is=()=>bn(wf,{defaultMatches:!1})||bf,Df=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Pf=e=>{const{classes:r}=e;return Ge({root:["root"],paper:["paper"]},gf,r)},jf=ue(si,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e})=>({zIndex:e.zIndex.modal})),Cf=ue(st,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,r)=>r.paper})(({ownerState:e})=>T({outline:0,transformOrigin:"top center"},e.placement.includes("top")&&{transformOrigin:"bottom center"}));function Sf(e,r){return r.documentElement.clientWidth<e.clientX||r.documentElement.clientHeight<e.clientY}function Mf(e,r){const t=f.useRef(!1),a=f.useRef(!1),n=f.useRef(null),s=f.useRef(!1);f.useEffect(()=>{if(!e)return;function u(){s.current=!0}return document.addEventListener("mousedown",u,!0),document.addEventListener("touchstart",u,!0),()=>{document.removeEventListener("mousedown",u,!0),document.removeEventListener("touchstart",u,!0),s.current=!1}},[e]);const i=oe(u=>{if(!s.current)return;const c=a.current;a.current=!1;const d=$n(n.current);if(!n.current||"clientX"in u&&Sf(u,d))return;if(t.current){t.current=!1;return}let m;u.composedPath?m=u.composedPath().indexOf(n.current)>-1:m=!d.documentElement.contains(u.target)||n.current.contains(u.target),!m&&!c&&r(u)}),l=()=>{a.current=!0};return f.useEffect(()=>{if(e){const u=$n(n.current),c=()=>{t.current=!0};return u.addEventListener("touchstart",i),u.addEventListener("touchmove",c),()=>{u.removeEventListener("touchstart",i),u.removeEventListener("touchmove",c)}}},[e,i]),f.useEffect(()=>{if(e){const u=$n(n.current);return u.addEventListener("click",i),()=>{u.removeEventListener("click",i),a.current=!1}}},[e,i]),[n,l,l]}const Tf=f.forwardRef((e,r)=>{const{PaperComponent:t,popperPlacement:a,ownerState:n,children:s,paperSlotProps:i,paperClasses:l,onPaperClick:u,onPaperTouchStart:c}=e,d=Se(e,Df),m=T({},n,{placement:a}),g=Be({elementType:t,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:r},className:l,ownerState:m});return o.jsx(t,T({},d,g,{onClick:h=>{var v;u(h),(v=g.onClick)==null||v.call(g,h)},onTouchStart:h=>{var v;c(h),(v=g.onTouchStart)==null||v.call(g,h)},ownerState:m,children:s}))});function kf(e){var r,t,a,n;const s=He({props:e,name:"MuiPickersPopper"}),{anchorEl:i,children:l,containerRef:u=null,shouldRestoreFocus:c,onBlur:d,onDismiss:m,open:g,role:h,placement:v,slots:y,slotProps:b,reduceAnimations:P}=s;f.useEffect(()=>{function B(G){g&&(G.key==="Escape"||G.key==="Esc")&&m()}return document.addEventListener("keydown",B),()=>{document.removeEventListener("keydown",B)}},[m,g]);const w=f.useRef(null);f.useEffect(()=>{h==="tooltip"||c&&!c()||(g?w.current=yn(document):w.current&&w.current instanceof HTMLElement&&setTimeout(()=>{w.current instanceof HTMLElement&&w.current.focus()}))},[g,h,c]);const[p,M,C]=Mf(g,d??m),A=f.useRef(null),I=Tt(A,u),R=Tt(I,p),D=s,N=Pf(D),W=Is(),k=P??W,E=B=>{B.key==="Escape"&&(B.stopPropagation(),m())},j=((r=y?.desktopTransition)!=null?r:k)?jn:ai,x=(t=y?.desktopTrapFocus)!=null?t:oi,F=(a=y?.desktopPaper)!=null?a:Cf,$=(n=y?.popper)!=null?n:jf,V=Be({elementType:$,externalSlotProps:b?.popper,additionalProps:{transition:!0,role:h,open:g,anchorEl:i,placement:v,onKeyDown:E},className:N.root,ownerState:s});return o.jsx($,T({},V,{children:({TransitionProps:B,placement:G})=>o.jsx(x,T({open:g,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:h==="tooltip",isEnabled:()=>!0},b?.desktopTrapFocus,{children:o.jsx(j,T({},B,b?.desktopTransition,{children:o.jsx(Tf,{PaperComponent:F,ownerState:D,popperPlacement:G,ref:R,onPaperClick:M,onPaperTouchStart:C,paperClasses:N.paper,paperSlotProps:b?.desktopPaper,children:l})}))}))}))}const Sa=({timezone:e,value:r,defaultValue:t,onChange:a,valueManager:n})=>{var s,i;const l=Ie(),u=f.useRef(t),c=(s=r??u.current)!=null?s:n.emptyValue,d=f.useMemo(()=>n.getTimezone(l,c),[l,n,c]),m=oe(y=>d==null?y:n.setTimezone(l,d,y)),g=(i=e??d)!=null?i:"default",h=f.useMemo(()=>n.setTimezone(l,g,c),[n,l,g,c]),v=oe((y,...b)=>{const P=m(y);a?.(P,...b)});return{value:h,handleValueChange:v,timezone:g}},Ma=({name:e,timezone:r,value:t,defaultValue:a,onChange:n,valueManager:s})=>{const[i,l]=Dt({name:e,state:"value",controlled:t,default:a??s.emptyValue}),u=oe((c,...d)=>{l(c),n?.(c,...d)});return Sa({timezone:r,value:i,defaultValue:void 0,onChange:u,valueManager:s})};function Es(e,r,t,a){const{value:n,onError:s}=e,i=Ot(),l=f.useRef(a),u=r({adapter:i,value:n,props:e});return f.useEffect(()=>{s&&!t(u,l.current)&&s(u,n),l.current=u},[t,s,l,u,n]),u}const If=e=>{const r=Ie(),t=jt(),a=Ot(),s=mt().direction==="rtl",{valueManager:i,fieldValueManager:l,validator:u,internalProps:c,internalProps:{value:d,defaultValue:m,referenceDate:g,onChange:h,format:v,formatDensity:y="dense",selectedSections:b,onSelectedSectionsChange:P,shouldRespectLeadingZeros:w=!1,timezone:p}}=e,{timezone:M,value:C,handleValueChange:A}=Sa({timezone:p,value:d,defaultValue:m,onChange:h,valueManager:i}),I=f.useMemo(()=>Rh(r,M),[r,M]),R=f.useCallback((L,Y=null)=>l.getSectionsFromValue(r,L,Y,s,ie=>Do(r,M,t,v,ie,y,w,s)),[l,v,t,s,w,r,y,M]),D=f.useMemo(()=>l.getValueStrFromSections(R(i.emptyValue),s),[l,R,i.emptyValue,s]),[N,W]=f.useState(()=>{const L=R(C),Y={sections:L,value:C,referenceValue:i.emptyValue,tempValueStrAndroid:null},ie=Ch(L),De=i.getInitialReferenceValue({referenceDate:g,value:C,utils:r,props:c,granularity:ie,timezone:M});return T({},Y,{referenceValue:De})}),[k,E]=Dt({controlled:b,default:null,name:"useField",state:"selectedSectionIndexes"}),j=L=>{E(L),P?.(L),W(Y=>T({},Y,{selectedSectionQuery:null}))},x=f.useMemo(()=>{if(k==null)return null;if(k==="all")return{startIndex:0,endIndex:N.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof k=="number")return{startIndex:k,endIndex:k};if(typeof k=="string"){const L=N.sections.findIndex(Y=>Y.type===k);return{startIndex:L,endIndex:L}}return k},[k,N.sections]),F=({value:L,referenceValue:Y,sections:ie})=>{if(W(U=>T({},U,{sections:ie,value:L,referenceValue:Y,tempValueStrAndroid:null})),i.areValuesEqual(r,N.value,L))return;const De={validationError:u({adapter:a,value:L,props:T({},c,{value:L,timezone:M})})};A(L,De)},$=(L,Y)=>{const ie=[...N.sections];return ie[L]=T({},ie[L],{value:Y,modified:!0}),js(ie,s)},V=()=>{F({value:i.emptyValue,referenceValue:N.referenceValue,sections:R(i.emptyValue)})},B=()=>{if(x==null)return;const L=N.sections[x.startIndex],Y=l.getActiveDateManager(r,N,L),De=Y.getSections(N.sections).filter(he=>he.value!=="").length===(L.value===""?0:1),U=$(x.startIndex,""),te=De?null:r.date(new Date("")),re=Y.getNewValuesFromNewActiveDate(te);(te!=null&&!r.isValid(te))!=(Y.date!=null&&!r.isValid(Y.date))?F(T({},re,{sections:U})):W(he=>T({},he,re,{sections:U,tempValueStrAndroid:null}))},G=L=>{const Y=(U,te)=>{const re=r.parse(U,v);if(re==null||!r.isValid(re))return null;const he=Do(r,M,t,v,re,y,w,s);return jo(r,M,re,he,te,!1)},ie=l.parseValueStr(L,N.referenceValue,Y),De=l.updateReferenceValue(r,ie,N.referenceValue);F({value:ie,referenceValue:De,sections:R(ie,N.sections)})},_=({activeSection:L,newSectionValue:Y,shouldGoToNextSection:ie})=>{ie&&x&&x.startIndex<N.sections.length-1?j(x.startIndex+1):x&&x.startIndex!==x.endIndex&&j(x.startIndex);const De=l.getActiveDateManager(r,N,L),U=$(x.startIndex,Y),te=De.getSections(U),re=Eh(r,te);let he,ae;if(re!=null&&r.isValid(re)){const se=jo(r,M,re,te,De.referenceDate,!0);he=De.getNewValuesFromNewActiveDate(se),ae=!0}else he=De.getNewValuesFromNewActiveDate(re),ae=(re!=null&&!r.isValid(re))!=(De.date!=null&&!r.isValid(De.date));return ae?F(T({},he,{sections:U})):W(se=>T({},se,he,{sections:U,tempValueStrAndroid:null}))},z=L=>W(Y=>T({},Y,{tempValueStrAndroid:L}));return f.useEffect(()=>{const L=R(N.value);W(Y=>T({},Y,{sections:L}))},[v,r.locale]),f.useEffect(()=>{let L=!1;i.areValuesEqual(r,N.value,C)?L=i.getTimezone(r,N.value)!==i.getTimezone(r,C):L=!0,L&&W(Y=>T({},Y,{value:C,referenceValue:l.updateReferenceValue(r,C,Y.referenceValue),sections:R(C)}))},[C]),{state:N,selectedSectionIndexes:x,setSelectedSections:j,clearValue:V,clearActiveSection:B,updateSectionValue:_,updateValueFromValueStr:G,setTempAndroidValueStr:z,sectionsValueBoundaries:I,placeholder:D,timezone:M}},Ef=5e3,At=e=>e.saveQuery!=null,Of=({sections:e,updateSectionValue:r,sectionsValueBoundaries:t,setTempAndroidValueStr:a,timezone:n})=>{const s=Ie(),[i,l]=f.useState(null),u=oe(()=>l(null));f.useEffect(()=>{var h;i!=null&&((h=e[i.sectionIndex])==null?void 0:h.type)!==i.sectionType&&u()},[e,i,u]),f.useEffect(()=>{if(i!=null){const h=setTimeout(()=>u(),Ef);return()=>{window.clearTimeout(h)}}return()=>{}},[i,u]);const c=({keyPressed:h,sectionIndex:v},y,b)=>{const P=h.toLowerCase(),w=e[v];if(i!=null&&(!b||b(i.value))&&i.sectionIndex===v){const M=`${i.value}${P}`,C=y(M,w);if(!At(C))return l({sectionIndex:v,value:M,sectionType:w.type}),C}const p=y(P,w);return At(p)&&!p.saveQuery?(u(),null):(l({sectionIndex:v,value:P,sectionType:w.type}),At(p)?null:p)},d=h=>{const v=(P,w,p)=>{const M=w.filter(C=>C.toLowerCase().startsWith(p));return M.length===0?{saveQuery:!1}:{sectionValue:M[0],shouldGoToNextSection:M.length===1}},y=(P,w,p,M)=>{const C=A=>bs(s,n,w.type,A);if(w.contentType==="letter")return v(w.format,C(w.format),P);if(p&&M!=null&&ws(s,p).contentType==="letter"){const A=C(p),I=v(p,A,P);return At(I)?{saveQuery:!1}:T({},I,{sectionValue:M(I.sectionValue,A)})}return{saveQuery:!1}};return c(h,(P,w)=>{switch(w.type){case"month":{const p=M=>bo(s,M,s.formats.month,w.format);return y(P,w,s.formats.month,p)}case"weekDay":{const p=(M,C)=>C.indexOf(M).toString();return y(P,w,s.formats.weekday,p)}case"meridiem":return y(P,w);default:return{saveQuery:!1}}})},m=h=>{const v=(b,P)=>{const w=+`${b}`,p=t[P.type]({currentDate:null,format:P.format,contentType:P.contentType});if(w>p.maximum)return{saveQuery:!1};if(w<p.minimum)return{saveQuery:!0};const M=+`${b}0`>p.maximum||b.length===p.maximum.toString().length;return{sectionValue:Ps(s,n,w,p,P),shouldGoToNextSection:M}};return c(h,(b,P)=>{if(P.contentType==="digit"||P.contentType==="digit-with-letter")return v(b,P);if(P.type==="month"){Ss(s,n,"digit","month","MM");const w=v(b,{type:P.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(At(w))return w;const p=bo(s,w.sectionValue,"MM",P.format);return T({},w,{sectionValue:p})}if(P.type==="weekDay"){const w=v(b,P);if(At(w))return w;const p=In(s,n,P.format)[Number(w.sectionValue)-1];return T({},w,{sectionValue:p})}return{saveQuery:!1}},b=>!Number.isNaN(Number(b)))};return{applyCharacterEditing:oe(h=>{const v=e[h.sectionIndex],b=h.keyPressed!==" "&&!Number.isNaN(Number(h.keyPressed))?m(h):d(h);b==null?a(null):r({activeSection:v,newSectionValue:b.sectionValue,shouldGoToNextSection:b.shouldGoToNextSection})}),resetCharacterQuery:u}},Rf=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],_f=e=>{const r=Ie(),{state:t,selectedSectionIndexes:a,setSelectedSections:n,clearValue:s,clearActiveSection:i,updateSectionValue:l,updateValueFromValueStr:u,setTempAndroidValueStr:c,sectionsValueBoundaries:d,placeholder:m,timezone:g}=If(e),{inputRef:h,internalProps:v,internalProps:{readOnly:y=!1,unstableFieldRef:b,minutesStep:P},forwardedProps:{onClick:w,onKeyDown:p,onFocus:M,onBlur:C,onMouseUp:A,onPaste:I,error:R,clearable:D,onClear:N,disabled:W},fieldValueManager:k,valueManager:E,validator:j}=e,x=Se(e.forwardedProps,Rf),{applyCharacterEditing:F,resetCharacterQuery:$}=Of({sections:t.sections,updateSectionValue:l,sectionsValueBoundaries:d,setTempAndroidValueStr:c,timezone:g}),V=f.useRef(null),B=Tt(h,V),G=f.useRef(void 0),z=mt().direction==="rtl",L=f.useMemo(()=>Fh(t.sections,z),[t.sections,z]),Y=()=>{var X;if(y){n(null);return}const ne=(X=V.current.selectionStart)!=null?X:0;let fe;ne<=t.sections[0].startInInput||ne>=t.sections[t.sections.length-1].endInInput?fe=1:fe=t.sections.findIndex(Ue=>Ue.startInInput-Ue.startSeparator.length>ne);const _e=fe===-1?t.sections.length-1:fe-1;n(_e)},ie=oe((X,...ne)=>{X.isDefaultPrevented()||(w?.(X,...ne),Y())}),De=oe(X=>{A?.(X),X.preventDefault()}),U=oe((...X)=>{M?.(...X);const ne=V.current;window.clearTimeout(G.current),G.current=setTimeout(()=>{!ne||ne!==V.current||a!=null||y||(ne.value.length&&Number(ne.selectionEnd)-Number(ne.selectionStart)===ne.value.length?n("all"):Y())})}),te=oe((...X)=>{C?.(...X),n(null)}),re=oe(X=>{if(I?.(X),y){X.preventDefault();return}const ne=X.clipboardData.getData("text");if(a&&a.startIndex===a.endIndex){const fe=t.sections[a.startIndex],_e=/^[a-zA-Z]+$/.test(ne),Ue=/^[0-9]+$/.test(ne),qe=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(ne);if(fe.contentType==="letter"&&_e||fe.contentType==="digit"&&Ue||fe.contentType==="digit-with-letter"&&qe){$(),l({activeSection:fe,newSectionValue:ne,shouldGoToNextSection:!0}),X.preventDefault();return}if(_e||Ue){X.preventDefault();return}}X.preventDefault(),$(),u(ne)}),he=oe(X=>{if(y)return;const ne=X.target.value;if(ne===""){$(),s();return}const fe=X.nativeEvent.data,_e=fe&&fe.length>1,Ue=_e?fe:ne,qe=Ft(Ue);if(a==null||_e){u(_e?fe:qe);return}let it;if(a.startIndex===0&&a.endIndex===t.sections.length-1&&qe.length===1)it=qe;else{const Ze=Ft(k.getValueStrFromSections(t.sections,z));let Qt=-1,Gt=-1;for(let ot=0;ot<Ze.length;ot+=1)Qt===-1&&Ze[ot]!==qe[ot]&&(Qt=ot),Gt===-1&&Ze[Ze.length-ot-1]!==qe[qe.length-ot-1]&&(Gt=ot);const yt=t.sections[a.startIndex];if(Qt<yt.start||Ze.length-Gt-1>yt.end)return;const Kt=qe.length-Ze.length+yt.end-Ft(yt.endSeparator||"").length;it=qe.slice(yt.start+Ft(yt.startSeparator||"").length,Kt)}if(it.length===0){Ah()?c(Ue):($(),i());return}F({keyPressed:it,sectionIndex:a.startIndex})}),ae=oe(X=>{switch(p?.(X),!0){case(X.key==="a"&&(X.ctrlKey||X.metaKey)):{X.preventDefault(),n("all");break}case X.key==="ArrowRight":{if(X.preventDefault(),a==null)n(L.startIndex);else if(a.startIndex!==a.endIndex)n(a.endIndex);else{const ne=L.neighbors[a.startIndex].rightIndex;ne!==null&&n(ne)}break}case X.key==="ArrowLeft":{if(X.preventDefault(),a==null)n(L.endIndex);else if(a.startIndex!==a.endIndex)n(a.startIndex);else{const ne=L.neighbors[a.startIndex].leftIndex;ne!==null&&n(ne)}break}case X.key==="Delete":{if(X.preventDefault(),y)break;a==null||a.startIndex===0&&a.endIndex===t.sections.length-1?s():i(),$();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(X.key):{if(X.preventDefault(),y||a==null)break;const ne=t.sections[a.startIndex],fe=k.getActiveDateManager(r,t,ne),_e=Th(r,g,ne,X.key,d,fe.date,{minutesStep:P});l({activeSection:ne,newSectionValue:_e,shouldGoToNextSection:!1});break}}});Bt(()=>{if(!V.current)return;if(a==null){V.current.scrollLeft&&(V.current.scrollLeft=0);return}const X=t.sections[a.startIndex],ne=t.sections[a.endIndex];let fe=X.startInInput,_e=ne.endInInput;if(a.shouldSelectBoundarySelectors&&(fe-=X.startSeparator.length,_e+=ne.endSeparator.length),fe!==V.current.selectionStart||_e!==V.current.selectionEnd){const Ue=V.current.scrollTop;V.current===yn(document)&&V.current.setSelectionRange(fe,_e),V.current.scrollTop=Ue}});const se=Es(T({},v,{value:t.value,timezone:g}),j,E.isSameError,E.defaultErrorState),K=f.useMemo(()=>R!==void 0?R:E.hasError(se),[E,se,R]);f.useEffect(()=>{!K&&!a&&$()},[t.referenceValue,a,K]),f.useEffect(()=>(V.current&&V.current===document.activeElement&&n("all"),()=>window.clearTimeout(G.current)),[]),f.useEffect(()=>{t.tempValueStrAndroid!=null&&a!=null&&($(),i())},[t.tempValueStrAndroid]);const ce=f.useMemo(()=>{var X;return(X=t.tempValueStrAndroid)!=null?X:k.getValueStrFromSections(t.sections,z)},[t.sections,k,t.tempValueStrAndroid,z]),Ve=f.useMemo(()=>a==null||t.sections[a.startIndex].contentType==="letter"?"text":"numeric",[a,t.sections]),Re=V.current&&V.current===yn(document),xt=E.areValuesEqual(r,t.value,E.emptyValue),le=!Re&&xt;f.useImperativeHandle(b,()=>({getSections:()=>t.sections,getActiveSectionIndex:()=>{var X,ne,fe;const _e=(X=V.current.selectionStart)!=null?X:0,Ue=(ne=V.current.selectionEnd)!=null?ne:0,qe=!!((fe=V.current)!=null&&fe.readOnly);if(_e===0&&Ue===0||qe)return null;const it=_e<=t.sections[0].startInInput?1:t.sections.findIndex(Ze=>Ze.startInInput-Ze.startSeparator.length>_e);return it===-1?t.sections.length-1:it-1},setSelectedSections:X=>n(X)}));const de=oe((X,...ne)=>{var fe;X.preventDefault(),N?.(X,...ne),s(),V==null||(fe=V.current)==null||fe.focus(),n(0)});return T({placeholder:m,autoComplete:"off",disabled:!!W},x,{value:le?"":ce,inputMode:Ve,readOnly:y,onClick:ie,onFocus:U,onBlur:te,onPaste:re,onChange:he,onKeyDown:ae,onMouseUp:De,onClear:de,error:K,ref:B,clearable:!!(D&&!xt&&!y&&!W)})},Af=({open:e,onOpen:r,onClose:t})=>{const a=f.useRef(typeof e=="boolean").current,[n,s]=f.useState(!1);f.useEffect(()=>{if(a){if(typeof e!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");s(e)}},[a,e]);const i=f.useCallback(l=>{a||s(l),l&&r&&r(),!l&&t&&t()},[a,r,t]);return{isOpen:n,setIsOpen:i}},Ff=e=>{const{action:r,hasChanged:t,dateState:a,isControlled:n}=e,s=!n&&!a.hasBeenModifiedSinceMount;return r.name==="setValueFromField"?!0:r.name==="setValueFromAction"?s&&["accept","today","clear"].includes(r.pickerAction)?!0:t(a.lastPublishedValue):r.name==="setValueFromView"&&r.selectionState!=="shallow"||r.name==="setValueFromShortcut"?s?!0:t(a.lastPublishedValue):!1},Nf=e=>{const{action:r,hasChanged:t,dateState:a,isControlled:n,closeOnSelect:s}=e,i=!n&&!a.hasBeenModifiedSinceMount;return r.name==="setValueFromAction"?i&&["accept","today","clear"].includes(r.pickerAction)?!0:t(a.lastCommittedValue):r.name==="setValueFromView"&&r.selectionState==="finish"&&s?i?!0:t(a.lastCommittedValue):r.name==="setValueFromShortcut"?r.changeImportance==="accept"&&t(a.lastCommittedValue):!1},Vf=e=>{const{action:r,closeOnSelect:t}=e;return r.name==="setValueFromAction"?!0:r.name==="setValueFromView"?r.selectionState==="finish"&&t:r.name==="setValueFromShortcut"?r.changeImportance==="accept":!1},Lf=({props:e,valueManager:r,valueType:t,wrapperVariant:a,validator:n})=>{const{onAccept:s,onChange:i,value:l,defaultValue:u,closeOnSelect:c=a==="desktop",selectedSections:d,onSelectedSectionsChange:m,timezone:g}=e,{current:h}=f.useRef(u),{current:v}=f.useRef(l!==void 0),y=Ie(),b=Ot(),[P,w]=Dt({controlled:d,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:p,setIsOpen:M}=Af(e),[C,A]=f.useState(()=>{let U;return l!==void 0?U=l:h!==void 0?U=h:U=r.emptyValue,{draft:U,lastPublishedValue:U,lastCommittedValue:U,lastControlledValue:l,hasBeenModifiedSinceMount:!1}}),{timezone:I,handleValueChange:R}=Sa({timezone:g,value:l,defaultValue:h,onChange:i,valueManager:r});Es(T({},e,{value:C.draft,timezone:I}),n,r.isSameError,r.defaultErrorState);const D=oe(U=>{const te={action:U,dateState:C,hasChanged:se=>!r.areValuesEqual(y,U.value,se),isControlled:v,closeOnSelect:c},re=Ff(te),he=Nf(te),ae=Vf(te);if(A(se=>T({},se,{draft:U.value,lastPublishedValue:re?U.value:se.lastPublishedValue,lastCommittedValue:he?U.value:se.lastCommittedValue,hasBeenModifiedSinceMount:!0})),re){const K={validationError:U.name==="setValueFromField"?U.context.validationError:n({adapter:b,value:U.value,props:T({},e,{value:U.value,timezone:I})})};U.name==="setValueFromShortcut"&&U.shortcut!=null&&(K.shortcut=U.shortcut),R(U.value,K)}he&&s&&s(U.value),ae&&M(!1)});if(l!==void 0&&(C.lastControlledValue===void 0||!r.areValuesEqual(y,C.lastControlledValue,l))){const U=r.areValuesEqual(y,C.draft,l);A(te=>T({},te,{lastControlledValue:l},U?{}:{lastCommittedValue:l,lastPublishedValue:l,draft:l,hasBeenModifiedSinceMount:!0}))}const N=oe(()=>{D({value:r.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),W=oe(()=>{D({value:C.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),k=oe(()=>{D({value:C.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),E=oe(()=>{D({value:C.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),j=oe(()=>{D({value:r.getTodayValue(y,I,t),name:"setValueFromAction",pickerAction:"today"})}),x=oe(()=>M(!0)),F=oe(()=>M(!1)),$=oe((U,te="partial")=>D({name:"setValueFromView",value:U,selectionState:te})),V=oe((U,te,re)=>D({name:"setValueFromShortcut",value:U,changeImportance:te??"accept",shortcut:re})),B=oe((U,te)=>D({name:"setValueFromField",value:U,context:te})),G=oe(U=>{w(U),m?.(U)}),_={onClear:N,onAccept:W,onDismiss:k,onCancel:E,onSetToday:j,onOpen:x,onClose:F},z={value:C.draft,onChange:B,selectedSections:P,onSelectedSectionsChange:G},L=f.useMemo(()=>r.cleanValue(y,C.draft),[y,r,C.draft]),Y={value:L,onChange:$,onClose:F,open:p,onSelectedSectionsChange:G},De=T({},_,{value:L,onChange:$,onSelectShortcut:V,isValid:U=>{const te=n({adapter:b,value:U,props:T({},e,{value:U,timezone:I})});return!r.hasError(te)}});return{open:p,fieldProps:z,viewProps:Y,layoutProps:De,actions:_}};function Os({onChange:e,onViewChange:r,openTo:t,view:a,views:n,autoFocus:s,focusedView:i,onFocusedViewChange:l}){var u,c;const d=f.useRef(t),m=f.useRef(n),g=f.useRef(n.includes(t)?t:n[0]),[h,v]=Dt({name:"useViews",state:"view",controlled:a,default:g.current}),y=f.useRef(s?h:null),[b,P]=Dt({name:"useViews",state:"focusedView",controlled:i,default:y.current});f.useEffect(()=>{(d.current&&d.current!==t||m.current&&m.current.some(D=>!n.includes(D)))&&(v(n.includes(t)?t:n[0]),m.current=n,d.current=t)},[t,v,h,n]);const w=n.indexOf(h),p=(u=n[w-1])!=null?u:null,M=(c=n[w+1])!=null?c:null,C=oe((D,N)=>{P(N?D:W=>D===W?null:W),l?.(D,N)}),A=oe(D=>{C(D,!0),D!==h&&(v(D),r&&r(D))}),I=oe(()=>{M&&A(M)}),R=oe((D,N,W)=>{const k=N==="finish",E=W?n.indexOf(W)<n.length-1:!!M;if(e(D,k&&E?"partial":N,W),W&&W!==h){const x=n[n.indexOf(W)+1];x&&A(x)}else k&&I()});return{view:h,setView:A,focusedView:b,setFocusedView:C,nextView:M,previousView:p,defaultView:n.includes(t)?t:n[0],goToNextView:I,setValueAndGoToNextView:R}}const Wf=["className","sx"],$f=({props:e,propsFromPickerValue:r,additionalViewProps:t,inputRef:a,autoFocusView:n})=>{const{onChange:s,open:i,onSelectedSectionsChange:l,onClose:u}=r,{view:c,views:d,openTo:m,onViewChange:g,viewRenderers:h,timezone:v}=e,y=Se(e,Wf),{view:b,setView:P,defaultView:w,focusedView:p,setFocusedView:M,setValueAndGoToNextView:C}=Os({view:c,views:d,openTo:m,onChange:s,onViewChange:g,autoFocus:n}),{hasUIView:A,viewModeLookup:I}=f.useMemo(()=>d.reduce((j,x)=>{let F;return h[x]!=null?F="UI":F="field",j.viewModeLookup[x]=F,F==="UI"&&(j.hasUIView=!0),j},{hasUIView:!1,viewModeLookup:{}}),[h,d]),R=f.useMemo(()=>d.reduce((j,x)=>h[x]!=null&&Ph(x)?j+1:j,0),[h,d]),D=I[b],N=oe(()=>D==="UI"),[W,k]=f.useState(D==="UI"?b:null);return W!==b&&I[b]==="UI"&&k(b),Bt(()=>{D==="field"&&i&&(u(),setTimeout(()=>{a?.current.focus(),l(b)}))},[b]),Bt(()=>{if(!i)return;let j=b;D==="field"&&W!=null&&(j=W),j!==w&&I[j]==="UI"&&I[w]==="UI"&&(j=w),j!==b&&P(j),M(j,!0)},[i]),{hasUIView:A,shouldRestoreFocus:N,layoutProps:{views:d,view:W,onViewChange:P},renderCurrentView:()=>{if(W==null)return null;const j=h[W];return j==null?null:j(T({},y,t,r,{views:d,timezone:v,onChange:C,view:W,onViewChange:P,focusedView:p,onFocusedViewChange:M,showViewSwitcher:R>1,timeViewsCount:R}))}}};function To(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Bf=(e,r)=>{const[t,a]=f.useState(To);return Bt(()=>{const s=()=>{a(To())};return window.addEventListener("orientationchange",s),()=>{window.removeEventListener("orientationchange",s)}},[]),vf(e,["hours","minutes","seconds"])?!1:(r||t)==="landscape"},Hf=({props:e,propsFromPickerValue:r,propsFromPickerViews:t,wrapperVariant:a})=>{const{orientation:n}=e,s=Bf(t.views,n);return{layoutProps:T({},t,r,{isLandscape:s,wrapperVariant:a,disabled:e.disabled,readOnly:e.readOnly})}},Rs=({props:e,valueManager:r,valueType:t,wrapperVariant:a,inputRef:n,additionalViewProps:s,validator:i,autoFocusView:l})=>{const u=Lf({props:e,valueManager:r,valueType:t,wrapperVariant:a,validator:i}),c=$f({props:e,inputRef:n,additionalViewProps:s,autoFocusView:l,propsFromPickerValue:u.viewProps}),d=Hf({props:e,wrapperVariant:a,propsFromPickerValue:u.layoutProps,propsFromPickerViews:c.layoutProps});return{open:u.open,actions:u.actions,fieldProps:u.fieldProps,renderCurrentView:c.renderCurrentView,hasUIView:c.hasUIView,shouldRestoreFocus:c.shouldRestoreFocus,layoutProps:d.layoutProps}};function _s(e){return Ke("MuiPickersLayout",e)}const ta=Xe("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),zf=["onAccept","onClear","onCancel","onSetToday","actions"];function Yf(e){const{onAccept:r,onClear:t,onCancel:a,onSetToday:n,actions:s}=e,i=Se(e,zf),l=jt();if(s==null||s.length===0)return null;const u=s?.map(c=>{switch(c){case"clear":return o.jsx(Me,{onClick:t,children:l.clearButtonLabel},c);case"cancel":return o.jsx(Me,{onClick:a,children:l.cancelButtonLabel},c);case"accept":return o.jsx(Me,{onClick:r,children:l.okButtonLabel},c);case"today":return o.jsx(Me,{onClick:n,children:l.todayButtonLabel},c);default:return null}});return o.jsx(qr,T({},i,{children:u}))}const Uf=["items","changeImportance","isLandscape","onChange","isValid"],qf=["getValue"];function Qf(e){const{items:r,changeImportance:t,onChange:a,isValid:n}=e,s=Se(e,Uf);if(r==null||r.length===0)return null;const i=r.map(l=>{let{getValue:u}=l,c=Se(l,qf);const d=u({isValid:n});return{label:c.label,onClick:()=>{a(d,t,c)},disabled:!n(d)}});return o.jsx(Nt,T({dense:!0,sx:[{maxHeight:Ca,maxWidth:200,overflow:"auto"},...Array.isArray(s.sx)?s.sx:[s.sx]]},s,{children:i.map(l=>o.jsx(ct,{children:o.jsx(gt,T({},l))},l.label))}))}function Gf(e){return e.view!==null}const Kf=e=>{const{classes:r,isLandscape:t}=e;return Ge({root:["root",t&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},_s,r)},Xf=e=>{var r,t;const{wrapperVariant:a,onAccept:n,onClear:s,onCancel:i,onSetToday:l,view:u,views:c,onViewChange:d,value:m,onChange:g,onSelectShortcut:h,isValid:v,isLandscape:y,disabled:b,readOnly:P,children:w,components:p,componentsProps:M,slots:C,slotProps:A}=e,I=C??Ts(p),R=A??M,D=Kf(e),N=(r=I?.actionBar)!=null?r:Yf,W=Be({elementType:N,externalSlotProps:R?.actionBar,additionalProps:{onAccept:n,onClear:s,onCancel:i,onSetToday:l,actions:a==="desktop"?[]:["cancel","accept"],className:D.actionBar},ownerState:T({},e,{wrapperVariant:a})}),k=o.jsx(N,T({},W)),E=I?.toolbar,j=Be({elementType:E,externalSlotProps:R?.toolbar,additionalProps:{isLandscape:y,onChange:g,value:m,view:u,onViewChange:d,views:c,disabled:b,readOnly:P,className:D.toolbar},ownerState:T({},e,{wrapperVariant:a})}),x=Gf(j)&&E?o.jsx(E,T({},j)):null,F=w,$=I?.tabs,V=u&&$?o.jsx($,T({view:u,onViewChange:d,className:D.tabs},R?.tabs)):null,B=(t=I?.shortcuts)!=null?t:Qf,G=Be({elementType:B,externalSlotProps:R?.shortcuts,additionalProps:{isValid:v,isLandscape:y,onChange:h,className:D.shortcuts},ownerState:{isValid:v,isLandscape:y,onChange:h,className:D.shortcuts,wrapperVariant:a}}),_=u&&B?o.jsx(B,T({},G)):null;return{toolbar:x,content:F,tabs:V,actionBar:k,shortcuts:_}},Zf=e=>{const{isLandscape:r,classes:t}=e;return Ge({root:["root",r&&"landscape"],contentWrapper:["contentWrapper"]},_s,t)},As=ue("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e,ownerState:r})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${ta.toolbar}`]:r.isLandscape?{gridColumn:e.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${ta.shortcuts}`]:r.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:e.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${ta.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));As.propTypes={as:S.elementType,ownerState:S.shape({isLandscape:S.bool.isRequired}).isRequired,sx:S.oneOfType([S.arrayOf(S.oneOfType([S.func,S.object,S.bool])),S.func,S.object])};const Jf=ue("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,r)=>r.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),Fs=function(r){const t=He({props:r,name:"MuiPickersLayout"}),{toolbar:a,content:n,tabs:s,actionBar:i,shortcuts:l}=Xf(t),{sx:u,className:c,isLandscape:d,ref:m,wrapperVariant:g}=t,h=t,v=Zf(h);return o.jsxs(As,{ref:m,sx:u,className:Ye(c,v.root),ownerState:h,children:[d?l:a,d?a:l,o.jsx(Jf,{className:v.contentWrapper,children:g==="desktop"?o.jsxs(f.Fragment,{children:[n,s]}):o.jsxs(f.Fragment,{children:[s,n]})}),i]})};function em(e,{disableFuture:r,maxDate:t,timezone:a}){const n=Ie();return f.useMemo(()=>{const s=n.dateWithTimezone(void 0,a),i=n.startOfMonth(r&&n.isBefore(s,t)?s:t);return!n.isAfter(i,e)},[r,t,e,n,a])}function tm(e,{disablePast:r,minDate:t,timezone:a}){const n=Ie();return f.useMemo(()=>{const s=n.dateWithTimezone(void 0,a),i=n.startOfMonth(r&&n.isAfter(s,t)?s:t);return!n.isBefore(i,e)},[r,t,e,n,a])}const Ns=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],rm=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],nm=["minDateTime","maxDateTime"],am=[...Ns,...rm,...nm],Vs=e=>am.reduce((r,t)=>(e.hasOwnProperty(t)&&(r[t]=e[t]),r),{}),om=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],sm=(e,r)=>{const t=T({},e),a={},n=s=>{t.hasOwnProperty(s)&&(a[s]=t[s],delete t[s])};return om.forEach(n),Ns.forEach(n),{forwardedProps:t,internalProps:a}},_n=({props:e,value:r,adapter:t})=>{if(r===null)return null;const{shouldDisableDate:a,shouldDisableMonth:n,shouldDisableYear:s,disablePast:i,disableFuture:l,timezone:u}=e,c=t.utils.dateWithTimezone(void 0,u),d=at(t.utils,e.minDate,t.defaultDates.minDate),m=at(t.utils,e.maxDate,t.defaultDates.maxDate);switch(!0){case!t.utils.isValid(r):return"invalidDate";case!!(a&&a(r)):return"shouldDisableDate";case!!(n&&n(r)):return"shouldDisableMonth";case!!(s&&s(r)):return"shouldDisableYear";case!!(l&&t.utils.isAfterDay(r,c)):return"disableFuture";case!!(i&&t.utils.isBeforeDay(r,c)):return"disablePast";case!!(d&&t.utils.isBeforeDay(r,d)):return"minDate";case!!(m&&t.utils.isAfterDay(r,m)):return"maxDate";default:return null}};function im(e){return Ke("MuiPickersDay",e)}const Ct=Xe("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),lm=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],cm=e=>{const{selected:r,disableMargin:t,disableHighlightToday:a,today:n,disabled:s,outsideCurrentMonth:i,showDaysOutsideCurrentMonth:l,classes:u}=e,c=i&&!l;return Ge({root:["root",r&&!c&&"selected",s&&"disabled",!t&&"dayWithMargin",!a&&n&&"today",i&&l&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},im,u)},Ls=({theme:e,ownerState:r})=>T({},e.typography.caption,{width:Gr,height:Gr,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ht(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:Ht(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${Ct.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${Ct.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${Ct.disabled}:not(.${Ct.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${Ct.disabled}&.${Ct.selected}`]:{opacity:.6}},!r.disableMargin&&{margin:`0 ${On}px`},r.outsideCurrentMonth&&r.showDaysOutsideCurrentMonth&&{color:(e.vars||e).palette.text.secondary},!r.disableHighlightToday&&r.today&&{[`&:not(.${Ct.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}),Ws=(e,r)=>{const{ownerState:t}=e;return[r.root,!t.disableMargin&&r.dayWithMargin,!t.disableHighlightToday&&t.today&&r.today,!t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&r.dayOutsideMonth,t.outsideCurrentMonth&&!t.showDaysOutsideCurrentMonth&&r.hiddenDaySpacingFiller]},um=ue(ii,{name:"MuiPickersDay",slot:"Root",overridesResolver:Ws})(Ls),dm=ue("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:Ws})(({theme:e,ownerState:r})=>T({},Ls({theme:e,ownerState:r}),{opacity:0,pointerEvents:"none"})),Sr=()=>{},hm=f.forwardRef(function(r,t){const a=He({props:r,name:"MuiPickersDay"}),{autoFocus:n=!1,className:s,day:i,disabled:l=!1,disableHighlightToday:u=!1,disableMargin:c=!1,isAnimating:d,onClick:m,onDaySelect:g,onFocus:h=Sr,onBlur:v=Sr,onKeyDown:y=Sr,onMouseDown:b=Sr,onMouseEnter:P=Sr,outsideCurrentMonth:w,selected:p=!1,showDaysOutsideCurrentMonth:M=!1,children:C,today:A=!1}=a,I=Se(a,lm),R=T({},a,{autoFocus:n,disabled:l,disableHighlightToday:u,disableMargin:c,selected:p,showDaysOutsideCurrentMonth:M,today:A}),D=cm(R),N=Ie(),W=f.useRef(null),k=Tt(W,t);Bt(()=>{n&&!l&&!d&&!w&&W.current.focus()},[n,l,d,w]);const E=x=>{b(x),w&&x.preventDefault()},j=x=>{l||g(i),w&&x.currentTarget.focus(),m&&m(x)};return w&&!M?o.jsx(dm,{className:Ye(D.root,D.hiddenDaySpacingFiller,s),ownerState:R,role:I.role}):o.jsx(um,T({className:Ye(D.root,s),ref:k,centerRipple:!0,disabled:l,tabIndex:p?0:-1,onKeyDown:x=>y(x,i),onFocus:x=>h(x,i),onBlur:x=>v(x,i),onMouseEnter:x=>P(x,i),onClick:j,onMouseDown:E},I,{ownerState:R,children:C||N.format(i,"dayOfMonth")}))}),fm=f.memo(hm),mm=e=>Ke("MuiPickersSlideTransition",e),rt=Xe("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),pm=["children","className","reduceAnimations","slideDirection","transKey","classes"],gm=e=>{const{classes:r,slideDirection:t}=e,a={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return Ge(a,mm,r)},vm=ue(Yo,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,r)=>[r.root,{[`.${rt["slideEnter-left"]}`]:r["slideEnter-left"]},{[`.${rt["slideEnter-right"]}`]:r["slideEnter-right"]},{[`.${rt.slideEnterActive}`]:r.slideEnterActive},{[`.${rt.slideExit}`]:r.slideExit},{[`.${rt["slideExitActiveLeft-left"]}`]:r["slideExitActiveLeft-left"]},{[`.${rt["slideExitActiveLeft-right"]}`]:r["slideExitActiveLeft-right"]}]})(({theme:e})=>{const r=e.transitions.create("transform",{duration:e.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${rt["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${rt["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${rt.slideEnterActive}`]:{transform:"translate(0%)",transition:r},[`& .${rt.slideExit}`]:{transform:"translate(0%)"},[`& .${rt["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:r,zIndex:0},[`& .${rt["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:r,zIndex:0}}});function xm(e){const r=He({props:e,name:"MuiPickersSlideTransition"}),{children:t,className:a,reduceAnimations:n,transKey:s}=r,i=Se(r,pm),l=gm(r),u=mt();if(n)return o.jsx("div",{className:Ye(l.root,a),children:t});const c={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return o.jsx(vm,{className:Ye(l.root,a),childFactory:d=>f.cloneElement(d,{classNames:c}),role:"presentation",children:o.jsx(li,T({mountOnEnter:!0,unmountOnExit:!0,timeout:u.transitions.duration.complex,classNames:c},i,{children:t}),s)})}const $s=({shouldDisableDate:e,shouldDisableMonth:r,shouldDisableYear:t,minDate:a,maxDate:n,disableFuture:s,disablePast:i,timezone:l})=>{const u=Ot();return f.useCallback(c=>_n({adapter:u,value:c,props:{shouldDisableDate:e,shouldDisableMonth:r,shouldDisableYear:t,minDate:a,maxDate:n,disableFuture:s,disablePast:i,timezone:l}})!==null,[u,e,r,t,a,n,s,i,l])},ym=e=>Ke("MuiDayCalendar",e);Xe("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const wm=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],bm=["ownerState"],Dm=e=>{const{classes:r}=e;return Ge({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},ym,r)},Bs=(Gr+On*2)*6,Pm=ue("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(e,r)=>r.root})({}),jm=ue("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,r)=>r.header})({display:"flex",justifyContent:"center",alignItems:"center"}),Cm=ue(O,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,r)=>r.weekDayLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),Sm=ue(O,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(e,r)=>r.weekNumberLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.disabled})),Mm=ue(O,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(e,r)=>r.weekNumber})(({theme:e})=>T({},e.typography.caption,{width:Gr,height:Gr,padding:0,margin:`0 ${On}px`,color:e.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),Tm=ue("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,r)=>r.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:Bs}),km=ue(xm,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,r)=>r.slideTransition})({minHeight:Bs}),Im=ue("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,r)=>r.monthContainer})({overflow:"hidden"}),Em=ue("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,r)=>r.weekContainer})({margin:`${On}px 0`,display:"flex",justifyContent:"center"});function Om(e){var r,t,a;let{parentProps:n,day:s,focusableDay:i,selectedDays:l,isDateDisabled:u,currentMonthNumber:c,isViewFocused:d}=e,m=Se(e,wm);const{disabled:g,disableHighlightToday:h,isMonthSwitchingAnimating:v,showDaysOutsideCurrentMonth:y,components:b,componentsProps:P,slots:w,slotProps:p,timezone:M}=n,C=Ie(),A=En(M),I=i!==null&&C.isSameDay(s,i),R=l.some($=>C.isSameDay($,s)),D=C.isSameDay(s,A),N=(r=(t=w?.day)!=null?t:b?.Day)!=null?r:fm,W=Be({elementType:N,externalSlotProps:(a=p?.day)!=null?a:P?.day,additionalProps:T({disableHighlightToday:h,showDaysOutsideCurrentMonth:y,role:"gridcell",isAnimating:v,"data-timestamp":C.toJsDate(s).valueOf()},m),ownerState:T({},n,{day:s,selected:R})}),k=Se(W,bm),E=f.useMemo(()=>g||u(s),[g,u,s]),j=f.useMemo(()=>C.getMonth(s)!==c,[C,s,c]),x=f.useMemo(()=>{const $=C.startOfMonth(C.setMonth(s,c));return y?C.isSameDay(s,C.startOfWeek($)):C.isSameDay(s,$)},[c,s,y,C]),F=f.useMemo(()=>{const $=C.endOfMonth(C.setMonth(s,c));return y?C.isSameDay(s,C.endOfWeek($)):C.isSameDay(s,$)},[c,s,y,C]);return o.jsx(N,T({},k,{day:s,disabled:E,autoFocus:d&&I,today:D,outsideCurrentMonth:j,isFirstVisibleCell:x,isLastVisibleCell:F,selected:R,tabIndex:I?0:-1,"aria-selected":R,"aria-current":D?"date":void 0}))}function Rm(e){const r=He({props:e,name:"MuiDayCalendar"}),{onFocusedDayChange:t,className:a,currentMonth:n,selectedDays:s,focusedDay:i,loading:l,onSelectedDaysChange:u,onMonthSwitchingAnimationEnd:c,readOnly:d,reduceAnimations:m,renderLoading:g=()=>o.jsx("span",{children:"..."}),slideDirection:h,TransitionProps:v,disablePast:y,disableFuture:b,minDate:P,maxDate:w,shouldDisableDate:p,shouldDisableMonth:M,shouldDisableYear:C,dayOfWeekFormatter:A,hasFocus:I,onFocusedViewChange:R,gridLabelId:D,displayWeekNumber:N,fixedWeekNumber:W,autoFocus:k,timezone:E}=r,j=En(E),x=Ie(),F=Dm(r),V=mt().direction==="rtl",B=A||((le,de)=>x.format(de,"weekdayShort").charAt(0).toUpperCase()),G=$s({shouldDisableDate:p,shouldDisableMonth:M,shouldDisableYear:C,minDate:P,maxDate:w,disablePast:y,disableFuture:b,timezone:E}),_=jt(),[z,L]=Dt({name:"DayCalendar",state:"hasFocus",controlled:I,default:k??!1}),[Y,ie]=f.useState(()=>i||j),De=oe(le=>{d||u(le)}),U=le=>{G(le)||(t(le),ie(le),R?.(!0),L(!0))},te=oe((le,de)=>{switch(le.key){case"ArrowUp":U(x.addDays(de,-7)),le.preventDefault();break;case"ArrowDown":U(x.addDays(de,7)),le.preventDefault();break;case"ArrowLeft":{const X=x.addDays(de,V?1:-1),ne=x.addMonths(de,V?1:-1),fe=Br({utils:x,date:X,minDate:V?X:x.startOfMonth(ne),maxDate:V?x.endOfMonth(ne):X,isDateDisabled:G,timezone:E});U(fe||X),le.preventDefault();break}case"ArrowRight":{const X=x.addDays(de,V?-1:1),ne=x.addMonths(de,V?-1:1),fe=Br({utils:x,date:X,minDate:V?x.startOfMonth(ne):X,maxDate:V?X:x.endOfMonth(ne),isDateDisabled:G,timezone:E});U(fe||X),le.preventDefault();break}case"Home":U(x.startOfWeek(de)),le.preventDefault();break;case"End":U(x.endOfWeek(de)),le.preventDefault();break;case"PageUp":U(x.addMonths(de,1)),le.preventDefault();break;case"PageDown":U(x.addMonths(de,-1)),le.preventDefault();break}}),re=oe((le,de)=>U(de)),he=oe((le,de)=>{z&&x.isSameDay(Y,de)&&R?.(!1)}),ae=x.getMonth(n),se=f.useMemo(()=>s.filter(le=>!!le).map(le=>x.startOfDay(le)),[x,s]),K=ae,ce=f.useMemo(()=>f.createRef(),[K]),Ve=x.startOfWeek(j),Re=f.useMemo(()=>{const le=x.startOfMonth(n),de=x.endOfMonth(n);return G(Y)||x.isAfterDay(Y,de)||x.isBeforeDay(Y,le)?Br({utils:x,date:Y,minDate:le,maxDate:de,disablePast:y,disableFuture:b,isDateDisabled:G,timezone:E}):Y},[n,b,y,Y,G,x,E]),xt=f.useMemo(()=>{const le=x.setTimezone(n,E),de=x.getWeekArray(le);let X=x.addMonths(le,1);for(;W&&de.length<W;){const ne=x.getWeekArray(X),fe=x.isSameDay(de[de.length-1][0],ne[0][0]);ne.slice(fe?1:0).forEach(_e=>{de.length<W&&de.push(_e)}),X=x.addMonths(X,1)}return de},[n,W,x,E]);return o.jsxs(Pm,{role:"grid","aria-labelledby":D,className:F.root,children:[o.jsxs(jm,{role:"row",className:F.header,children:[N&&o.jsx(Sm,{variant:"caption",role:"columnheader","aria-label":_.calendarWeekNumberHeaderLabel,className:F.weekNumberLabel,children:_.calendarWeekNumberHeaderText}),bh(x,j).map((le,de)=>{var X;const ne=x.format(le,"weekdayShort");return o.jsx(Cm,{variant:"caption",role:"columnheader","aria-label":x.format(x.addDays(Ve,de),"weekday"),className:F.weekDayLabel,children:(X=B?.(ne,le))!=null?X:ne},ne+de.toString())})]}),l?o.jsx(Tm,{className:F.loadingContainer,children:g()}):o.jsx(km,T({transKey:K,onExited:c,reduceAnimations:m,slideDirection:h,className:Ye(a,F.slideTransition)},v,{nodeRef:ce,children:o.jsx(Im,{ref:ce,role:"rowgroup",className:F.monthContainer,children:xt.map((le,de)=>o.jsxs(Em,{role:"row",className:F.weekContainer,"aria-rowindex":de+1,children:[N&&o.jsx(Mm,{className:F.weekNumber,role:"rowheader","aria-label":_.calendarWeekNumberAriaLabelText(x.getWeekNumber(le[0])),children:_.calendarWeekNumberText(x.getWeekNumber(le[0]))}),le.map((X,ne)=>o.jsx(Om,{parentProps:r,day:X,selectedDays:se,focusableDay:Re,onKeyDown:te,onFocus:re,onBlur:he,onDaySelect:De,isDateDisabled:G,currentMonthNumber:ae,isViewFocused:z,"aria-colindex":ne+1},X.toString()))]},`week-${le[0]}`))})}))]})}const _m=(e,r,t)=>(a,n)=>{switch(n.type){case"changeMonth":return T({},a,{slideDirection:n.direction,currentMonth:n.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return T({},a,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(a.focusedDay!=null&&n.focusedDay!=null&&t.isSameDay(n.focusedDay,a.focusedDay))return a;const s=n.focusedDay!=null&&!r&&!t.isSameMonth(a.currentMonth,n.focusedDay);return T({},a,{focusedDay:n.focusedDay,isMonthSwitchingAnimating:s&&!e&&!n.withoutMonthSwitchingAnimation,currentMonth:s?t.startOfMonth(n.focusedDay):a.currentMonth,slideDirection:n.focusedDay!=null&&t.isAfterDay(n.focusedDay,a.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},Am=e=>{const{value:r,referenceDate:t,defaultCalendarMonth:a,disableFuture:n,disablePast:s,disableSwitchToMonthOnDayFocus:i=!1,maxDate:l,minDate:u,onMonthChange:c,reduceAnimations:d,shouldDisableDate:m,timezone:g}=e,h=Ie(),v=f.useRef(_m(!!d,i,h)).current,y=f.useMemo(()=>{let I=null;return t?I=t:a&&(I=h.startOfMonth(a)),vt.getInitialReferenceValue({value:r,utils:h,timezone:g,props:e,referenceDate:I,granularity:dt.day})},[]),[b,P]=f.useReducer(v,{isMonthSwitchingAnimating:!1,focusedDay:y,currentMonth:h.startOfMonth(y),slideDirection:"left"}),w=f.useCallback(I=>{P(T({type:"changeMonth"},I)),c&&c(I.newMonth)},[c]),p=f.useCallback(I=>{const R=I;h.isSameMonth(R,b.currentMonth)||w({newMonth:h.startOfMonth(R),direction:h.isAfterDay(R,b.currentMonth)?"left":"right"})},[b.currentMonth,w,h]),M=$s({shouldDisableDate:m,minDate:u,maxDate:l,disableFuture:n,disablePast:s,timezone:g}),C=f.useCallback(()=>{P({type:"finishMonthSwitchingAnimation"})},[]),A=oe((I,R)=>{M(I)||P({type:"changeFocusedDay",focusedDay:I,withoutMonthSwitchingAnimation:R})});return{referenceDate:y,calendarState:b,changeMonth:p,changeFocusedDay:A,isDateDisabled:M,onMonthSwitchingAnimationEnd:C,handleChangeMonth:w}},Fm=["props","getOpenDialogAriaText"],Nm=["ownerState"],Vm=["ownerState"],Lm=e=>{var r,t,a,n,s;let{props:i,getOpenDialogAriaText:l}=e,u=Se(e,Fm);const{slots:c,slotProps:d,className:m,sx:g,format:h,formatDensity:v,timezone:y,name:b,label:P,inputRef:w,readOnly:p,disabled:M,autoFocus:C,localeText:A,reduceAnimations:I}=i,R=Ie(),D=f.useRef(null),N=f.useRef(null),W=ca(),k=(r=d==null||(t=d.toolbar)==null?void 0:t.hidden)!=null?r:!1,{open:E,actions:j,hasUIView:x,layoutProps:F,renderCurrentView:$,shouldRestoreFocus:V,fieldProps:B}=Rs(T({},u,{props:i,inputRef:D,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),G=(a=c.inputAdornment)!=null?a:nt,_=Be({elementType:G,externalSlotProps:d?.inputAdornment,additionalProps:{position:"end"},ownerState:i}),z=Se(_,Nm),L=(n=c.openPickerButton)!=null?n:Le,Y=Be({elementType:L,externalSlotProps:d?.openPickerButton,additionalProps:{disabled:M||p,onClick:E?j.onClose:j.onOpen,"aria-label":l(B.value,R),edge:z.position},ownerState:i}),ie=Se(Y,Vm),De=c.openPickerIcon,U=c.field,te=Be({elementType:U,externalSlotProps:d?.field,additionalProps:T({},B,k&&{id:W},{readOnly:p,disabled:M,className:m,sx:g,format:h,formatDensity:v,timezone:y,label:P,name:b,autoFocus:C&&!i.open,focused:E?!0:void 0}),ownerState:i});x&&(te.InputProps=T({},te.InputProps,{ref:N},!i.disableOpenPicker&&{[`${z.position}Adornment`]:o.jsx(G,T({},z,{children:o.jsx(L,T({},ie,{children:o.jsx(De,T({},d?.openPickerIcon))}))}))}));const re=T({textField:c.textField,clearIcon:c.clearIcon,clearButton:c.clearButton},te.slots),he=(s=c.layout)!=null?s:Fs,ae=Tt(D,te.inputRef,w);let se=W;k&&(P?se=`${W}-label`:se=void 0);const K=T({},d,{toolbar:T({},d?.toolbar,{titleId:W}),popper:T({"aria-labelledby":se},d?.popper)});return{renderPicker:()=>o.jsxs(qt,{localeText:A,children:[o.jsx(U,T({},te,{slots:re,slotProps:K,inputRef:ae})),o.jsx(kf,T({role:"dialog",placement:"bottom-start",anchorEl:N.current},j,{open:E,slots:c,slotProps:K,shouldRestoreFocus:V,reduceAnimations:I,children:o.jsx(he,T({},F,K?.layout,{slots:c,slotProps:K,children:$()}))}))]})}},Wm=e=>{var r,t,a;const n=Ie(),s=Jr();return T({},e,{disablePast:(r=e.disablePast)!=null?r:!1,disableFuture:(t=e.disableFuture)!=null?t:!1,format:(a=e.format)!=null?a:n.formats.keyboardDate,minDate:at(n,e.minDate,s.minDate),maxDate:at(n,e.maxDate,s.maxDate)})},$m=({props:e,inputRef:r})=>{const t=Wm(e),{forwardedProps:a,internalProps:n}=sm(t);return _f({inputRef:r,forwardedProps:a,internalProps:n,valueManager:vt,fieldValueManager:Vh,validator:_n})},Bm=["ownerState"],Hm=({clearable:e,fieldProps:r,InputProps:t,onClear:a,slots:n,slotProps:s,components:i,componentsProps:l})=>{var u,c,d,m,g,h;const v=jt(),y=(u=(c=n?.clearButton)!=null?c:i?.ClearButton)!=null?u:Le,b=Be({elementType:y,externalSlotProps:(d=s?.clearButton)!=null?d:l?.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:v.fieldClearLabel}}),P=Se(b,Bm),w=(m=(g=n?.clearIcon)!=null?g:i?.ClearIcon)!=null?m:rf,p=Be({elementType:w,externalSlotProps:(h=s?.clearIcon)!=null?h:l?.clearIcon,ownerState:{}}),M=T({},t,{endAdornment:o.jsxs(f.Fragment,{children:[e&&o.jsx(nt,{position:"end",sx:{marginRight:t!=null&&t.endAdornment?-1:-1.5},children:o.jsx(y,T({},P,{onClick:a,children:o.jsx(w,T({fontSize:"small"},p))}))}),t?.endAdornment]})}),C=T({},r,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(r.sx)?r.sx:[r.sx]]});return{InputProps:M,fieldProps:C}},zm=["components","componentsProps","slots","slotProps","InputProps","inputProps"],Ym=["inputRef"],Um=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],Hs=f.forwardRef(function(r,t){var a,n,s;const i=He({props:r,name:"MuiDateField"}),{components:l,componentsProps:u,slots:c,slotProps:d,InputProps:m,inputProps:g}=i,h=Se(i,zm),v=i,y=(a=(n=c?.textField)!=null?n:l?.TextField)!=null?a:ke,b=Be({elementType:y,externalSlotProps:(s=d?.textField)!=null?s:u?.textField,externalForwardedProps:h,ownerState:v}),{inputRef:P}=b,w=Se(b,Ym);w.inputProps=T({},g,w.inputProps),w.InputProps=T({},m,w.InputProps);const p=$m({props:w,inputRef:P}),{ref:M,onPaste:C,onKeyDown:A,inputMode:I,readOnly:R,clearable:D,onClear:N}=p,W=Se(p,Um),{InputProps:k,fieldProps:E}=Hm({onClear:N,clearable:D,fieldProps:W,InputProps:W.InputProps,slots:c,slotProps:d,components:l,componentsProps:u});return o.jsx(y,T({ref:t},E,{InputProps:T({},k,{readOnly:R}),inputProps:T({},W.inputProps,{inputMode:I,onPaste:C,onKeyDown:A,ref:M})}))}),qm=e=>Ke("MuiPickersFadeTransitionGroup",e);Xe("MuiPickersFadeTransitionGroup",["root"]);const Qm=e=>{const{classes:r}=e;return Ge({root:["root"]},qm,r)},Gm=ue(Yo,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,r)=>r.root})({display:"block",position:"relative"});function zs(e){const r=He({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:t,className:a,reduceAnimations:n,transKey:s}=r,i=Qm(r),l=mt();return n?t:o.jsx(Gm,{className:Ye(i.root,a),children:o.jsx(jn,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:l.transitions.duration.enteringScreen,enter:l.transitions.duration.enteringScreen,exit:0},children:t},s)})}function Km(e){return Ke("MuiPickersMonth",e)}const on=Xe("MuiPickersMonth",["root","monthButton","disabled","selected"]),Xm=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],Zm=e=>{const{disabled:r,selected:t,classes:a}=e;return Ge({root:["root"],monthButton:["monthButton",r&&"disabled",t&&"selected"]},Km,a)},Jm=ue("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,r)=>[r.root]})(({ownerState:e})=>({flexBasis:e.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),ep=ue("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,r)=>[r.monthButton,{[`&.${on.disabled}`]:r.disabled},{[`&.${on.selected}`]:r.selected}]})(({theme:e})=>T({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Ht(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Ht(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${on.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${on.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),tp=f.memo(function(r){const t=He({props:r,name:"MuiPickersMonth"}),{autoFocus:a,children:n,disabled:s,selected:i,value:l,tabIndex:u,onClick:c,onKeyDown:d,onFocus:m,onBlur:g,"aria-current":h,"aria-label":v}=t,y=Se(t,Xm),b=f.useRef(null),P=Zm(t);return Bt(()=>{if(a){var w;(w=b.current)==null||w.focus()}},[a]),o.jsx(Jm,T({className:P.root,ownerState:t},y,{children:o.jsx(ep,{ref:b,disabled:s,type:"button",role:"radio",tabIndex:s?-1:u,"aria-current":h,"aria-checked":i,"aria-label":v,onClick:w=>c(w,l),onKeyDown:w=>d(w,l),onFocus:w=>m(w,l),onBlur:w=>g(w,l),className:P.monthButton,ownerState:t,children:n})}))});function rp(e){return Ke("MuiMonthCalendar",e)}Xe("MuiMonthCalendar",["root"]);const np=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"],ap=e=>{const{classes:r}=e;return Ge({root:["root"]},rp,r)};function op(e,r){const t=Ie(),a=Jr(),n=He({props:e,name:r});return T({disableFuture:!1,disablePast:!1},n,{minDate:at(t,n.minDate,a.minDate),maxDate:at(t,n.maxDate,a.maxDate)})}const sp=ue("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,r)=>r.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:Rn,boxSizing:"border-box"}),ip=f.forwardRef(function(r,t){const a=op(r,"MuiMonthCalendar"),{className:n,value:s,defaultValue:i,referenceDate:l,disabled:u,disableFuture:c,disablePast:d,maxDate:m,minDate:g,onChange:h,shouldDisableMonth:v,readOnly:y,disableHighlightToday:b,autoFocus:P=!1,onMonthFocus:w,hasFocus:p,onFocusedViewChange:M,monthsPerRow:C=3,timezone:A,gridLabelId:I}=a,R=Se(a,np),{value:D,handleValueChange:N,timezone:W}=Ma({name:"MonthCalendar",timezone:A,value:s,defaultValue:i,onChange:h,valueManager:vt}),k=En(W),E=Uo(),j=Ie(),x=f.useMemo(()=>vt.getInitialReferenceValue({value:D,utils:j,props:a,timezone:W,referenceDate:l,granularity:dt.month}),[]),F=a,$=ap(F),V=f.useMemo(()=>j.getMonth(k),[j,k]),B=f.useMemo(()=>D!=null?j.getMonth(D):b?null:j.getMonth(x),[D,j,b,x]),[G,_]=f.useState(()=>B||V),[z,L]=Dt({name:"MonthCalendar",state:"hasFocus",controlled:p,default:P??!1}),Y=oe(ae=>{L(ae),M&&M(ae)}),ie=f.useCallback(ae=>{const se=j.startOfMonth(d&&j.isAfter(k,g)?k:g),K=j.startOfMonth(c&&j.isBefore(k,m)?k:m),ce=j.startOfMonth(ae);return j.isBefore(ce,se)||j.isAfter(ce,K)?!0:v?v(ce):!1},[c,d,m,g,k,v,j]),De=oe((ae,se)=>{if(y)return;const K=j.setMonth(D??x,se);N(K)}),U=oe(ae=>{ie(j.setMonth(D??x,ae))||(_(ae),Y(!0),w&&w(ae))});f.useEffect(()=>{_(ae=>B!==null&&ae!==B?B:ae)},[B]);const te=oe((ae,se)=>{switch(ae.key){case"ArrowUp":U((12+se-3)%12),ae.preventDefault();break;case"ArrowDown":U((12+se+3)%12),ae.preventDefault();break;case"ArrowLeft":U((12+se+(E.direction==="ltr"?-1:1))%12),ae.preventDefault();break;case"ArrowRight":U((12+se+(E.direction==="ltr"?1:-1))%12),ae.preventDefault();break}}),re=oe((ae,se)=>{U(se)}),he=oe((ae,se)=>{G===se&&Y(!1)});return o.jsx(sp,T({ref:t,className:Ye($.root,n),ownerState:F,role:"radiogroup","aria-labelledby":I},R,{children:Da(j,D??x).map(ae=>{const se=j.getMonth(ae),K=j.format(ae,"monthShort"),ce=j.format(ae,"month"),Ve=se===B,Re=u||ie(ae);return o.jsx(tp,{selected:Ve,value:se,onClick:De,onKeyDown:te,autoFocus:z&&se===G,disabled:Re,tabIndex:se===G?0:-1,onFocus:re,onBlur:he,"aria-current":V===se?"date":void 0,"aria-label":ce,monthsPerRow:C,children:K},K)})}))});function lp(e){return Ke("MuiPickersYear",e)}const sn=Xe("MuiPickersYear",["root","yearButton","selected","disabled"]),cp=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],up=e=>{const{disabled:r,selected:t,classes:a}=e;return Ge({root:["root"],yearButton:["yearButton",r&&"disabled",t&&"selected"]},lp,a)},dp=ue("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,r)=>[r.root]})(({ownerState:e})=>({flexBasis:e.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),hp=ue("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,r)=>[r.yearButton,{[`&.${sn.disabled}`]:r.disabled},{[`&.${sn.selected}`]:r.selected}]})(({theme:e})=>T({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:Ht(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Ht(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${sn.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${sn.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),fp=f.memo(function(r){const t=He({props:r,name:"MuiPickersYear"}),{autoFocus:a,className:n,children:s,disabled:i,selected:l,value:u,tabIndex:c,onClick:d,onKeyDown:m,onFocus:g,onBlur:h,"aria-current":v}=t,y=Se(t,cp),b=f.useRef(null),P=up(t);return f.useEffect(()=>{a&&b.current.focus()},[a]),o.jsx(dp,T({className:Ye(P.root,n),ownerState:t},y,{children:o.jsx(hp,{ref:b,disabled:i,type:"button",role:"radio",tabIndex:i?-1:c,"aria-current":v,"aria-checked":l,onClick:w=>d(w,u),onKeyDown:w=>m(w,u),onFocus:w=>g(w,u),onBlur:w=>h(w,u),className:P.yearButton,ownerState:t,children:s})}))});function mp(e){return Ke("MuiYearCalendar",e)}Xe("MuiYearCalendar",["root"]);const pp=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"],gp=e=>{const{classes:r}=e;return Ge({root:["root"]},mp,r)};function vp(e,r){var t;const a=Ie(),n=Jr(),s=He({props:e,name:r});return T({disablePast:!1,disableFuture:!1},s,{yearsPerRow:(t=s.yearsPerRow)!=null?t:3,minDate:at(a,s.minDate,n.minDate),maxDate:at(a,s.maxDate,n.maxDate)})}const xp=ue("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,r)=>r.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:Rn,maxHeight:hf,boxSizing:"border-box",position:"relative"}),yp=f.forwardRef(function(r,t){const a=vp(r,"MuiYearCalendar"),{autoFocus:n,className:s,value:i,defaultValue:l,referenceDate:u,disabled:c,disableFuture:d,disablePast:m,maxDate:g,minDate:h,onChange:v,readOnly:y,shouldDisableYear:b,disableHighlightToday:P,onYearFocus:w,hasFocus:p,onFocusedViewChange:M,yearsPerRow:C,timezone:A,gridLabelId:I}=a,R=Se(a,pp),{value:D,handleValueChange:N,timezone:W}=Ma({name:"YearCalendar",timezone:A,value:i,defaultValue:l,onChange:v,valueManager:vt}),k=En(W),E=Uo(),j=Ie(),x=f.useMemo(()=>vt.getInitialReferenceValue({value:D,utils:j,props:a,timezone:W,referenceDate:u,granularity:dt.year}),[]),F=a,$=gp(F),V=f.useMemo(()=>j.getYear(k),[j,k]),B=f.useMemo(()=>D!=null?j.getYear(D):P?null:j.getYear(x),[D,j,P,x]),[G,_]=f.useState(()=>B||V),[z,L]=Dt({name:"YearCalendar",state:"hasFocus",controlled:p,default:n??!1}),Y=oe(K=>{L(K),M&&M(K)}),ie=f.useCallback(K=>{if(m&&j.isBeforeYear(K,k)||d&&j.isAfterYear(K,k)||h&&j.isBeforeYear(K,h)||g&&j.isAfterYear(K,g))return!0;if(!b)return!1;const ce=j.startOfYear(K);return b(ce)},[d,m,g,h,k,b,j]),De=oe((K,ce)=>{if(y)return;const Ve=j.setYear(D??x,ce);N(Ve)}),U=oe(K=>{ie(j.setYear(D??x,K))||(_(K),Y(!0),w?.(K))});f.useEffect(()=>{_(K=>B!==null&&K!==B?B:K)},[B]);const te=oe((K,ce)=>{switch(K.key){case"ArrowUp":U(ce-C),K.preventDefault();break;case"ArrowDown":U(ce+C),K.preventDefault();break;case"ArrowLeft":U(ce+(E.direction==="ltr"?-1:1)),K.preventDefault();break;case"ArrowRight":U(ce+(E.direction==="ltr"?1:-1)),K.preventDefault();break}}),re=oe((K,ce)=>{U(ce)}),he=oe((K,ce)=>{G===ce&&Y(!1)}),ae=f.useRef(null),se=Tt(t,ae);return f.useEffect(()=>{if(n||ae.current===null)return;const K=ae.current.querySelector('[tabindex="0"]');if(!K)return;const ce=K.offsetHeight,Ve=K.offsetTop,Re=ae.current.clientHeight,xt=ae.current.scrollTop,le=Ve+ce;ce>Re||Ve<xt||(ae.current.scrollTop=le-Re/2-ce/2)},[n]),o.jsx(xp,T({ref:se,className:Ye($.root,s),ownerState:F,role:"radiogroup","aria-labelledby":I},R,{children:j.getYearRange(h,g).map(K=>{const ce=j.getYear(K),Ve=ce===B,Re=c||ie(K);return o.jsx(fp,{selected:Ve,value:ce,onClick:De,onKeyDown:te,autoFocus:z&&ce===G,disabled:Re,tabIndex:ce===G?0:-1,onFocus:re,onBlur:he,"aria-current":V===ce?"date":void 0,yearsPerRow:C,children:j.format(K,"year")},j.format(K,"year"))})}))}),wp=e=>Ke("MuiPickersCalendarHeader",e),bp=Xe("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),Dp=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],Pp=["ownerState"],jp=e=>{const{classes:r}=e;return Ge({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},wp,r)},Cp=ue("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,r)=>r.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),Sp=ue("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,r)=>r.labelContainer})(({theme:e})=>T({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),Mp=ue("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,r)=>r.label})({marginRight:6}),Tp=ue(Le,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,r)=>r.switchViewButton})(({ownerState:e})=>T({marginRight:"auto"},e.view==="year"&&{[`.${bp.switchViewIcon}`]:{transform:"rotate(180deg)"}})),kp=ue(Zh,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,r)=>r.switchViewIcon})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"})),Ip=f.forwardRef(function(r,t){var a,n,s,i;const l=jt(),u=Ie(),c=He({props:r,name:"MuiPickersCalendarHeader"}),{slots:d,slotProps:m,components:g,currentMonth:h,disabled:v,disableFuture:y,disablePast:b,maxDate:P,minDate:w,onMonthChange:p,onViewChange:M,view:C,reduceAnimations:A,views:I,labelId:R,className:D,timezone:N}=c,W=Se(c,Dp),k=c,E=jp(c),j=(a=(n=d?.switchViewButton)!=null?n:g?.SwitchViewButton)!=null?a:Tp,x=Be({elementType:j,externalSlotProps:m?.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(C)},ownerState:k,className:E.switchViewButton}),F=(s=(i=d?.switchViewIcon)!=null?i:g?.SwitchViewIcon)!=null?s:kp,$=Be({elementType:F,externalSlotProps:m?.switchViewIcon,ownerState:void 0,className:E.switchViewIcon}),V=Se($,Pp),B=()=>p(u.addMonths(h,1),"left"),G=()=>p(u.addMonths(h,-1),"right"),_=em(h,{disableFuture:y,maxDate:P,timezone:N}),z=tm(h,{disablePast:b,minDate:w,timezone:N}),L=()=>{if(!(I.length===1||!M||v))if(I.length===2)M(I.find(Y=>Y!==C)||I[0]);else{const Y=I.indexOf(C)!==0?0:1;M(I[Y])}};return I.length===1&&I[0]==="year"?null:o.jsxs(Cp,T({},W,{ownerState:k,className:Ye(D,E.root),ref:t,children:[o.jsxs(Sp,{role:"presentation",onClick:L,ownerState:k,"aria-live":"polite",className:E.labelContainer,children:[o.jsx(zs,{reduceAnimations:A,transKey:u.format(h,"monthAndYear"),children:o.jsx(Mp,{id:R,ownerState:k,className:E.label,children:u.format(h,"monthAndYear")})}),I.length>1&&!v&&o.jsx(j,T({},x,{children:o.jsx(F,T({},V))}))]}),o.jsx(jn,{in:C==="day",children:o.jsx(df,{slots:d,slotProps:m,onGoToPrevious:G,isPreviousDisabled:z,previousLabel:l.previousMonth,onGoToNext:B,isNextDisabled:_,nextLabel:l.nextMonth})})]}))}),Ep=ue("div")({overflow:"hidden",width:Rn,maxHeight:Ca,display:"flex",flexDirection:"column",margin:"0 auto"}),Op=e=>Ke("MuiDateCalendar",e);Xe("MuiDateCalendar",["root","viewTransitionContainer"]);const Rp=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],_p=e=>{const{classes:r}=e;return Ge({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},Op,r)};function Ap(e,r){var t,a,n,s,i,l,u;const c=Ie(),d=Jr(),m=Is(),g=He({props:e,name:r});return T({},g,{loading:(t=g.loading)!=null?t:!1,disablePast:(a=g.disablePast)!=null?a:!1,disableFuture:(n=g.disableFuture)!=null?n:!1,openTo:(s=g.openTo)!=null?s:"day",views:(i=g.views)!=null?i:["year","day"],reduceAnimations:(l=g.reduceAnimations)!=null?l:m,renderLoading:(u=g.renderLoading)!=null?u:()=>o.jsx("span",{children:"..."}),minDate:at(c,g.minDate,d.minDate),maxDate:at(c,g.maxDate,d.maxDate)})}const Fp=ue(Ep,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,r)=>r.root})({display:"flex",flexDirection:"column",height:Ca}),Np=ue(zs,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,r)=>r.viewTransitionContainer})({}),Vp=f.forwardRef(function(r,t){var a,n,s;const i=Ie(),l=ca(),u=Ap(r,"MuiDateCalendar"),{autoFocus:c,onViewChange:d,value:m,defaultValue:g,referenceDate:h,disableFuture:v,disablePast:y,defaultCalendarMonth:b,onChange:P,onYearChange:w,onMonthChange:p,reduceAnimations:M,shouldDisableDate:C,shouldDisableMonth:A,shouldDisableYear:I,view:R,views:D,openTo:N,className:W,disabled:k,readOnly:E,minDate:j,maxDate:x,disableHighlightToday:F,focusedView:$,onFocusedViewChange:V,showDaysOutsideCurrentMonth:B,fixedWeekNumber:G,dayOfWeekFormatter:_,components:z,componentsProps:L,slots:Y,slotProps:ie,loading:De,renderLoading:U,displayWeekNumber:te,yearsPerRow:re,monthsPerRow:he,timezone:ae}=u,se=Se(u,Rp),{value:K,handleValueChange:ce,timezone:Ve}=Ma({name:"DateCalendar",timezone:ae,value:m,defaultValue:g,onChange:P,valueManager:vt}),{view:Re,setView:xt,focusedView:le,setFocusedView:de,goToNextView:X,setValueAndGoToNextView:ne}=Os({view:R,views:D,openTo:N,onChange:ce,onViewChange:d,autoFocus:c,focusedView:$,onFocusedViewChange:V}),{referenceDate:fe,calendarState:_e,changeFocusedDay:Ue,changeMonth:qe,handleChangeMonth:it,isDateDisabled:Ze,onMonthSwitchingAnimationEnd:Qt}=Am({value:K,defaultCalendarMonth:b,referenceDate:h,reduceAnimations:M,onMonthChange:p,minDate:j,maxDate:x,shouldDisableDate:C,disablePast:y,disableFuture:v,timezone:Ve}),Gt=k&&K||j,yt=k&&K||x,Fn=`${l}-grid-label`,Kt=le!==null,ot=(a=(n=Y?.calendarHeader)!=null?n:z?.CalendarHeader)!=null?a:Ip,Qs=Be({elementType:ot,externalSlotProps:(s=ie?.calendarHeader)!=null?s:L?.calendarHeader,additionalProps:{views:D,view:Re,currentMonth:_e.currentMonth,onViewChange:xt,onMonthChange:(Ae,lt)=>it({newMonth:Ae,direction:lt}),minDate:Gt,maxDate:yt,disabled:k,disablePast:y,disableFuture:v,reduceAnimations:M,timezone:Ve,labelId:Fn,slots:Y,slotProps:ie},ownerState:u}),Gs=oe(Ae=>{const lt=i.startOfMonth(Ae),Xt=i.endOfMonth(Ae),wt=Ze(Ae)?Br({utils:i,date:Ae,minDate:i.isBefore(j,lt)?lt:j,maxDate:i.isAfter(x,Xt)?Xt:x,disablePast:y,disableFuture:v,isDateDisabled:Ze,timezone:Ve}):Ae;wt?(ne(wt,"finish"),p?.(lt)):(X(),qe(lt)),Ue(wt,!0)}),Ks=oe(Ae=>{const lt=i.startOfYear(Ae),Xt=i.endOfYear(Ae),wt=Ze(Ae)?Br({utils:i,date:Ae,minDate:i.isBefore(j,lt)?lt:j,maxDate:i.isAfter(x,Xt)?Xt:x,disablePast:y,disableFuture:v,isDateDisabled:Ze,timezone:Ve}):Ae;wt?(ne(wt,"finish"),w?.(wt)):(X(),qe(lt)),Ue(wt,!0)}),Xs=oe(Ae=>ce(Ae&&xn(i,Ae,K??fe),"finish",Re));f.useEffect(()=>{K!=null&&i.isValid(K)&&qe(K)},[K]);const Nn=u,Ta=_p(Nn),Vn={disablePast:y,disableFuture:v,maxDate:x,minDate:j},Ln={disableHighlightToday:F,readOnly:E,disabled:k,timezone:Ve,gridLabelId:Fn},Wn=f.useRef(Re);f.useEffect(()=>{Wn.current!==Re&&(le===Wn.current&&de(Re,!0),Wn.current=Re)},[le,de,Re]);const Zs=f.useMemo(()=>[K],[K]);return o.jsxs(Fp,T({ref:t,className:Ye(Ta.root,W),ownerState:Nn},se,{children:[o.jsx(ot,T({},Qs)),o.jsx(Np,{reduceAnimations:M,className:Ta.viewTransitionContainer,transKey:Re,ownerState:Nn,children:o.jsxs("div",{children:[Re==="year"&&o.jsx(yp,T({},Vn,Ln,{value:K,onChange:Ks,shouldDisableYear:I,hasFocus:Kt,onFocusedViewChange:Ae=>de("year",Ae),yearsPerRow:re,referenceDate:fe})),Re==="month"&&o.jsx(ip,T({},Vn,Ln,{hasFocus:Kt,className:W,value:K,onChange:Gs,shouldDisableMonth:A,onFocusedViewChange:Ae=>de("month",Ae),monthsPerRow:he,referenceDate:fe})),Re==="day"&&o.jsx(Rm,T({},_e,Vn,Ln,{onMonthSwitchingAnimationEnd:Qt,onFocusedDayChange:Ue,reduceAnimations:M,selectedDays:Zs,onSelectedDaysChange:Xs,shouldDisableDate:C,shouldDisableMonth:A,shouldDisableYear:I,hasFocus:Kt,onFocusedViewChange:Ae=>de("day",Ae),showDaysOutsideCurrentMonth:B,fixedWeekNumber:G,dayOfWeekFormatter:_,displayWeekNumber:te,components:z,componentsProps:L,slots:Y,slotProps:ie,loading:De,renderLoading:U}))]})})]}))}),$t=({view:e,onViewChange:r,views:t,focusedView:a,onFocusedViewChange:n,value:s,defaultValue:i,referenceDate:l,onChange:u,className:c,classes:d,disableFuture:m,disablePast:g,minDate:h,maxDate:v,shouldDisableDate:y,shouldDisableMonth:b,shouldDisableYear:P,reduceAnimations:w,onMonthChange:p,monthsPerRow:M,onYearChange:C,yearsPerRow:A,defaultCalendarMonth:I,components:R,componentsProps:D,slots:N,slotProps:W,loading:k,renderLoading:E,disableHighlightToday:j,readOnly:x,disabled:F,showDaysOutsideCurrentMonth:$,dayOfWeekFormatter:V,sx:B,autoFocus:G,fixedWeekNumber:_,displayWeekNumber:z,timezone:L})=>o.jsx(Vp,{view:e,onViewChange:r,views:t.filter(yo),focusedView:a&&yo(a)?a:null,onFocusedViewChange:n,value:s,defaultValue:i,referenceDate:l,onChange:u,className:c,classes:d,disableFuture:m,disablePast:g,minDate:h,maxDate:v,shouldDisableDate:y,shouldDisableMonth:b,shouldDisableYear:P,reduceAnimations:w,onMonthChange:p,monthsPerRow:M,onYearChange:C,yearsPerRow:A,defaultCalendarMonth:I,components:R,componentsProps:D,slots:N,slotProps:W,loading:k,renderLoading:E,disableHighlightToday:j,readOnly:x,disabled:F,showDaysOutsideCurrentMonth:$,dayOfWeekFormatter:V,sx:B,autoFocus:G,fixedWeekNumber:_,displayWeekNumber:z,timezone:L}),Ys=f.forwardRef(function(r,t){var a,n,s,i;const l=jt(),u=Ie(),c=ks(r,"MuiDesktopDatePicker"),d=T({day:$t,month:$t,year:$t},c.viewRenderers),m=T({},c,{viewRenderers:d,format:Pa(u,c,!1),yearsPerRow:(a=c.yearsPerRow)!=null?a:4,slots:T({openPickerIcon:tf,field:Hs},c.slots),slotProps:T({},c.slotProps,{field:h=>{var v;return T({},ba((v=c.slotProps)==null?void 0:v.field,h),Vs(c),{ref:t})},toolbar:T({hidden:!0},(n=c.slotProps)==null?void 0:n.toolbar)})}),{renderPicker:g}=Lm({props:m,valueManager:vt,valueType:"date",getOpenDialogAriaText:(s=(i=m.localeText)==null?void 0:i.openDatePickerDialogue)!=null?s:l.openDatePickerDialogue,validator:_n});return g()});Ys.propTypes={autoFocus:S.bool,className:S.string,closeOnSelect:S.bool,components:S.object,componentsProps:S.object,dayOfWeekFormatter:S.func,defaultCalendarMonth:S.any,defaultValue:S.any,disabled:S.bool,disableFuture:S.bool,disableHighlightToday:S.bool,disableOpenPicker:S.bool,disablePast:S.bool,displayWeekNumber:S.bool,fixedWeekNumber:S.number,format:S.string,formatDensity:S.oneOf(["dense","spacious"]),inputRef:qo,label:S.node,loading:S.bool,localeText:S.object,maxDate:S.any,minDate:S.any,monthsPerRow:S.oneOf([3,4]),name:S.string,onAccept:S.func,onChange:S.func,onClose:S.func,onError:S.func,onMonthChange:S.func,onOpen:S.func,onSelectedSectionsChange:S.func,onViewChange:S.func,onYearChange:S.func,open:S.bool,openTo:S.oneOf(["day","month","year"]),orientation:S.oneOf(["landscape","portrait"]),readOnly:S.bool,reduceAnimations:S.bool,referenceDate:S.any,renderLoading:S.func,selectedSections:S.oneOfType([S.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),S.number,S.shape({endIndex:S.number.isRequired,startIndex:S.number.isRequired})]),shouldDisableDate:S.func,shouldDisableMonth:S.func,shouldDisableYear:S.func,showDaysOutsideCurrentMonth:S.bool,slotProps:S.object,slots:S.object,sx:S.oneOfType([S.arrayOf(S.oneOfType([S.func,S.object,S.bool])),S.func,S.object]),timezone:S.string,value:S.any,view:S.oneOf(["day","month","year"]),viewRenderers:S.shape({day:S.func,month:S.func,year:S.func}),views:S.arrayOf(S.oneOf(["day","month","year"]).isRequired),yearsPerRow:S.oneOf([3,4])};const Lp=["props","getOpenDialogAriaText"],Wp=e=>{var r,t,a;let{props:n,getOpenDialogAriaText:s}=e,i=Se(e,Lp);const{slots:l,slotProps:u,className:c,sx:d,format:m,formatDensity:g,timezone:h,name:v,label:y,inputRef:b,readOnly:P,disabled:w,localeText:p}=n,M=Ie(),C=f.useRef(null),A=ca(),I=(r=u==null||(t=u.toolbar)==null?void 0:t.hidden)!=null?r:!1,{open:R,actions:D,layoutProps:N,renderCurrentView:W,fieldProps:k}=Rs(T({},i,{props:n,inputRef:C,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),E=l.field,j=Be({elementType:E,externalSlotProps:u?.field,additionalProps:T({},k,I&&{id:A},!(w||P)&&{onClick:D.onOpen,onKeyDown:xf(D.onOpen)},{readOnly:P??!0,disabled:w,className:c,sx:d,format:m,formatDensity:g,timezone:h,label:y,name:v}),ownerState:n});j.inputProps=T({},j.inputProps,{"aria-label":s(k.value,M)});const x=T({textField:l.textField},j.slots),F=(a=l.layout)!=null?a:Fs,$=Tt(C,j.inputRef,b);let V=A;I&&(y?V=`${A}-label`:V=void 0);const B=T({},u,{toolbar:T({},u?.toolbar,{titleId:A}),mobilePaper:T({"aria-labelledby":V},u?.mobilePaper)});return{renderPicker:()=>o.jsxs(qt,{localeText:p,children:[o.jsx(E,T({},j,{slots:x,slotProps:B,inputRef:$})),o.jsx(pf,T({},D,{open:R,slots:l,slotProps:B,children:o.jsx(F,T({},N,B?.layout,{slots:l,slotProps:B,children:W()}))}))]})}},Us=f.forwardRef(function(r,t){var a,n,s;const i=jt(),l=Ie(),u=ks(r,"MuiMobileDatePicker"),c=T({day:$t,month:$t,year:$t},u.viewRenderers),d=T({},u,{viewRenderers:c,format:Pa(l,u,!1),slots:T({field:Hs},u.slots),slotProps:T({},u.slotProps,{field:g=>{var h;return T({},ba((h=u.slotProps)==null?void 0:h.field,g),Vs(u),{ref:t})},toolbar:T({hidden:!1},(a=u.slotProps)==null?void 0:a.toolbar)})}),{renderPicker:m}=Wp({props:d,valueManager:vt,valueType:"date",getOpenDialogAriaText:(n=(s=d.localeText)==null?void 0:s.openDatePickerDialogue)!=null?n:i.openDatePickerDialogue,validator:_n});return m()});Us.propTypes={autoFocus:S.bool,className:S.string,closeOnSelect:S.bool,components:S.object,componentsProps:S.object,dayOfWeekFormatter:S.func,defaultCalendarMonth:S.any,defaultValue:S.any,disabled:S.bool,disableFuture:S.bool,disableHighlightToday:S.bool,disableOpenPicker:S.bool,disablePast:S.bool,displayWeekNumber:S.bool,fixedWeekNumber:S.number,format:S.string,formatDensity:S.oneOf(["dense","spacious"]),inputRef:qo,label:S.node,loading:S.bool,localeText:S.object,maxDate:S.any,minDate:S.any,monthsPerRow:S.oneOf([3,4]),name:S.string,onAccept:S.func,onChange:S.func,onClose:S.func,onError:S.func,onMonthChange:S.func,onOpen:S.func,onSelectedSectionsChange:S.func,onViewChange:S.func,onYearChange:S.func,open:S.bool,openTo:S.oneOf(["day","month","year"]),orientation:S.oneOf(["landscape","portrait"]),readOnly:S.bool,reduceAnimations:S.bool,referenceDate:S.any,renderLoading:S.func,selectedSections:S.oneOfType([S.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),S.number,S.shape({endIndex:S.number.isRequired,startIndex:S.number.isRequired})]),shouldDisableDate:S.func,shouldDisableMonth:S.func,shouldDisableYear:S.func,showDaysOutsideCurrentMonth:S.bool,slotProps:S.object,slots:S.object,sx:S.oneOfType([S.arrayOf(S.oneOfType([S.func,S.object,S.bool])),S.func,S.object]),timezone:S.string,value:S.any,view:S.oneOf(["day","month","year"]),viewRenderers:S.shape({day:S.func,month:S.func,year:S.func}),views:S.arrayOf(S.oneOf(["day","month","year"]).isRequired),yearsPerRow:S.oneOf([3,4])};const $p=["desktopModeMediaQuery"],Ut=f.forwardRef(function(r,t){const a=He({props:r,name:"MuiDatePicker"}),{desktopModeMediaQuery:n=yf}=a,s=Se(a,$p);return bn(n,{defaultMatches:!0})?o.jsx(Ys,T({ref:t},s)):o.jsx(Us,T({ref:t},s))});var Mr={},ko;function Bp(){if(ko)return Mr;ko=1;var e=ye();Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.default=void 0;var r=e(be()),t=we();return Mr.default=(0,r.default)((0,t.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),Mr}var Hp=Bp();const An=pe(Hp),zp=({startDate:e,endDate:r,onStartDateChange:t,onEndDateChange:a,onRefresh:n,loading:s,chartType:i,onChartTypeChange:l,comparisonMode:u,onComparisonModeChange:c})=>{const d=mt(),m=bn(d.breakpoints.down("md"));return o.jsx(H,{sx:{p:2,mb:3,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"},children:o.jsxs(kt,{direction:m?"column":"row",spacing:2,alignItems:m?"stretch":"center",flexWrap:"wrap",children:[o.jsx(Ut,{label:"Start Date",value:e,onChange:t,maxDate:new Date,format:"dd/MM/yyyy",slotProps:{textField:{size:"small",fullWidth:m}}}),o.jsx(Ut,{label:"End Date",value:r,onChange:a,minDate:e,maxDate:new Date,format:"dd/MM/yyyy",slotProps:{textField:{size:"small",fullWidth:m}}}),o.jsxs(Hr,{size:"small",sx:{minWidth:120},children:[o.jsx(ua,{children:"Chart Type"}),o.jsxs(zr,{value:i,label:"Chart Type",onChange:l,children:[o.jsx(Je,{value:"candlestick",children:"Candlestick (Daily)"}),o.jsx(Je,{value:"bar",children:"Bar (Hourly)"}),o.jsx(Je,{value:"line",children:"Line (Trend)"})]})]}),o.jsx(H,{sx:{flexGrow:1}}),o.jsx(Me,{variant:"contained",startIcon:s?o.jsx(tt,{size:20,color:"inherit"}):o.jsx(An,{}),onClick:n,disabled:s,fullWidth:m,children:s?"Loading...":"Refresh Data"})]})})},Yp=()=>{const e=mt(),t=(()=>{const E=new Date;E.setDate(E.getDate()-2);const j=new Date(E);return j.setDate(j.getDate()-7),{startDate:j,endDate:E}})(),[a,n]=f.useState(null),[s,i]=f.useState(!1),[l,u]=f.useState(null),[c,d]=f.useState(t.startDate),[m,g]=f.useState(t.endDate),[h,v]=f.useState("candlestick"),[y,b]=f.useState("none"),{selectedProperty:P,selectedMeetingPoint:w,loading:p}=Xr();f.useEffect(()=>{w?C():n(null)},[w,c,m]);const M=(E,j)=>E>j?"Start date must be before or equal to end date":Math.ceil(Math.abs(j-E)/(1e3*60*60*24))>730?"Date range cannot exceed 730 days (API limitation)":null,C=async()=>{const E=M(c,m);if(E){u(E);return}if(w){i(!0),u(null);try{const j=V=>{const B=V.getFullYear(),G=String(V.getMonth()+1).padStart(2,"0"),_=String(V.getDate()).padStart(2,"0");return`${B}-${G}-${_}`},x=`/api/database-demo?dateFrom=${j(c)}&dateTo=${j(m)}&meteringPointId=${w.id}`,F=await ze(x);if(!F.ok)throw new Error(`HTTP error! status: ${F.status}`);const $=await F.json();n($)}catch(j){console.error("Error fetching data:",j),u("Failed to fetch data from database. Please try again later.")}finally{i(!1)}}},A=E=>{const j=E?.result?.[0];if(!j?.success||j?.errorCode!==1e4)return[];if(!E?.result?.[0]?.MyEnergyData_MarketDocument?.TimeSeries?.[0])return[];const F=E.result[0].MyEnergyData_MarketDocument.TimeSeries[0].Period||[],$=[];return F.forEach(V=>{const B=V.Point||[],G=new Date(V.timeInterval?.start||new Date);B.forEach(_=>{const z=new Date(G);z.setHours(G.getHours()+(parseInt(_.position)-1));const L=parseFloat(_["out_Quantity.quantity"]||0);$.push({timestamp:z,label:z.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})+" "+z.toLocaleDateString("en-GB",{day:"numeric",month:"short"}),consumption:L})})}),$.sort((V,B)=>V.timestamp-B.timestamp)},I=E=>{const j=E?.result?.[0];if(!j?.success||j?.errorCode!==1e4)return[];if(!E?.result?.[0]?.MyEnergyData_MarketDocument?.TimeSeries?.[0])return[];const F=E.result[0].MyEnergyData_MarketDocument.TimeSeries[0].Period||[],$={};return F.forEach(V=>{const B=V.Point||[],G=new Date(V.timeInterval?.start||new Date);B.forEach(_=>{const z=new Date(G);z.setHours(G.getHours()+(parseInt(_.position)-1));const L=z.toLocaleDateString("en-GB"),Y=parseFloat(_["out_Quantity.quantity"]||0);$[L]||($[L]={date:L,timestamp:new Date(z.getFullYear(),z.getMonth(),z.getDate()),consumptions:[]}),$[L].consumptions.push(Y)})}),Object.values($).map(V=>{const B=V.consumptions.sort((L,Y)=>L-Y),G=Math.min(...B),_=Math.max(...B),z=B.reduce((L,Y)=>L+Y,0)/B.length;return{date:V.date,timestamp:V.timestamp,min:G,max:_,avg:z,allZeros:B.every(L=>L===0),hasData:B.reduce((L,Y)=>L+Y,0)>0}}).sort((V,B)=>V.timestamp-B.timestamp)},R=a?A(a):[],D=a?I(a):[],N=E=>E.map(j=>({x:j.date,y:[j.avg,j.max,j.min,j.avg]})),W=E=>E.map(j=>({x:j.label,y:j.consumption})),k=E=>E.map(j=>({x:j.timestamp.getTime(),y:j.consumption}));return o.jsx(qt,{dateAdapter:kn,children:o.jsxs(H,{children:[o.jsxs(H,{sx:{mb:4},children:[o.jsx(O,{variant:"h4",gutterBottom:!0,color:"text.primary",sx:{fontWeight:"bold"},children:"Analysis"}),o.jsx(O,{variant:"body1",color:"text.secondary",children:"Deep dive into your electricity consumption patterns per property."})]}),o.jsx(zp,{startDate:c,endDate:m,onStartDateChange:d,onEndDateChange:g,onRefresh:C,loading:s||p,chartType:h,onChartTypeChange:E=>v(E.target.value),comparisonMode:y,onComparisonModeChange:E=>b(E.target.value)}),l&&o.jsx(Qe,{severity:"error",sx:{mb:3},onClose:()=>u(null),children:l}),o.jsx(ee,{container:!0,spacing:3,children:o.jsx(ee,{item:!0,xs:12,children:o.jsx(Ee,{variant:"outlined",sx:{borderRadius:2},children:o.jsxs(Oe,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium"},children:h==="candlestick"?"Daily Range (Min/Max/Avg)":h==="bar"?"Hourly Consumption":"Consumption Trend"}),s?o.jsxs(H,{sx:{p:10,textAlign:"center"},children:[o.jsx(tt,{size:32}),o.jsx(O,{sx:{mt:2},color:"text.secondary",children:"Fetching consumption data..."})]}):a?o.jsxs(o.Fragment,{children:[h==="candlestick"&&D.length>0&&o.jsx(Lt,{options:{...vs(D.map(E=>E.date),D.filter(E=>E.allZeros).map(E=>E.date),e.palette.mode),theme:{mode:e.palette.mode}},series:[{data:N(D)}],type:"candlestick",height:400}),h==="bar"&&R.length>0&&o.jsx(Lt,{options:{...xs(R.map(E=>E.label),R.length,e.palette.mode),theme:{mode:e.palette.mode}},series:[{name:"Consumption (kWh)",data:W(R)}],type:"bar",height:Math.max(R.length*25+100,500)}),h==="line"&&R.length>0&&o.jsx(Lt,{options:{chart:{type:"line",toolbar:{show:!0}},xaxis:{type:"datetime"},stroke:{curve:"smooth",width:2},theme:{mode:e.palette.mode},colors:[e.palette.primary.main]},series:[{name:"Consumption (kWh)",data:k(R)}],type:"line",height:400})]}):o.jsx(H,{sx:{p:10,textAlign:"center",bgcolor:"action.hover",borderRadius:2},children:o.jsx(O,{color:"text.secondary",children:"Select a property and date range to analyze your consumption."})})]})})})})]})})};var Tr={},Io;function Up(){if(Io)return Tr;Io=1;var e=ye();Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.default=void 0;var r=e(be()),t=we();return Tr.default=(0,r.default)((0,t.jsx)("path",{d:"M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4m-4-2V5c0-.55.45-1 1-1s1 .45 1 1v1h-1v1h1v2h-1v1h1v1z"}),"Thermostat"),Tr}var qp=Up();const Qp=pe(qp),ln=({title:e,value:r,subtitle:t,icon:a,color:n,trend:s})=>o.jsx(Ee,{sx:{height:"100%"},children:o.jsxs(Oe,{children:[o.jsx(H,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:o.jsx(H,{sx:{p:1,borderRadius:2,bgcolor:`${n}20`,color:n},children:a})}),o.jsx(O,{variant:"h4",component:"div",sx:{fontWeight:"bold",mb:1},children:r}),o.jsx(O,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:e}),o.jsx(O,{variant:"body2",sx:{color:"text.secondary",mt:2},children:t}),s&&o.jsx(O,{variant:"caption",sx:{color:n,mt:1,display:"block"},children:s})]})}),Gp=()=>{const e=mt(),[r,t]=f.useState(!1),[a,n]=f.useState(null),[s,i]=f.useState(null),[l,u]=f.useState(null),{selectedMeetingPoint:c}=Xr(),[d,m]=f.useState(()=>{const p=new Date;return p.setDate(p.getDate()-30),p}),[g,h]=f.useState(()=>{const p=new Date;return p.setDate(p.getDate()-2),p}),v=p=>{const M=p.getFullYear(),C=String(p.getMonth()+1).padStart(2,"0"),A=String(p.getDate()).padStart(2,"0");return`${M}-${C}-${A}`},y=async()=>{if(!c){u("Please select a metering point");return}t(!0),u(null);try{const p=v(d),M=v(g),C=await ze(`/api/weather/consumption-temperature?dateFrom=${p}&dateTo=${M}&meteringPointId=${c.id}`);if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const A=await C.json();if(!A.success)throw new Error(A.error||"Failed to fetch weather data");n(A);const I=await ze(`/api/weather/correlation?dateFrom=${p}&dateTo=${M}&meteringPointId=${c.id}`);if(I.ok){const R=await I.json();R.success&&i(R.correlation)}}catch(p){console.error("Error fetching weather data:",p),u(p.message)}finally{t(!1)}};f.useEffect(()=>{c&&y()},[c]);const P=(()=>{if(!a?.data)return{series:[],categories:[]};const p=[],M=[],C=[],A=[];return a.data.forEach(I=>{p.push(I.date),M.push(I.daily_consumption||0),C.push(I.avg_temperature||null),A.push(I.total_precipitation||0)}),{series:[{name:"Daily Consumption",type:"column",yAxisIndex:0,data:M},{name:"Average Temperature",type:"line",yAxisIndex:1,data:C},{name:"Precipitation",type:"area",yAxisIndex:2,data:A}],categories:p}})(),w={chart:{type:"line",height:400,toolbar:{show:!0},zoom:{enabled:!0}},colors:[e.palette.primary.main,e.palette.error.main,e.palette.info.main],dataLabels:{enabled:!1},stroke:{width:[0,2,1],curve:"smooth"},fill:{opacity:[.8,1,.3],type:["solid","solid","gradient"]},xaxis:{categories:P.categories,type:"datetime",labels:{format:"dd MMM"}},yaxis:[{title:{text:"Consumption (kWh)"},labels:{formatter:p=>p!=null?Number(p).toFixed(1):""}},{opposite:!0,title:{text:"Temperature (C)"},labels:{formatter:p=>p!=null?Number(p).toFixed(1)+"C":""}},{opposite:!0,show:!1,title:{text:"Precipitation (mm)"},labels:{formatter:p=>p!=null?Number(p).toFixed(1)+"mm":""}}],tooltip:{shared:!0,intersect:!1,y:{formatter:function(p,{seriesIndex:M}){if(p==null)return"--";const C=Number(p);return M===0?C.toFixed(2)+" kWh":M===1?C.toFixed(1)+"C":M===2?C.toFixed(1)+"mm":C.toString()}}},legend:{position:"top",horizontalAlign:"left"},theme:{mode:e.palette.mode}};return o.jsx(qt,{dateAdapter:kn,children:o.jsxs(H,{children:[o.jsxs(H,{sx:{mb:4},children:[o.jsx(O,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Weather Analysis"}),o.jsx(O,{variant:"body1",color:"text.secondary",children:"Analyze how weather conditions correlate with your electricity consumption patterns."})]}),o.jsx(Ee,{sx:{mb:3},children:o.jsxs(Oe,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,children:"Date Range Selection"}),o.jsxs(kt,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[o.jsx(Ut,{label:"Start Date",value:d,onChange:m,maxDate:new Date,format:"dd/MM/yyyy",slotProps:{textField:{size:"small"}}}),o.jsx(Ut,{label:"End Date",value:g,onChange:h,minDate:d,maxDate:new Date,format:"dd/MM/yyyy",slotProps:{textField:{size:"small"}}}),o.jsx(Me,{variant:"contained",startIcon:r?o.jsx(tt,{size:20,color:"inherit"}):o.jsx(An,{}),onClick:y,disabled:r,children:r?"Loading...":"Update Data"})]})]})}),l&&o.jsx(Qe,{severity:"error",sx:{mb:3},children:l}),a?.summary&&o.jsxs(ee,{container:!0,spacing:3,sx:{mb:4},children:[o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsx(ln,{title:"Total Consumption",value:`${a.summary.totalConsumption} kWh`,subtitle:`Over ${a.summary.totalRecords} days`,icon:o.jsx(pa,{}),color:"#00E5FF"})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsx(ln,{title:"Average Temperature",value:a.summary.avgTemperature?`${a.summary.avgTemperature}C`:"--C",subtitle:"Daily average temperature",icon:o.jsx(Qp,{}),color:"#FF5722"})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsx(ln,{title:"Correlation Score",value:s?.coefficient!==void 0&&s?.coefficient!==null?Number(s.coefficient).toFixed(3):"--",subtitle:s?.strength||"No correlation data",icon:o.jsx(ma,{}),color:"#2196F3",trend:s?.description})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsx(ln,{title:"Data Completeness",value:`${a.summary.completeRecords}/${a.summary.totalRecords}`,subtitle:"Days with both consumption & weather",icon:o.jsx(fn,{}),color:"#4CAF50",trend:`${Math.round(a.summary.completeRecords/a.summary.totalRecords*100)}% complete`})})]}),o.jsx(Ee,{children:o.jsxs(Oe,{children:[o.jsxs(H,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[o.jsx(O,{variant:"h6",children:"Daily Consumption vs Weather"}),a?.summary&&o.jsxs(kt,{direction:"row",spacing:1,children:[o.jsx(gt,{label:`${a.summary.totalRecords} days`,size:"small",variant:"outlined"}),o.jsx(gt,{label:`${a.summary.completeRecords} complete`,size:"small",color:"success",variant:"outlined"})]})]}),r?o.jsxs(H,{sx:{p:4,textAlign:"center",color:"text.secondary"},children:[o.jsx(tt,{sx:{mb:2}}),o.jsx(O,{variant:"h6",gutterBottom:!0,children:"Loading Weather Data..."}),o.jsx(O,{variant:"body2",children:"Fetching consumption and temperature data for analysis."})]}):!a?.data||a.data.length===0?o.jsxs(H,{sx:{p:4,textAlign:"center",color:"text.secondary"},children:[o.jsx(fn,{sx:{fontSize:64,mb:2,opacity:.3}}),o.jsx(O,{variant:"h6",gutterBottom:!0,children:"No Weather Data Available"}),o.jsx(O,{variant:"body2",children:'Select a date range and click "Update Data" to load weather and consumption information.'})]}):o.jsx(Lt,{options:w,series:P.series,type:"line",height:400})]})}),s&&o.jsx(Ee,{sx:{mt:3},children:o.jsxs(Oe,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,children:"Correlation Analysis"}),o.jsxs(ee,{container:!0,spacing:2,children:[o.jsxs(ee,{item:!0,xs:12,md:6,children:[o.jsx(O,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Temperature-Consumption Correlation"}),o.jsx(O,{variant:"h5",color:"primary",gutterBottom:!0,children:s.coefficient!==void 0&&s.coefficient!==null?Number(s.coefficient).toFixed(3):"N/A"}),o.jsx(gt,{label:s.strength,color:s.strength==="Strong"?"success":s.strength==="Moderate"?"warning":"default",size:"small"})]}),o.jsxs(ee,{item:!0,xs:12,md:6,children:[o.jsx(O,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Analysis"}),o.jsx(O,{variant:"body2",children:s.description}),o.jsxs(O,{variant:"caption",display:"block",sx:{mt:1},children:["Based on ",s.sampleSize," days of data"]})]})]})]})})]})})};var kr={},Eo;function Kp(){if(Eo)return kr;Eo=1;var e=ye();Object.defineProperty(kr,"__esModule",{value:!0}),kr.default=void 0;var r=e(be()),t=we();return kr.default=(0,r.default)((0,t.jsx)("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"}),"TrendingDown"),kr}var Xp=Kp();const Zp=pe(Xp),cn=({title:e,current:r,previous:t,change:a,trend:n,unit:s=""})=>{const i=n==="improvement",l=a.startsWith("+");return o.jsx(Ee,{sx:{height:"100%"},children:o.jsxs(Oe,{children:[o.jsx(O,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:e}),o.jsxs(O,{variant:"h4",component:"div",sx:{fontWeight:"bold",mb:1},children:[r,s]}),o.jsxs(O,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["vs ",t,s]}),o.jsx(H,{sx:{display:"flex",alignItems:"center",gap:1},children:o.jsx(gt,{icon:l?o.jsx(ma,{}):o.jsx(Zp,{}),label:a,color:i?"success":l?"error":"success",size:"small"})})]})})},Jp=()=>{const[e,r]=f.useState("year_over_year"),[t,a]=f.useState(()=>{const v=new Date;return v.setDate(v.getDate()-30),v}),[n,s]=f.useState(null),[i,l]=f.useState(!1),[u,c]=f.useState(null),{selectedMeetingPoint:d,loading:m}=Xr(),g=v=>{const y=v.getFullYear(),b=String(v.getMonth()+1).padStart(2,"0"),P=String(v.getDate()).padStart(2,"0");return`${y}-${b}-${P}`},h=async()=>{if(!d){c("Please select a metering point");return}l(!0),c(null);try{const v=g(t),y=new Date;y.setDate(y.getDate()-2);const b=g(y);let P="";e==="year_over_year"?P=`/api/analytics/year-over-year?dateFrom=${v}&dateTo=${b}&meteringPointId=${d.id}`:e==="month_over_month"&&(P=`/api/analytics/month-over-month?dateFrom=${v}&dateTo=${b}&meteringPointId=${d.id}`);const w=await ze(P);if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);const p=await w.json();if(!p.success)throw new Error(p.error||"Failed to fetch comparison data");s(p)}catch(v){console.error("Error fetching comparison data:",v),c(v.message)}finally{l(!1)}};return f.useEffect(()=>{d&&h()},[d]),o.jsx(qt,{dateAdapter:kn,children:o.jsxs(H,{children:[o.jsxs(H,{sx:{mb:4},children:[o.jsx(O,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Consumption Comparison"}),o.jsx(O,{variant:"body1",color:"text.secondary",children:"Compare your electricity consumption across different time periods to identify trends and improvements."})]}),u&&o.jsx(Qe,{severity:"error",sx:{mb:3},onClose:()=>c(null),children:u}),o.jsx(Ee,{sx:{mb:3},children:o.jsxs(Oe,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,children:"Comparison Settings"}),o.jsxs(kt,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[o.jsxs(Hr,{size:"small",sx:{minWidth:200},children:[o.jsx(ua,{children:"Comparison Type"}),o.jsxs(zr,{value:e,label:"Comparison Type",onChange:v=>r(v.target.value),children:[o.jsx(Je,{value:"year_over_year",children:"Year over Year"}),o.jsx(Je,{value:"month_over_month",children:"Month over Month"}),o.jsx(Je,{value:"week_over_week",children:"Week over Week"}),o.jsx(Je,{value:"custom",children:"Custom Period"})]})]}),o.jsx(Ut,{label:"Base Period",value:t,onChange:a,maxDate:new Date,format:"dd/MM/yyyy",slotProps:{textField:{size:"small"}}}),o.jsx(Me,{variant:"contained",startIcon:i?o.jsx(tt,{size:20,color:"inherit"}):o.jsx(An,{}),onClick:h,disabled:i||m,children:i?"Comparing...":"Compare Periods"})]})]})}),n?o.jsxs(o.Fragment,{children:[o.jsxs(ee,{container:!0,spacing:3,sx:{mb:4},children:[o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsx(cn,{title:"Total Consumption",current:Math.round(n.summary.current_total*100)/100,previous:Math.round(n.summary.previous_total*100)/100,change:`${n.summary.average_percentage_change>0?"+":""}${n.summary.average_percentage_change}%`,trend:n.summary.average_percentage_change<0?"improvement":"increase",unit:" kWh"})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsx(cn,{title:"Average Daily",current:(n.summary.current_total/n.summary.total_records).toFixed(2),previous:(n.summary.previous_total/n.summary.total_records).toFixed(2),change:`${n.summary.average_percentage_change>0?"+":""}${n.summary.average_percentage_change}%`,trend:n.summary.average_percentage_change<0?"improvement":"increase",unit:" kWh"})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsx(cn,{title:"Records Compared",current:n.summary.records_with_comparison,previous:n.summary.total_records,change:`${Math.round(n.summary.records_with_comparison/n.summary.total_records*100)}%`,trend:"normal"})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsx(cn,{title:"Comparison Type",current:e==="year_over_year"?"YoY":"MoM",previous:e==="year_over_year"?"Year":"Month",change:"Active",trend:"normal"})})]}),o.jsx(Ee,{children:o.jsxs(Oe,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,children:"Detailed Comparison Data"}),o.jsx(H,{sx:{overflowX:"auto"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"2px solid #e0e0e0"},children:[o.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Date"}),o.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Current (kWh)"}),o.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Previous (kWh)"}),o.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Difference"}),o.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"% Change"})]})}),o.jsx("tbody",{children:n.data.slice(0,10).map((v,y)=>o.jsxs("tr",{style:{borderBottom:"1px solid #f0f0f0"},children:[o.jsx("td",{style:{padding:"12px"},children:v.date}),o.jsx("td",{style:{padding:"12px",textAlign:"right"},children:v.current_consumption.toFixed(2)}),o.jsx("td",{style:{padding:"12px",textAlign:"right"},children:v.previous_consumption!==null?v.previous_consumption.toFixed(2):"N/A"}),o.jsx("td",{style:{padding:"12px",textAlign:"right"},children:v.absolute_difference!==null?v.absolute_difference.toFixed(2):"N/A"}),o.jsx("td",{style:{padding:"12px",textAlign:"right"},children:v.percentage_change!==null?`${v.percentage_change>0?"+":""}${v.percentage_change.toFixed(2)}%`:"N/A"})]},y))})]})}),n.data.length>10&&o.jsxs(O,{variant:"caption",sx:{mt:2,display:"block",color:"text.secondary"},children:["Showing 10 of ",n.data.length," records"]})]})})]}):o.jsx(Ee,{children:o.jsx(Oe,{children:o.jsxs(H,{sx:{p:4,textAlign:"center",color:"text.secondary"},children:[o.jsx(Xo,{sx:{fontSize:64,mb:2,opacity:.3}}),o.jsx(O,{variant:"h6",gutterBottom:!0,children:"No Comparison Data"}),o.jsx(O,{variant:"body2",children:'Select your comparison settings and click "Compare Periods" to analyze your consumption trends.'})]})})})]})})};var Ir={},Oo;function eg(){if(Oo)return Ir;Oo=1;var e=ye();Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.default=void 0;var r=e(be()),t=we();return Ir.default=(0,r.default)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Ir}var tg=eg();const la=pe(tg);var Er={},Ro;function rg(){if(Ro)return Er;Ro=1;var e=ye();Object.defineProperty(Er,"__esModule",{value:!0}),Er.default=void 0;var r=e(be()),t=we();return Er.default=(0,r.default)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Er}var ng=rg();const wn=pe(ng);var Or={},_o;function ag(){if(_o)return Or;_o=1;var e=ye();Object.defineProperty(Or,"__esModule",{value:!0}),Or.default=void 0;var r=e(be()),t=we();return Or.default=(0,r.default)((0,t.jsx)("path",{d:"M17 12h-5v5h5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1zm3 18H5V8h14z"}),"Event"),Or}var og=ag();const sg=pe(og);var Rr={},Ao;function ig(){if(Ao)return Rr;Ao=1;var e=ye();Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.default=void 0;var r=e(be()),t=we();return Rr.default=(0,r.default)((0,t.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),Rr}var lg=ig();const qs=pe(lg);var _r={},Fo;function cg(){if(Fo)return _r;Fo=1;var e=ye();Object.defineProperty(_r,"__esModule",{value:!0}),_r.default=void 0;var r=e(be()),t=we();return _r.default=(0,r.default)((0,t.jsx)("path",{d:"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z"}),"Devices"),_r}var ug=cg();const dg=pe(ug),hg=({annotation:e,onEdit:r,onDelete:t})=>{const a=s=>{switch(s){case"vacation":return o.jsx(sg,{});case"guests":return o.jsx(qs,{});case"appliance":return o.jsx(dg,{});case"weather":return o.jsx(fn,{});default:return o.jsx(Qr,{})}},n=s=>{switch(s){case"vacation":return"primary";case"guests":return"secondary";case"appliance":return"warning";case"weather":return"info";default:return"default"}};return o.jsx(Ee,{sx:{mb:2},children:o.jsx(Oe,{children:o.jsxs(H,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[o.jsxs(H,{sx:{flex:1},children:[o.jsx(O,{variant:"h6",gutterBottom:!0,children:e.title}),o.jsx(O,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description}),o.jsxs(kt,{direction:"row",spacing:1,sx:{mb:2},children:[o.jsx(gt,{icon:a(e.category),label:e.category,color:n(e.category),size:"small"}),o.jsx(gt,{label:e.date,variant:"outlined",size:"small"})]})]}),o.jsxs(H,{children:[o.jsx(Le,{size:"small",onClick:()=>r(e),children:o.jsx(Qr,{})}),o.jsx(Le,{size:"small",onClick:()=>t(e.id),color:"error",children:o.jsx(wn,{})})]})]})})})},fg=()=>{const[e,r]=f.useState([]),[t,a]=f.useState(!1),[n,s]=f.useState(null),[i,l]=f.useState(!1),[u,c]=f.useState(null),[d,m]=f.useState({title:"",description:"",category:"general",date:new Date,dateRange:!1}),{selectedMeetingPoint:g,loading:h}=Xr();f.useEffect(()=>{g?v():r([])},[g]);const v=async()=>{if(g){a(!0),s(null);try{const p=await ze(`/api/annotations?meteringPointId=${g.id}`);if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const M=await p.json();if(M.success)r(M.annotations||[]);else throw new Error(M.error||"Failed to fetch annotations")}catch(p){console.error("Error fetching annotations:",p),s(p.message)}finally{a(!1)}}},y=()=>{c(null),m({title:"",description:"",category:"general",date:new Date,dateRange:!1}),l(!0)},b=p=>{c(p),m({title:p.title,description:p.description,category:p.category,date:new Date(p.date),dateRange:p.dateRange}),l(!0)},P=async()=>{if(!g){s("Please select a metering point");return}a(!0),s(null);try{const p={title:d.title,description:d.description,category:d.category,date:d.date.toISOString().split("T")[0],dateRange:d.dateRange,meteringPointId:g.id},M=u?"PUT":"POST",C=u?`/api/annotations/${u.id}`:"/api/annotations",A=await ze(C,{method:M,body:JSON.stringify(p)});if(!A.ok)throw new Error(`HTTP error! status: ${A.status}`);const I=await A.json();if(!I.success)throw new Error(I.error||"Failed to save annotation");await v(),l(!1)}catch(p){console.error("Error saving annotation:",p),s(p.message)}finally{a(!1)}},w=async p=>{if(window.confirm("Are you sure you want to delete this annotation?")){a(!0),s(null);try{const M=await ze(`/api/annotations/${p}`,{method:"DELETE"});if(!M.ok)throw new Error(`HTTP error! status: ${M.status}`);const C=await M.json();if(!C.success)throw new Error(C.error||"Failed to delete annotation");await v()}catch(M){console.error("Error deleting annotation:",M),s(M.message)}finally{a(!1)}}};return o.jsx(qt,{dateAdapter:kn,children:o.jsxs(H,{children:[o.jsxs(H,{sx:{mb:4},children:[o.jsx(O,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Consumption Annotations"}),o.jsx(O,{variant:"body1",color:"text.secondary",children:"Add context and notes to your consumption data to better understand usage patterns."})]}),o.jsx(Qe,{severity:"info",sx:{mb:3},children:"Annotations are stored per metering point. Select a metering point to view and manage annotations."}),n&&o.jsx(Qe,{severity:"error",sx:{mb:3},onClose:()=>s(null),children:n}),o.jsxs(H,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[o.jsxs(O,{variant:"h6",children:["Your Annotations (",e.length,")"]}),o.jsxs(kt,{direction:"row",spacing:1,children:[o.jsx(Me,{variant:"outlined",size:"small",startIcon:t?o.jsx(tt,{size:16}):o.jsx(An,{}),onClick:v,disabled:t||h||!g,children:"Refresh"}),o.jsx(Me,{variant:"contained",startIcon:o.jsx(la,{}),onClick:y,disabled:!g,children:"Add Annotation"})]})]}),o.jsx(ee,{container:!0,spacing:3,children:o.jsx(ee,{item:!0,xs:12,children:t?o.jsxs(H,{sx:{p:4,textAlign:"center",color:"text.secondary"},children:[o.jsx(tt,{sx:{mb:2}}),o.jsx(O,{variant:"h6",gutterBottom:!0,children:"Loading Annotations..."})]}):g?e.length===0?o.jsx(Ee,{children:o.jsx(Oe,{children:o.jsxs(H,{sx:{p:4,textAlign:"center",color:"text.secondary"},children:[o.jsx(Qr,{sx:{fontSize:64,mb:2,opacity:.3}}),o.jsx(O,{variant:"h6",gutterBottom:!0,children:"No Annotations Yet"}),o.jsx(O,{variant:"body2",children:"Start adding notes to your consumption data to track events that affect your electricity usage."})]})})}):e.map(p=>o.jsx(hg,{annotation:p,onEdit:b,onDelete:w},p.id)):o.jsx(Ee,{children:o.jsx(Oe,{children:o.jsxs(H,{sx:{p:4,textAlign:"center",color:"text.secondary"},children:[o.jsx(Qr,{sx:{fontSize:64,mb:2,opacity:.3}}),o.jsx(O,{variant:"h6",gutterBottom:!0,children:"No Metering Point Selected"}),o.jsx(O,{variant:"body2",children:"Please select a metering point from the header to view and manage annotations."})]})})})})}),o.jsxs(Yr,{open:i,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,children:[o.jsx(hn,{children:u?"Edit Annotation":"Add New Annotation"}),o.jsx(Ur,{children:o.jsxs(kt,{spacing:3,sx:{mt:1},children:[o.jsx(ke,{label:"Title",value:d.title,onChange:p=>m({...d,title:p.target.value}),fullWidth:!0,required:!0}),o.jsx(ke,{label:"Description",value:d.description,onChange:p=>m({...d,description:p.target.value}),fullWidth:!0,multiline:!0,rows:3}),o.jsxs(Hr,{fullWidth:!0,children:[o.jsx(ua,{children:"Category"}),o.jsxs(zr,{value:d.category,label:"Category",onChange:p=>m({...d,category:p.target.value}),children:[o.jsx(Je,{value:"general",children:"General"}),o.jsx(Je,{value:"vacation",children:"Vacation"}),o.jsx(Je,{value:"guests",children:"Guests"}),o.jsx(Je,{value:"appliance",children:"Appliance Change"}),o.jsx(Je,{value:"weather",children:"Weather Event"})]})]}),o.jsx(Ut,{label:"Date",value:d.date,onChange:p=>m({...d,date:p}),maxDate:new Date,format:"dd/MM/yyyy",slotProps:{textField:{fullWidth:!0}}})]})}),o.jsxs(qr,{children:[o.jsx(Me,{onClick:()=>l(!1),children:"Cancel"}),o.jsxs(Me,{onClick:P,variant:"contained",disabled:!d.title,children:[u?"Update":"Add"," Annotation"]})]})]})]})})};var Ar={},No;function mg(){if(No)return Ar;No=1;var e=ye();Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.default=void 0;var r=e(be()),t=we();return Ar.default=(0,r.default)((0,t.jsx)("path",{d:"M12 2c-4.96 0-9 4.04-9 9 0 3.91 2.51 7.24 6 8.47V22h2v-2.06c.33.04.66.06 1 .06s.67-.02 1-.06V22h2v-2.53c3.49-1.24 6-4.57 6-8.47 0-4.96-4.04-9-9-9m2.25 12-3 3-1.5-1.5L11 14.25 9.75 13l3-3 1.5 1.5L13 12.75zM16 9H8V7h8z"}),"ElectricMeter"),Ar}var pg=mg();const gg=pe(pg);var Fr={},Vo;function vg(){if(Vo)return Fr;Vo=1;var e=ye();Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.default=void 0;var r=e(be()),t=we();return Fr.default=(0,r.default)((0,t.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Fr}var xg=vg();const yg=pe(xg);var Nr={},Lo;function wg(){if(Lo)return Nr;Lo=1;var e=ye();Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.default=void 0;var r=e(be()),t=we();return Nr.default=(0,r.default)((0,t.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),Nr}var bg=wg();const Dg=pe(bg);var Vr={},Wo;function Pg(){if(Wo)return Vr;Wo=1;var e=ye();Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.default=void 0;var r=e(be()),t=we();return Vr.default=(0,r.default)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Vr}var jg=Pg();const Cg=pe(jg),Sg=()=>{const[e,r]=f.useState([]),[t,a]=f.useState(!1),[n,s]=f.useState(null),[i,l]=f.useState(null),[u,c]=f.useState(!1),[d,m]=f.useState(!1),[g,h]=f.useState(null),[v,y]=f.useState(null),[b,P]=f.useState(""),[w,p]=f.useState(""),[M,C]=f.useState(""),[A,I]=f.useState(""),[R,D]=f.useState(!0),[N,W]=f.useState(""),[k,E]=f.useState("");f.useEffect(()=>{j()},[]);const j=async()=>{a(!0);try{const _=await ze("/api/settings/properties");if(!_.ok)throw new Error("Failed to fetch properties");const z=await _.json();r(z),z.length>0&&i===null&&l(z[0].id)}catch(_){s(_.message)}finally{a(!1)}},x=async()=>{try{const _=g?"PUT":"POST",z=g?`/api/settings/properties/${g.id}`:"/api/settings/properties";if(!(await ze(z,{method:_,body:JSON.stringify({name:b,refresh_token:w,latitude:M||null,longitude:A||null,weather_sync_enabled:R})})).ok)throw new Error("Failed to save property");c(!1),V(),j()}catch(_){s(_.message)}},F=async(_,z)=>{if(z.stopPropagation(),!!window.confirm("Delete this property and all its metering points?"))try{if(!(await fetch(`/api/settings/properties/${_}`,{method:"DELETE"})).ok)throw new Error("Failed to delete property");j()}catch(L){s(L.message)}},$=(_,z)=>{z.stopPropagation(),h(_),P(_.name),p(_.refresh_token||""),C(_.latitude||""),I(_.longitude||""),D(_.weather_sync_enabled),c(!0)},V=()=>{h(null),P(""),p(""),C(""),I(""),D(!0)},B=async()=>{try{const _=await ze(`/api/settings/properties/${v}/metering-points`,{method:"POST",body:JSON.stringify({name:N,meteringPointId:k})});if(!_.ok){const z=await _.json().catch(()=>({}));throw new Error(z.error||"Failed to add metering point")}m(!1),W(""),E(""),j()}catch(_){s(_.message)}},G=async _=>{if(window.confirm("Delete this metering point?"))try{if(!(await fetch(`/api/settings/metering-points/${_}`,{method:"DELETE"})).ok)throw new Error("Failed to delete metering point");j()}catch(z){s(z.message)}};return o.jsxs(H,{sx:{maxWidth:1e3,mx:"auto",p:2},children:[o.jsxs(H,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[o.jsx(O,{variant:"h4",sx:{fontWeight:"bold"},children:"Settings"}),o.jsx(Me,{variant:"contained",startIcon:o.jsx(la,{}),onClick:()=>{V(),c(!0)},children:"Add Property"})]}),n&&o.jsx(Qe,{severity:"error",sx:{mb:3},onClose:()=>s(null),children:n}),t&&e.length===0?o.jsx(H,{display:"flex",justifyContent:"center",p:4,children:o.jsx(tt,{})}):o.jsx(ee,{container:!0,spacing:3,children:e.map(_=>o.jsx(ee,{item:!0,xs:12,children:o.jsxs(Ee,{variant:"outlined",sx:{borderRadius:2},children:[o.jsxs(H,{sx:{p:2,display:"flex",alignItems:"center",cursor:"pointer",bgcolor:i===_.id?"action.hover":"inherit","&:hover":{bgcolor:"action.hover"}},onClick:()=>l(i===_.id?null:_.id),children:[o.jsx(qs,{sx:{mr:2,color:"primary.main"}}),o.jsxs(H,{sx:{flexGrow:1},children:[o.jsx(O,{variant:"h6",sx:{fontWeight:"medium"},children:_.name}),o.jsxs(O,{variant:"body2",color:"text.secondary",children:[_.meteringPoints?.length||0," Metering Points  ",_.weather_sync_enabled?"Weather Sync On":"Weather Sync Off"]})]}),o.jsxs(H,{children:[o.jsx(ra,{title:"Edit Property",children:o.jsx(Le,{onClick:z=>$(_,z),children:o.jsx(Cg,{fontSize:"small"})})}),o.jsx(ra,{title:"Delete Property",children:o.jsx(Le,{onClick:z=>F(_.id,z),color:"error",children:o.jsx(wn,{fontSize:"small"})})}),o.jsx(Le,{size:"small",children:i===_.id?o.jsx(Dg,{}):o.jsx(yg,{})})]})]}),o.jsxs(ci,{in:i===_.id,children:[o.jsx(Vt,{}),o.jsxs(Oe,{sx:{bgcolor:"background.default"},children:[o.jsxs(H,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[o.jsxs(O,{variant:"subtitle1",sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:[o.jsx(gg,{sx:{mr:1,fontSize:"1.2rem"}}),"Metering Points"]}),o.jsx(Me,{size:"small",startIcon:o.jsx(la,{}),onClick:()=>{y(_.id),m(!0)},children:"Add Meter"})]}),o.jsx(st,{variant:"outlined",children:o.jsxs(Nt,{dense:!0,children:[_.meteringPoints?.map((z,L)=>o.jsxs(fa.Fragment,{children:[L>0&&o.jsx(Vt,{}),o.jsxs(ct,{children:[o.jsx(ut,{primary:z.name,secondary:z.meteringPointId}),o.jsx(ui,{children:o.jsx(Le,{edge:"end",size:"small",onClick:()=>G(z.id),children:o.jsx(wn,{fontSize:"small"})})})]})]},z.id)),(!_.meteringPoints||_.meteringPoints.length===0)&&o.jsx(ct,{children:o.jsx(ut,{secondary:"No metering points added yet.",sx:{fontStyle:"italic"}})})]})}),o.jsxs(H,{sx:{mt:3},children:[o.jsx(O,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Configuration Details"}),o.jsxs(ee,{container:!0,spacing:2,children:[o.jsxs(ee,{item:!0,xs:12,sm:6,children:[o.jsx(O,{variant:"caption",display:"block",children:"REFRESH TOKEN"}),o.jsx(O,{variant:"body2",sx:{fontFamily:"monospace",bgcolor:"action.disabledBackground",p:.5,borderRadius:1},children:_.refresh_token||"None"})]}),o.jsxs(ee,{item:!0,xs:12,sm:3,children:[o.jsx(O,{variant:"caption",display:"block",children:"COORDINATES"}),o.jsx(O,{variant:"body2",children:_.latitude&&_.longitude?`${_.latitude}, ${_.longitude}`:"Not set"})]}),o.jsxs(ee,{item:!0,xs:12,sm:3,children:[o.jsx(O,{variant:"caption",display:"block",children:"WEATHER SYNC"}),o.jsx(O,{variant:"body2",color:_.weather_sync_enabled?"success.main":"text.disabled",children:_.weather_sync_enabled?"Enabled":"Disabled"})]})]})]})]})]})]})},_.id))}),o.jsx(Ee,{sx:{mt:4,borderRadius:2},children:o.jsxs(Oe,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Application Settings"}),o.jsx(Oa,{control:o.jsx(Ra,{defaultChecked:!0}),label:"Dark Mode"})]})}),o.jsxs(Yr,{open:u,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,children:[o.jsx(hn,{children:g?"Edit Property":"Add New Property"}),o.jsxs(Ur,{children:[o.jsx(ke,{autoFocus:!0,margin:"dense",label:"Property Name (e.g. Summer House)",fullWidth:!0,value:b,onChange:_=>P(_.target.value),sx:{mb:2,mt:1}}),o.jsx(ke,{margin:"dense",label:"Eloverblik Refresh Token",fullWidth:!0,multiline:!0,rows:2,value:w,onChange:_=>p(_.target.value),placeholder:"eyJhbGciOi...",sx:{mb:2}}),o.jsxs(ee,{container:!0,spacing:2,children:[o.jsx(ee,{item:!0,xs:6,children:o.jsx(ke,{label:"Latitude",fullWidth:!0,value:M,onChange:_=>C(_.target.value),placeholder:"55.1234"})}),o.jsx(ee,{item:!0,xs:6,children:o.jsx(ke,{label:"Longitude",fullWidth:!0,value:A,onChange:_=>I(_.target.value),placeholder:"10.5678"})})]}),o.jsx(H,{sx:{mt:2},children:o.jsx(Oa,{control:o.jsx(Ra,{checked:R,onChange:_=>D(_.target.checked)}),label:"Enable Weather Sync"})})]}),o.jsxs(qr,{sx:{p:2,pt:0},children:[o.jsx(Me,{onClick:()=>c(!1),children:"Cancel"}),o.jsx(Me,{onClick:x,variant:"contained",disabled:!b,children:"Save Property"})]})]}),o.jsxs(Yr,{open:d,onClose:()=>m(!1),maxWidth:"xs",fullWidth:!0,children:[o.jsx(hn,{children:"Add Metering Point"}),o.jsxs(Ur,{children:[o.jsx(ke,{autoFocus:!0,margin:"dense",label:"Meter Name (e.g. Main Kitchen)",fullWidth:!0,value:N,onChange:_=>W(_.target.value),sx:{mb:2,mt:1}}),o.jsx(ke,{margin:"dense",label:"18-digit Metering Point ID",fullWidth:!0,value:k,onChange:_=>E(_.target.value),inputProps:{maxLength:18}})]}),o.jsxs(qr,{sx:{p:2,pt:0},children:[o.jsx(Me,{onClick:()=>m(!1),children:"Cancel"}),o.jsx(Me,{onClick:B,variant:"contained",disabled:!N||k.length!==18,children:"Add Meter"})]})]})]})},Mg=()=>{const[e,r]=f.useState(""),[t,a]=f.useState(""),[n,s]=f.useState(""),[i,l]=f.useState(!1),{login:u}=Et(),c=Kr(),m=da().state?.from?.pathname||"/",g=async h=>{h.preventDefault(),s(""),l(!0);try{const v=await u(e,t);v.success?c(m,{replace:!0}):s(v.error)}catch{s("An unexpected error occurred. Please try again.")}finally{l(!1)}};return o.jsx(H,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default",p:3},children:o.jsx(Ee,{sx:{maxWidth:400,width:"100%",borderRadius:3,boxShadow:10},children:o.jsxs(Oe,{sx:{p:4},children:[o.jsxs(H,{sx:{textAlign:"center",mb:4},children:[o.jsx(H,{sx:{width:60,height:60,borderRadius:"50%",bgcolor:"primary.main",display:"inline-flex",alignItems:"center",justifyContent:"center",mb:2,boxShadow:"0 0 20px rgba(0, 229, 255, 0.4)"},children:o.jsx(pa,{sx:{fontSize:35,color:"#fff"}})}),o.jsx(O,{variant:"h4",sx:{fontWeight:"bold"},children:"Welcome Back"}),o.jsx(O,{variant:"body2",color:"text.secondary",children:"Sign in to manage your electricity consumption"})]}),n&&o.jsx(Qe,{severity:"error",sx:{mb:3},children:n}),o.jsxs("form",{onSubmit:g,children:[o.jsx(ke,{fullWidth:!0,label:"Email Address",type:"email",value:e,onChange:h=>r(h.target.value),margin:"normal",required:!0,autoFocus:!0}),o.jsx(ke,{fullWidth:!0,label:"Password",type:"password",value:t,onChange:h=>a(h.target.value),margin:"normal",required:!0}),o.jsx(Me,{fullWidth:!0,type:"submit",variant:"contained",size:"large",disabled:i,sx:{mt:4,py:1.5,borderRadius:2,fontWeight:"bold"},children:i?o.jsx(tt,{size:24,color:"inherit"}):"Sign In"}),o.jsx(Me,{fullWidth:!0,variant:"outlined",size:"large",onClick:()=>{r("admin@example.com"),a("admin123")},sx:{mt:2,borderRadius:2,borderStyle:"dashed"},children:"Developer Bypass (Quick Access)"}),o.jsx(H,{sx:{mt:3,textAlign:"center"},children:o.jsxs(O,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",o.jsx(Qo,{component:ha,to:"/register",underline:"hover",sx:{fontWeight:"medium"},children:"Register here"})]})})]})]})})})},Tg=()=>{const e=Kr(),{register:r}=Et(),[t,a]=f.useState({email:"",password:"",confirmPassword:"",name:""}),[n,s]=f.useState(""),[i,l]=f.useState(!1),[u,c]=f.useState(!1),[d,m]=f.useState(!1),h=(w=>{let p=0;return w.length>=8&&(p+=25),w.length>=12&&(p+=15),/[a-z]/.test(w)&&(p+=15),/[A-Z]/.test(w)&&(p+=15),/[0-9]/.test(w)&&(p+=15),/[^a-zA-Z0-9]/.test(w)&&(p+=15),p})(t.password),v=()=>h<40?"error":h<70?"warning":"success",y=()=>h<40?"Weak":h<70?"Medium":"Strong",b=w=>{a({...t,[w.target.name]:w.target.value}),s("")},P=async w=>{if(w.preventDefault(),s(""),!t.email||!t.password){s("Email and password are required");return}if(t.password!==t.confirmPassword){s("Passwords do not match");return}if(t.password.length<8){s("Password must be at least 8 characters long");return}l(!0);try{const p=await r({email:t.email,password:t.password,name:t.name||void 0});p.success?p.user.onboarding_completed?e("/"):e("/onboarding"):s(p.error||"Registration failed")}catch(p){s(p.message||"An error occurred during registration")}finally{l(!1)}};return o.jsx(H,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",py:4},children:o.jsx(Dn,{maxWidth:"sm",children:o.jsx(Ee,{elevation:8,sx:{borderRadius:3},children:o.jsxs(Oe,{sx:{p:4},children:[o.jsxs(H,{sx:{textAlign:"center",mb:3},children:[o.jsx(di,{sx:{fontSize:60,color:"primary.main",mb:2}}),o.jsx(O,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Create Account"}),o.jsx(O,{variant:"body2",color:"text.secondary",children:"Join to start tracking your electricity consumption"})]}),n&&o.jsx(Qe,{severity:"error",sx:{mb:3},onClose:()=>s(""),children:n}),o.jsxs("form",{onSubmit:P,children:[o.jsx(ke,{fullWidth:!0,label:"Email",name:"email",type:"email",value:t.email,onChange:b,margin:"normal",required:!0,autoFocus:!0,disabled:i}),o.jsx(ke,{fullWidth:!0,label:"Name (Optional)",name:"name",type:"text",value:t.name,onChange:b,margin:"normal",disabled:i,helperText:"Your display name"}),o.jsx(ke,{fullWidth:!0,label:"Password",name:"password",type:u?"text":"password",value:t.password,onChange:b,margin:"normal",required:!0,disabled:i,InputProps:{endAdornment:o.jsx(nt,{position:"end",children:o.jsx(Le,{onClick:()=>c(!u),edge:"end",children:u?o.jsx(Lr,{}):o.jsx(Wr,{})})})}}),t.password&&o.jsxs(H,{sx:{mt:1,mb:2},children:[o.jsxs(H,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[o.jsx(O,{variant:"caption",color:"text.secondary",children:"Password Strength:"}),o.jsx(O,{variant:"caption",color:`${v()}.main`,children:y()})]}),o.jsx(hi,{variant:"determinate",value:h,color:v(),sx:{height:6,borderRadius:3}})]}),o.jsx(ke,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:d?"text":"password",value:t.confirmPassword,onChange:b,margin:"normal",required:!0,disabled:i,error:t.confirmPassword&&t.password!==t.confirmPassword,helperText:t.confirmPassword&&t.password!==t.confirmPassword?"Passwords do not match":"",InputProps:{endAdornment:o.jsx(nt,{position:"end",children:o.jsx(Le,{onClick:()=>m(!d),edge:"end",children:d?o.jsx(Lr,{}):o.jsx(Wr,{})})})}}),o.jsx(Me,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:i,sx:{mt:3,mb:2,py:1.5},children:i?"Creating Account...":"Create Account"}),o.jsx(H,{sx:{textAlign:"center"},children:o.jsxs(O,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",o.jsx(Qo,{component:ha,to:"/login",underline:"hover",children:"Sign in here"})]})})]})]})})})})},kg=()=>{const{user:e,updateProfile:r}=Et(),[t,a]=f.useState({name:e?.name||"",email:e?.email||""}),[n,s]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,l]=f.useState(!1),[u,c]=f.useState(!1),[d,m]=f.useState(!1),[g,h]=f.useState(""),[v,y]=f.useState(""),[b,P]=f.useState(!1),w=I=>{a({...t,[I.target.name]:I.target.value}),y(""),h("")},p=I=>{s({...n,[I.target.name]:I.target.value}),y(""),h("")},M=async I=>{I.preventDefault(),y(""),h(""),P(!0);try{const R=await r({name:t.name,email:t.email});R.success?h("Profile updated successfully"):y(R.error||"Failed to update profile")}catch(R){y(R.message||"An error occurred")}finally{P(!1)}},C=async I=>{if(I.preventDefault(),y(""),h(""),n.newPassword!==n.confirmPassword){y("New passwords do not match");return}if(n.newPassword.length<8){y("Password must be at least 8 characters long");return}P(!0);try{const R=await r({currentPassword:n.currentPassword,newPassword:n.newPassword});R.success?(h("Password changed successfully"),s({currentPassword:"",newPassword:"",confirmPassword:""})):y(R.error||"Failed to change password")}catch(R){y(R.message||"An error occurred")}finally{P(!1)}},A=()=>e?.name?e.name.split(" ").map(I=>I[0]).join("").toUpperCase().slice(0,2):e?.email?.charAt(0).toUpperCase()||"U";return o.jsxs(Dn,{maxWidth:"lg",sx:{py:4},children:[o.jsxs(H,{sx:{mb:4},children:[o.jsx(O,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Profile Settings"}),o.jsx(O,{variant:"body1",color:"text.secondary",children:"Manage your account information and security settings"})]}),v&&o.jsx(Qe,{severity:"error",sx:{mb:3},onClose:()=>y(""),children:v}),g&&o.jsx(Qe,{severity:"success",sx:{mb:3},onClose:()=>h(""),children:g}),o.jsxs(ee,{container:!0,spacing:3,children:[o.jsx(ee,{item:!0,xs:12,md:6,children:o.jsx(Ee,{children:o.jsxs(Oe,{sx:{p:3},children:[o.jsxs(H,{sx:{display:"flex",alignItems:"center",mb:3},children:[o.jsx(Ho,{sx:{width:64,height:64,bgcolor:"primary.main",fontSize:"1.5rem",mr:2},children:A()}),o.jsxs(H,{children:[o.jsx(O,{variant:"h6",sx:{fontWeight:"medium"},children:e?.name||"User"}),o.jsx(O,{variant:"body2",color:"text.secondary",children:e?.email})]})]}),o.jsx(Vt,{sx:{my:3}}),o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{mb:2},children:"Personal Information"}),o.jsxs("form",{onSubmit:M,children:[o.jsx(ke,{fullWidth:!0,label:"Name",name:"name",value:t.name,onChange:w,margin:"normal",disabled:b,InputProps:{startAdornment:o.jsx(nt,{position:"start",children:o.jsx(fi,{})})}}),o.jsx(ke,{fullWidth:!0,label:"Email",name:"email",type:"email",value:t.email,onChange:w,margin:"normal",disabled:b,InputProps:{startAdornment:o.jsx(nt,{position:"start",children:o.jsx(mi,{})})}}),o.jsx(Me,{type:"submit",variant:"contained",disabled:b,sx:{mt:3},fullWidth:!0,children:"Save Changes"})]})]})})}),o.jsx(ee,{item:!0,xs:12,md:6,children:o.jsx(Ee,{children:o.jsxs(Oe,{sx:{p:3},children:[o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{mb:2},children:"Change Password"}),o.jsx(O,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Ensure your account stays secure by using a strong password"}),o.jsxs("form",{onSubmit:C,children:[o.jsx(ke,{fullWidth:!0,label:"Current Password",name:"currentPassword",type:i?"text":"password",value:n.currentPassword,onChange:p,margin:"normal",disabled:b,InputProps:{startAdornment:o.jsx(nt,{position:"start",children:o.jsx(Bn,{})}),endAdornment:o.jsx(nt,{position:"end",children:o.jsx(Le,{onClick:()=>l(!i),edge:"end",children:i?o.jsx(Lr,{}):o.jsx(Wr,{})})})}}),o.jsx(ke,{fullWidth:!0,label:"New Password",name:"newPassword",type:u?"text":"password",value:n.newPassword,onChange:p,margin:"normal",disabled:b,helperText:"Minimum 8 characters",InputProps:{startAdornment:o.jsx(nt,{position:"start",children:o.jsx(Bn,{})}),endAdornment:o.jsx(nt,{position:"end",children:o.jsx(Le,{onClick:()=>c(!u),edge:"end",children:u?o.jsx(Lr,{}):o.jsx(Wr,{})})})}}),o.jsx(ke,{fullWidth:!0,label:"Confirm New Password",name:"confirmPassword",type:d?"text":"password",value:n.confirmPassword,onChange:p,margin:"normal",disabled:b,error:n.confirmPassword&&n.newPassword!==n.confirmPassword,helperText:n.confirmPassword&&n.newPassword!==n.confirmPassword?"Passwords do not match":"",InputProps:{startAdornment:o.jsx(nt,{position:"start",children:o.jsx(Bn,{})}),endAdornment:o.jsx(nt,{position:"end",children:o.jsx(Le,{onClick:()=>m(!d),edge:"end",children:d?o.jsx(Lr,{}):o.jsx(Wr,{})})})}}),o.jsx(Me,{type:"submit",variant:"contained",disabled:b||!n.currentPassword||!n.newPassword,sx:{mt:3},fullWidth:!0,children:"Update Password"})]})]})})}),o.jsx(ee,{item:!0,xs:12,children:o.jsx(Ee,{children:o.jsxs(Oe,{sx:{p:3},children:[o.jsx(O,{variant:"h6",gutterBottom:!0,children:"Account Summary"}),o.jsxs(ee,{container:!0,spacing:2,sx:{mt:1},children:[o.jsxs(ee,{item:!0,xs:12,sm:6,md:3,children:[o.jsx(O,{variant:"body2",color:"text.secondary",children:"Account Status"}),o.jsx(O,{variant:"body1",sx:{fontWeight:"medium"},children:"Active"})]}),o.jsxs(ee,{item:!0,xs:12,sm:6,md:3,children:[o.jsx(O,{variant:"body2",color:"text.secondary",children:"Onboarding Status"}),o.jsx(O,{variant:"body1",sx:{fontWeight:"medium"},children:e?.onboarding_completed?"Complete":"Pending"})]}),o.jsxs(ee,{item:!0,xs:12,sm:6,md:3,children:[o.jsx(O,{variant:"body2",color:"text.secondary",children:"Email"}),o.jsx(O,{variant:"body1",sx:{fontWeight:"medium"},children:e?.email})]}),o.jsxs(ee,{item:!0,xs:12,sm:6,md:3,children:[o.jsx(O,{variant:"body2",color:"text.secondary",children:"User ID"}),o.jsxs(O,{variant:"body1",sx:{fontWeight:"medium"},children:["#",e?.id]})]})]})]})})})]})]})},$o=["Welcome","Property Info","El-overblik Token","Metering Points","Coordinates","Review"],Ig=({onComplete:e,onSkip:r})=>{const t=Kr(),[a,n]=f.useState(0),[s,i]=f.useState(""),[l,u]=f.useState(!1),[c,d]=f.useState({name:"",address:"",refreshToken:"",latitude:"",longitude:"",meteringPoints:[{name:"",meteringPointId:""}]}),[m,g]=f.useState(!1),[h,v]=f.useState([]),[y,b]=f.useState(!1),[P,w]=f.useState(null),p=()=>{if(i(""),a===1&&!c.name.trim()){i("Property name is required");return}if(a===2){if(!c.refreshToken.trim()){i("El-overblik refresh token is required");return}if(!y){i("Please validate your token before proceeding");return}}if(a===3&&c.meteringPoints.filter(E=>E.meteringPointId.trim().length===18).length===0){i("At least one valid 18-digit metering point ID is required");return}if(a===4){if(c.latitude&&(parseFloat(c.latitude)<-90||parseFloat(c.latitude)>90)){i("Latitude must be between -90 and 90");return}if(c.longitude&&(parseFloat(c.longitude)<-180||parseFloat(c.longitude)>180)){i("Longitude must be between -180 and 180");return}}n(k=>k+1)},M=()=>{i(""),n(k=>k-1)},C=(k,E)=>{d({...c,[k]:E}),i("")},A=(k,E,j)=>{const x=[...c.meteringPoints];x[k][E]=j,d({...c,meteringPoints:x}),i("")},I=async()=>{if(!c.refreshToken.trim()){i("Please enter a refresh token");return}g(!0),i("");try{const k=await ze("/api/settings/validate-token",{method:"POST",body:JSON.stringify({refresh_token:c.refreshToken})});if(!k.ok){const j=await k.json();throw new Error(j.error||"Failed to validate token")}const E=await k.json();if(w(E),v(E.result||[]),b(!0),E&&E.result&&E.result.length>0){const j=E.result.map(x=>({name:x.type==="E17"?"Consumption":x.type==="E18"?"Production":"Meter",meteringPointId:x.meteringPointId}));d(x=>({...x,meteringPoints:j}))}}catch(k){i(k.message),b(!1)}finally{g(!1)}},R=()=>{d({...c,meteringPoints:[...c.meteringPoints,{name:"",meteringPointId:""}]})},D=k=>{if(c.meteringPoints.length>1){const E=c.meteringPoints.filter((j,x)=>x!==k);d({...c,meteringPoints:E})}},N=async()=>{i(""),u(!0);try{const k=await ze("/api/settings/properties",{method:"POST",body:JSON.stringify({name:c.name,address:c.address||null,refresh_token:c.refreshToken,latitude:c.latitude||null,longitude:c.longitude||null,weather_sync_enabled:!!(c.latitude&&c.longitude)})});if(!k.ok)throw new Error("Failed to create property");const E=await k.json(),j=c.meteringPoints.filter(x=>x.meteringPointId.trim().length===18);for(const x of j)(await ze(`/api/settings/properties/${E.id}/metering-points`,{method:"POST",body:JSON.stringify({name:x.name||"Main Meter",meteringPointId:x.meteringPointId.trim()})})).ok||console.error("Failed to add metering point:",x);try{await ze(`/api/settings/properties/${E.id}/sync-initial`,{method:"POST"})}catch(x){console.error("Failed to trigger initial sync:",x)}e?e():t("/")}catch(k){i(k.message||"Failed to create property")}finally{u(!1)}},W=()=>{switch(a){case 0:return o.jsxs(H,{sx:{textAlign:"center",py:4},children:[o.jsx(Aa,{sx:{fontSize:80,color:"primary.main",mb:3}}),o.jsx(O,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Welcome to Property Setup!"}),o.jsx(O,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Let's set up your first property to start tracking electricity consumption."}),o.jsx(O,{variant:"body2",color:"text.secondary",paragraph:!0,children:"This wizard will guide you through:"}),o.jsx(H,{sx:{mt:3},children:o.jsxs(ee,{container:!0,spacing:2,justifyContent:"center",children:[o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsxs(st,{elevation:1,sx:{p:2},children:[o.jsx(Aa,{color:"primary"}),o.jsx(O,{variant:"caption",display:"block",children:"Property Details"})]})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsxs(st,{elevation:1,sx:{p:2},children:[o.jsx(_a,{color:"primary"}),o.jsx(O,{variant:"caption",display:"block",children:"API Token"})]})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsxs(st,{elevation:1,sx:{p:2},children:[o.jsx(Di,{color:"primary"}),o.jsx(O,{variant:"caption",display:"block",children:"Meter ID"})]})}),o.jsx(ee,{item:!0,xs:12,sm:6,md:3,children:o.jsxs(st,{elevation:1,sx:{p:2},children:[o.jsx(Pi,{color:"primary"}),o.jsx(O,{variant:"caption",display:"block",children:"Location"})]})})]})}),r&&o.jsx(Me,{variant:"text",onClick:r,sx:{mt:4},children:"Skip for now, I'll set up manually later"})]});case 1:return o.jsxs(H,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:3},children:"Property Information"}),o.jsx(ke,{fullWidth:!0,required:!0,label:"Property Name",placeholder:"e.g., Summer House, Copenhagen Apartment",value:c.name,onChange:k=>C("name",k.target.value),margin:"normal",helperText:"Give your property a descriptive name"}),o.jsx(ke,{fullWidth:!0,label:"Address (Optional)",placeholder:"e.g., Nyhavn 12, 1051 Copenhagen",value:c.address,onChange:k=>C("address",k.target.value),margin:"normal",helperText:"Optional: Physical address of the property"})]});case 2:return o.jsxs(H,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2},children:"El-overblik Refresh Token"}),o.jsxs(Qe,{severity:"info",sx:{mb:3},children:[o.jsx(O,{variant:"body2",gutterBottom:!0,sx:{fontWeight:"medium"},children:"How to get your refresh token:"}),o.jsxs(Nt,{dense:!0,children:[o.jsx(ct,{children:o.jsx(ut,{primary:"1. Go to eloverblik.dk and log in",primaryTypographyProps:{variant:"body2"}})}),o.jsx(ct,{children:o.jsx(ut,{primary:"2. Navigate to Settings  API",primaryTypographyProps:{variant:"body2"}})}),o.jsx(ct,{children:o.jsx(ut,{primary:"3. Generate a new refresh token or copy your existing one",primaryTypographyProps:{variant:"body2"}})}),o.jsx(ct,{children:o.jsx(ut,{primary:"4. Paste the token in the field below",primaryTypographyProps:{variant:"body2"}})})]})]}),o.jsxs(H,{sx:{display:"flex",gap:1,alignItems:"flex-start"},children:[o.jsx(ke,{fullWidth:!0,required:!0,label:"Refresh Token",placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",value:c.refreshToken,onChange:k=>{C("refreshToken",k.target.value),b(!1)},multiline:!0,rows:3,margin:"normal",helperText:"Paste your el-overblik refresh token here",error:!!s&&!y}),o.jsx(Me,{variant:"outlined",onClick:I,disabled:m||!c.refreshToken.trim(),sx:{mt:2,py:1.5,minWidth:120},startIcon:m?o.jsx(tt,{size:20}):y?o.jsx(en,{color:"success"}):o.jsx(_a,{}),children:m?"Validating...":y?"Validated":"Validate"})]}),y&&P&&o.jsxs(Qe,{severity:"success",sx:{mt:2},children:["Token valid! Found ",P.result.length," metering point(s).",o.jsx(Nt,{dense:!0,children:P.result.map((k,E)=>o.jsx(ct,{children:o.jsx(ut,{primary:`Metering Point: ${k.meteringPointId}`,secondary:`Consumer: ${k.consumerCVR||"N/A"} - ${k.firstConsumerPartyName||"N/A"}`})},E))})]})]});case 3:return o.jsxs(H,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2},children:"Metering Points"}),o.jsx(Qe,{severity:"info",sx:{mb:3},children:o.jsx(O,{variant:"body2",children:h.length>0?`We found ${h.length} metering point(s) associated with your token. You can edit them below or add more manually.`:"Your metering point ID is an 18-digit number found on your electricity bill or in el-overblik.dk"})}),c.meteringPoints.map((k,E)=>o.jsxs(st,{variant:"outlined",sx:{p:2,mb:2,borderColor:k.meteringPointId.length===18?"success.light":"divider"},children:[o.jsxs(H,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[o.jsxs(H,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsxs(O,{variant:"subtitle2",children:["Meter #",E+1]}),k.meteringPointId.length===18&&o.jsx(en,{color:"success",sx:{fontSize:16}})]}),c.meteringPoints.length>1&&o.jsx(Le,{size:"small",onClick:()=>D(E),color:"error",children:o.jsx(wi,{})})]}),o.jsxs(ee,{container:!0,spacing:2,children:[o.jsx(ee,{item:!0,xs:12,sm:4,children:o.jsx(ke,{fullWidth:!0,label:"Name",placeholder:"e.g., Main Kitchen",value:k.name,onChange:j=>A(E,"name",j.target.value),margin:"dense",size:"small"})}),o.jsx(ee,{item:!0,xs:12,sm:8,children:o.jsx(ke,{fullWidth:!0,required:!0,label:"18-digit Metering Point ID",placeholder:"571313174012345678",value:k.meteringPointId,onChange:j=>{const x=j.target.value.replace(/\D/g,"").slice(0,18);A(E,"meteringPointId",x)},margin:"dense",size:"small",error:k.meteringPointId&&k.meteringPointId.length!==18,helperText:k.meteringPointId&&k.meteringPointId.length!==18?`${k.meteringPointId.length}/18 digits`:"18 digits required",inputProps:{maxLength:18}})})]})]},E)),o.jsx(Me,{startIcon:o.jsx(bi,{}),onClick:R,variant:"outlined",fullWidth:!0,sx:{mt:1},children:"Add Another Meter Manually"})]});case 4:return o.jsxs(H,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:2},children:"Property Location"}),o.jsx(Qe,{severity:"info",sx:{mb:3},children:o.jsx(O,{variant:"body2",children:"Optional: Add coordinates for weather data integration. You can find these on Google Maps by right-clicking the location."})}),o.jsxs(ee,{container:!0,spacing:2,children:[o.jsx(ee,{item:!0,xs:12,sm:6,children:o.jsx(ke,{fullWidth:!0,label:"Latitude",placeholder:"55.676098",value:c.latitude,onChange:k=>C("latitude",k.target.value),type:"number",inputProps:{step:"any",min:-90,max:90},helperText:"Range: -90 to 90"})}),o.jsx(ee,{item:!0,xs:12,sm:6,children:o.jsx(ke,{fullWidth:!0,label:"Longitude",placeholder:"12.568337",value:c.longitude,onChange:k=>C("longitude",k.target.value),type:"number",inputProps:{step:"any",min:-180,max:180},helperText:"Range: -180 to 180"})})]})]});case 5:return o.jsxs(H,{children:[o.jsx(O,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",mb:3},children:"Review Your Property Setup"}),o.jsx(st,{variant:"outlined",sx:{p:3},children:o.jsxs(ee,{container:!0,spacing:2,children:[o.jsxs(ee,{item:!0,xs:12,children:[o.jsx(O,{variant:"subtitle2",color:"text.secondary",children:"Property Name"}),o.jsx(O,{variant:"body1",sx:{fontWeight:"medium"},children:c.name})]}),c.address&&o.jsxs(ee,{item:!0,xs:12,children:[o.jsx(O,{variant:"subtitle2",color:"text.secondary",children:"Address"}),o.jsx(O,{variant:"body1",children:c.address})]}),o.jsx(ee,{item:!0,xs:12,children:o.jsx(Vt,{})}),o.jsxs(ee,{item:!0,xs:12,children:[o.jsx(O,{variant:"subtitle2",color:"text.secondary",children:"Refresh Token"}),o.jsxs(O,{variant:"body2",sx:{fontFamily:"monospace",wordBreak:"break-all"},children:[c.refreshToken.substring(0,20),"..."]})]}),o.jsx(ee,{item:!0,xs:12,children:o.jsx(Vt,{})}),o.jsxs(ee,{item:!0,xs:12,children:[o.jsxs(O,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Metering Points (",c.meteringPoints.filter(k=>k.meteringPointId.length===18).length,")"]}),o.jsx(Nt,{dense:!0,children:c.meteringPoints.filter(k=>k.meteringPointId.length===18).map((k,E)=>o.jsxs(ct,{children:[o.jsx(na,{children:o.jsx(en,{color:"success",fontSize:"small"})}),o.jsx(ut,{primary:k.name||`Meter ${E+1}`,secondary:k.meteringPointId,secondaryTypographyProps:{sx:{fontFamily:"monospace"}}})]},E))})]}),(c.latitude||c.longitude)&&o.jsxs(o.Fragment,{children:[o.jsx(ee,{item:!0,xs:12,children:o.jsx(Vt,{})}),o.jsxs(ee,{item:!0,xs:12,children:[o.jsx(O,{variant:"subtitle2",color:"text.secondary",children:"Coordinates"}),o.jsxs(O,{variant:"body2",children:[c.latitude,", ",c.longitude]}),o.jsx(O,{variant:"caption",color:"success.main",children:" Weather data will be enabled"})]})]})]})})]});default:return null}};return o.jsx(Dn,{maxWidth:"md",sx:{py:4},children:o.jsx(Ee,{elevation:3,children:o.jsxs(Oe,{sx:{p:4},children:[o.jsx(pi,{activeStep:a,sx:{mb:4},children:$o.map(k=>o.jsx(gi,{children:o.jsx(vi,{children:k})},k))}),s&&o.jsx(Qe,{severity:"error",sx:{mb:3},onClose:()=>i(""),children:s}),o.jsx(H,{sx:{minHeight:400},children:W()}),o.jsxs(H,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[o.jsx(Me,{disabled:a===0,onClick:M,startIcon:o.jsx(xi,{}),children:"Back"}),o.jsx(H,{children:a<$o.length-1?o.jsx(Me,{variant:"contained",onClick:p,endIcon:o.jsx(yi,{}),children:"Next"}):o.jsx(Me,{variant:"contained",onClick:N,disabled:l,endIcon:o.jsx(en,{}),children:l?"Creating...":"Complete Setup"})})]})]})})})},Eg=()=>{const e=Kr(),r=()=>{e("/",{replace:!0})},t=()=>{e("/settings")};return o.jsx(Ig,{onComplete:r,onSkip:t})},Og=()=>{const[e,r]=f.useState([]),[t,a]=f.useState([]),[n,s]=f.useState([]),[i,l]=f.useState(!0),[u,c]=f.useState(null),[d,m]=f.useState(0),[g,h]=f.useState(!1),[v,y]=f.useState(null),[b,P]=f.useState(!1),[w,p]=f.useState(!1);f.useEffect(()=>{M()},[]);const M=async()=>{try{l(!0);const N={headers:{"Content-Type":"application/json"}},[W,k,E]=await Promise.all([fetch("/api/admin/users",N),fetch("/api/admin/properties",N),fetch("/api/admin/metering-points",N)]);if(!W.ok||!k.ok||!E.ok)throw W.status===403||k.status===403||E.status===403?new Error("Access Denied: Admin privileges required"):new Error("Failed to fetch admin data");const j=await W.json(),x=await k.json(),F=await E.json();r(j),a(x),s(F)}catch(D){console.error(D),c(D.message)}finally{l(!1)}},C=(D,N)=>{m(N)},A=D=>{y(D),p(!1),h(!0)},I=()=>{h(!1),y(null),p(!1)},R=async()=>{if(!(!v||b)){P(!0);try{const D=await ze(`/api/admin/users/${v.id}`,{method:"DELETE"});if(!D.ok){let N;try{N=await D.json()}catch{throw new Error("Failed to delete user and could not parse error response.")}throw new Error(N.error||"Failed to delete user")}p(!0),r(e.filter(N=>N.id!==v.id)),setTimeout(()=>{I()},2e3)}catch(D){c(D.message),I()}finally{P(!1)}}};return i?o.jsx(H,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:o.jsx(tt,{})}):u?o.jsx(H,{p:3,children:o.jsx(Qe,{severity:"error",children:u})}):o.jsxs(o.Fragment,{children:[o.jsxs(H,{p:3,children:[o.jsx(O,{variant:"h4",gutterBottom:!0,children:"Admin Dashboard"}),o.jsx(O,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0,children:"System Overview"}),o.jsxs(ee,{container:!0,spacing:3,mb:4,children:[o.jsx(ee,{item:!0,xs:12,md:4,children:o.jsx(Ee,{children:o.jsxs(Oe,{children:[o.jsx(O,{color:"textSecondary",gutterBottom:!0,children:"Total Users"}),o.jsx(O,{variant:"h3",children:e.length})]})})}),o.jsx(ee,{item:!0,xs:12,md:4,children:o.jsx(Ee,{children:o.jsxs(Oe,{children:[o.jsx(O,{color:"textSecondary",gutterBottom:!0,children:"Total Properties"}),o.jsx(O,{variant:"h3",children:t.length})]})})}),o.jsx(ee,{item:!0,xs:12,md:4,children:o.jsx(Ee,{children:o.jsxs(Oe,{children:[o.jsx(O,{color:"textSecondary",gutterBottom:!0,children:"Total Metering Points"}),o.jsx(O,{variant:"h3",children:n.length})]})})})]}),o.jsx(H,{sx:{borderBottom:1,borderColor:"divider"},children:o.jsxs(ji,{value:d,onChange:C,"aria-label":"admin tabs",children:[o.jsx(Hn,{label:"Users"}),o.jsx(Hn,{label:"Properties"}),o.jsx(Hn,{label:"Metering Points"})]})}),o.jsx("div",{role:"tabpanel",hidden:d!==0,id:"tabpanel-0",children:d===0&&o.jsx(zn,{component:st,sx:{mt:2},children:o.jsxs(Yn,{children:[o.jsx(Un,{children:o.jsxs(Rt,{children:[o.jsx(xe,{children:"ID"}),o.jsx(xe,{children:"Name"}),o.jsx(xe,{children:"Email"}),o.jsx(xe,{children:"Role"}),o.jsx(xe,{children:"Onboarding"}),o.jsx(xe,{children:"Created At"}),o.jsx(xe,{align:"right",children:"Actions"})]})}),o.jsx(qn,{children:e.map(D=>o.jsxs(Rt,{children:[o.jsx(xe,{children:D.id}),o.jsx(xe,{children:D.name||"-"}),o.jsx(xe,{children:D.email}),o.jsx(xe,{children:o.jsx(gt,{label:D.is_admin?"Admin":"User",color:D.is_admin?"error":"primary",size:"small"})}),o.jsx(xe,{children:o.jsx(gt,{label:D.onboarding_completed?"Done":"Pending",color:D.onboarding_completed?"success":"default",size:"small"})}),o.jsx(xe,{children:new Date(D.createdAt).toLocaleDateString()}),o.jsx(xe,{align:"right",children:o.jsx(Le,{onClick:()=>A(D),color:"error",size:"small",children:o.jsx(wn,{})})})]},D.id))})]})})}),o.jsx("div",{role:"tabpanel",hidden:d!==1,id:"tabpanel-1",children:d===1&&o.jsx(zn,{component:st,sx:{mt:2},children:o.jsxs(Yn,{children:[o.jsx(Un,{children:o.jsxs(Rt,{children:[o.jsx(xe,{children:"ID"}),o.jsx(xe,{children:"Name"}),o.jsx(xe,{children:"Owner"}),o.jsx(xe,{children:"Token (Masked)"}),o.jsx(xe,{children:"Metering Points"})]})}),o.jsx(qn,{children:t.map(D=>o.jsxs(Rt,{children:[o.jsx(xe,{children:D.id}),o.jsx(xe,{children:D.name}),o.jsxs(xe,{children:[D.users&&D.users.map(N=>o.jsx("div",{style:{fontSize:"0.8rem"},children:N.email},N.id)),(!D.users||D.users.length===0)&&o.jsx("span",{style:{color:"gray",fontStyle:"italic"},children:"No Owner"})]}),o.jsx(xe,{sx:{fontFamily:"monospace",fontSize:"0.8rem"},children:D.refresh_token||"-"}),o.jsx(xe,{children:D.meteringPoints?D.meteringPoints.length:0})]},D.id))})]})})}),o.jsx("div",{role:"tabpanel",hidden:d!==2,id:"tabpanel-2",children:d===2&&o.jsx(zn,{component:st,sx:{mt:2},children:o.jsxs(Yn,{children:[o.jsx(Un,{children:o.jsxs(Rt,{children:[o.jsx(xe,{children:"ID"}),o.jsx(xe,{children:"Name"}),o.jsx(xe,{children:"MP ID"}),o.jsx(xe,{children:"Property"}),o.jsx(xe,{children:"Owner"})]})}),o.jsx(qn,{children:n.map(D=>o.jsxs(Rt,{children:[o.jsx(xe,{children:D.id}),o.jsx(xe,{children:D.name}),o.jsx(xe,{sx:{fontFamily:"monospace"},children:D.meteringPointId}),o.jsx(xe,{children:D.property?D.property.name:o.jsx("span",{style:{color:"red"},children:"Orphaned"})}),o.jsx(xe,{children:D.property&&D.property.users&&D.property.users.map(N=>o.jsx("div",{style:{fontSize:"0.8rem"},children:N.email},N.id))})]},D.id))})]})})})]}),o.jsxs(Yr,{open:g,onClose:I,children:[o.jsx(hn,{children:"Confirm Deletion"}),o.jsxs(Ur,{children:[o.jsxs(Ci,{children:['Are you sure you want to delete the user "',v?.email,'"? This action is irreversible and will delete all associated properties, metering points, and data.']}),w&&o.jsx(H,{mt:2,p:2,sx:{border:"1px solid #4caf50",borderRadius:1,backgroundColor:"#f1f8e9"},children:o.jsxs(O,{variant:"h6",color:"success.main",sx:{display:"flex",alignItems:"center"},children:[o.jsx(Zo,{sx:{mr:1}}),"User deleted successfully!"]})})]}),o.jsxs(qr,{children:[o.jsx(Me,{onClick:I,disabled:b,children:"Cancel"}),o.jsx(Me,{onClick:R,color:"error",autoFocus:!0,disabled:b||w,children:b?"Deleting...":w?"Deleted!":"Delete"})]})]})]})},Rg=()=>{const r=(()=>{const x=new Date;x.setDate(x.getDate()-2);const F=new Date(x);F.setDate(F.getDate()-7);const $=V=>{const B=V.getFullYear(),G=String(V.getMonth()+1).padStart(2,"0"),_=String(V.getDate()).padStart(2,"0");return`${B}-${G}-${_}`};return{startDate:$(F),endDate:$(x)}})(),[t,a]=f.useState(null),[n,s]=f.useState(!1),[i,l]=f.useState(null),[u,c]=f.useState(r.startDate),[d,m]=f.useState(r.endDate),[g,h]=f.useState(null),[v,y]=f.useState([]),[b,P]=f.useState(""),[w,p]=f.useState("");fa.useEffect(()=>{(async()=>{try{const F=await fetch("/api/settings/properties");if(F.ok){const $=await F.json();y($),$.length>0&&(P($[0].id),$[0].meteringPoints?.length>0&&p($[0].meteringPoints[0].id))}}catch(F){console.error("Failed to fetch properties:",F)}})()},[]);const M=x=>{const F=x.target.value;P(F);const $=v.find(V=>V.id===parseInt(F));$?.meteringPoints?.length>0?p($.meteringPoints[0].id):p("")},C=(x,F)=>{const $=new Date(x),V=new Date(F);return $>V?"Start date must be before or equal to end date":Math.ceil(Math.abs(V-$)/(1e3*60*60*24))>730?"Date range cannot exceed 730 days":null},A=async()=>{const x=C(u,d);if(x){h(x);return}s(!0),l(null),h(null);try{let F=`/api/test-data?dateFrom=${u}&dateTo=${d}`;w?F+=`&meteringPointId=${w}`:b&&(F+=`&propertyId=${b}`);const $=await fetch(F);if(!$.ok)throw new Error(`HTTP error! status: ${$.status}`);const V=await $.json();a(V)}catch(F){console.error("Error fetching data:",F),l("Failed to fetch data from Eloverblik API. Verify your refresh token.")}finally{s(!1)}},I=x=>{const F=x?.result?.[0];if(!F?.success||F?.errorCode!==1e4)return[];const $=F.MyEnergyData_MarketDocument?.TimeSeries?.[0];if(!$)return[];const V=$.Period||[],B=[];return V.forEach(G=>{const _=G.Point||[],z=new Date(G.timeInterval?.start||new Date);_.forEach(L=>{const Y=new Date(z);Y.setHours(z.getHours()+(parseInt(L.position)-1));const ie=parseFloat(L["out_Quantity.quantity"]||0);B.push({timestamp:Y,label:Y.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})+" "+Y.toLocaleDateString("en-GB",{day:"numeric",month:"short"}),consumption:ie})})}),B.sort((G,_)=>G.timestamp-_.timestamp)},R=x=>{const F=x?.result?.[0];if(!F?.success||F?.errorCode!==1e4)return[];const $=F.MyEnergyData_MarketDocument?.TimeSeries?.[0];if(!$)return[];const V=$.Period||[],B={};return V.forEach(G=>{const _=G.Point||[],z=new Date(G.timeInterval?.start||new Date);_.forEach(L=>{const Y=new Date(z);Y.setHours(z.getHours()+(parseInt(L.position)-1));const ie=Y.toLocaleDateString("en-GB"),De=parseFloat(L["out_Quantity.quantity"]||0);B[ie]||(B[ie]={date:ie,timestamp:new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()),consumptions:[]}),B[ie].consumptions.push(De)})}),Object.values(B).map(G=>{const _=G.consumptions.sort((z,L)=>z-L);return{date:G.date,timestamp:G.timestamp,min:Math.min(..._),max:Math.max(..._),avg:_.reduce((z,L)=>z+L,0)/_.length}}).sort((G,_)=>G.timestamp-_.timestamp)},D=t?I(t):[],N=t?R(t):[],W=x=>x.map(F=>({x:F.date,y:[F.avg,F.max,F.min,F.avg]})),k=x=>x.map(F=>F.consumption),j=v.find(x=>x.id===parseInt(b))?.meteringPoints||[];return o.jsxs("div",{className:"api-demo",children:[o.jsxs("div",{className:"demo-header",children:[o.jsx("h2",{children:" Eloverblik API Fetcher"}),o.jsx("p",{children:"Pull live data from Eloverblik for your properties"}),o.jsxs("div",{className:"date-picker-container",children:[o.jsxs("div",{className:"config-group",style:{display:"flex",gap:"15px",marginBottom:"15px",flexWrap:"wrap"},children:[o.jsxs("div",{className:"config-selector",style:{flex:1,minWidth:"200px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Property (Refresh Token)"}),o.jsxs("select",{value:b,onChange:M,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc",width:"100%"},children:[o.jsx("option",{value:"",children:"Select Property"}),v.map(x=>o.jsx("option",{value:x.id,children:x.name},x.id))]})]}),o.jsxs("div",{className:"config-selector",style:{flex:1,minWidth:"200px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Metering Point"}),o.jsxs("select",{value:w,onChange:x=>p(x.target.value),disabled:!b,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc",width:"100%"},children:[j.map(x=>o.jsxs("option",{value:x.id,children:[x.name," (",x.meteringPointId,")"]},x.id)),j.length===0&&o.jsx("option",{value:"",children:"No meters found"})]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:[o.jsxs("div",{className:"date-input-group",children:[o.jsx("label",{children:"Start Date"}),o.jsx("input",{type:"date",value:u,onChange:x=>c(x.target.value)})]}),o.jsxs("div",{className:"date-input-group",children:[o.jsx("label",{children:"End Date"}),o.jsx("input",{type:"date",value:d,onChange:x=>m(x.target.value)})]})]})]}),g&&o.jsx("div",{className:"date-error",style:{color:"red",marginTop:"10px"},children:g}),o.jsx("button",{onClick:A,disabled:n||!b,className:"fetch-button",children:n?" Fetching...":" Fetch Live Data"})]}),i&&o.jsx("div",{className:"error-message",style:{background:"#ffeeee",p:"15px",color:"red",borderRadius:"4px",mt:"10px"},children:i}),o.jsx("div",{className:"chart-container",children:N.length>0?o.jsx("div",{className:"chart-wrapper",children:o.jsx(Lt,{options:vs(N.map(x=>x.date)),series:[{data:W(N)}],type:"candlestick",height:400})}):o.jsx("div",{className:"no-data",children:"No data fetched yet. Select property and dates."})}),o.jsx("div",{className:"chart-container",children:D.length>0&&o.jsx("div",{className:"chart-wrapper-hourly",children:o.jsx(Lt,{options:xs(D.map(x=>x.label),D.length),series:[{name:"Consumption (kWh)",data:k(D)}],type:"bar",height:Math.max(D.length*25+200,600)})})})]})},Bo=({children:e})=>{const{user:r,loading:t}=Et(),a=da();return t?o.jsx(H,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:o.jsx(tt,{})}):r?e:o.jsx(Ei,{to:"/login",state:{from:a},replace:!0})};function _g(){return o.jsxs(Si,{theme:Vi,children:[o.jsx(Mi,{}),o.jsx(tl,{children:o.jsx(Oi,{children:o.jsxs(Ri,{children:[o.jsx(et,{path:"/login",element:o.jsx(Mg,{})}),o.jsx(et,{path:"/register",element:o.jsx(Tg,{})}),o.jsx(et,{path:"/onboarding",element:o.jsx(Bo,{children:o.jsx(Eg,{})})}),o.jsxs(et,{element:o.jsx(Bo,{children:o.jsx(rl,{children:o.jsx(El,{})})}),children:[o.jsx(et,{path:"/",element:o.jsx(Jl,{})}),o.jsx(et,{path:"/analysis",element:o.jsx(Yp,{})}),o.jsx(et,{path:"/weather",element:o.jsx(Gp,{})}),o.jsx(et,{path:"/compare",element:o.jsx(Jp,{})}),o.jsx(et,{path:"/annotate",element:o.jsx(fg,{})}),o.jsx(et,{path:"/settings",element:o.jsx(Sg,{})}),o.jsx(et,{path:"/profile",element:o.jsx(kg,{})}),o.jsx(et,{path:"/admin",element:o.jsx(Og,{})}),o.jsx(et,{path:"/api-demo",element:o.jsx(Rg,{})})]})]})})})]})}const Ag=Ni.createRoot(document.getElementById("root"));Ag.render(o.jsx(fa.StrictMode,{children:o.jsx(_g,{})}));
